import{p as e,q as a,r as l,t,v as o}from"./index-1c6f2b30.js";import{_ as n}from"./index-db7beee4.js";import{_ as d}from"./index-292e5414.js";import{r as u,c as i,f as r,l as c,m as s,E as p,z as m,q as v,D as f,A as h,G as g,X as _,y as b,ab as w}from"./vue-core-d6f028e5.js";import{O as y,P as V,aa as x,ab as k,ai as C,aj as S,ac as j,ag as U,am as z,ao as N,aq as q,ak as P,as as D}from"./element-plus-33c96ec5.js";import"./icons-02de347c.js";import"./utils-80dc1c42.js";const T={class:"app-container"},E={class:"dialog-footer"},F={__name:"index",setup(F){const B=u(!1),K=u([]),O=i(()=>1!==K.value.length),A=i(()=>0===K.value.length),G=u(!0),I=u(0),Q=u([]),R=u(""),X=u(!1),H=u({pageNum:1,pageSize:10,name:void 0,code:void 0}),J=u({id:void 0,name:void 0,code:void 0,description:void 0}),L={name:[{required:!0,message:"院系名称不能为空",trigger:"blur"}],code:[{required:!0,message:"院系编码不能为空",trigger:"blur"}]},M=u(null);function W(){B.value=!0,e({pageNum:H.value.pageNum,pageSize:H.value.pageSize,name:H.value.name,code:H.value.code}).then(e=>{Q.value=e.data.records||[],I.value=e.data.total||0,B.value=!1}).catch(e=>{B.value=!1,y.error("获取院系列表失败")})}function Y(){H.value.pageNum=1,W()}function Z(){H.value={pageNum:1,pageSize:10,name:void 0,code:void 0},Y()}function $(e){K.value=e.map(e=>e.id)}function ee(){oe(),R.value="添加院系",X.value=!0}function ae(e){oe();const l=e.id||K.value[0];B.value=!0,a(l).then(e=>{B.value=!1,e.data?(Object.assign(J.value,e.data),R.value="修改院系",X.value=!0):y.warning("获取院系详情失败")}).catch(e=>{B.value=!1,y.error("获取院系详情失败")})}function le(){var e;null==(e=M.value)||e.validate(e=>{e&&(J.value.id?l(J.value).then(e=>{y.success("修改成功"),X.value=!1,W()}).catch(e=>{y.error("修改院系失败")}):t(J.value).then(e=>{y.success("新增成功"),X.value=!1,W()}).catch(e=>{y.error("新增院系失败")}))})}function te(e){const a=e.id||K.value;V.confirm("确认删除选中的院系信息?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{if("number"==typeof a)o(a).then(e=>{y.success("删除成功"),W()}).catch(e=>{y.error("删除院系失败")});else{const e=a.map(e=>o(e));Promise.all(e).then(()=>{y.success("批量删除成功"),W()}).catch(e=>{y.error("批量删除院系失败")})}}).catch(()=>{})}function oe(){var e;J.value={id:void 0,name:void 0,code:void 0,description:void 0},null==(e=M.value)||e.resetFields()}function ne(){X.value=!1,oe()}return r(()=>{W()}),(e,a)=>{const l=x,t=k,o=C,u=S,i=j,r=d,y=U,V=z,F=N,K=n,oe=q,de=P,ue=w("hasPermi"),ie=D;return c(),s("div",T,[p(de,{class:"box-card"},{header:m(()=>a[9]||(a[9]=[v("div",{class:"card-header"},[v("span",null,"院系管理")],-1)])),default:m(()=>[a[36]||(a[36]=f()),h(p(u,{model:H.value,ref:"queryForm",inline:!0},{default:m(()=>[p(t,{label:"院系名称",prop:"name"},{default:m(()=>[p(l,{modelValue:H.value.name,"onUpdate:modelValue":a[0]||(a[0]=e=>H.value.name=e),placeholder:"请输入院系名称",clearable:"",style:{width:"240px"},onKeyup:_(Y,["enter"])},null,8,["modelValue"])]),_:1}),a[13]||(a[13]=f()),p(t,{label:"院系编码",prop:"code"},{default:m(()=>[p(l,{modelValue:H.value.code,"onUpdate:modelValue":a[1]||(a[1]=e=>H.value.code=e),placeholder:"请输入院系编码",clearable:"",style:{width:"240px"},onKeyup:_(Y,["enter"])},null,8,["modelValue"])]),_:1}),a[14]||(a[14]=f()),p(t,null,{default:m(()=>[p(o,{type:"primary",icon:"Search",onClick:Y},{default:m(()=>a[10]||(a[10]=[f("搜索")])),_:1}),a[12]||(a[12]=f()),p(o,{icon:"Refresh",onClick:Z},{default:m(()=>a[11]||(a[11]=[f("重置")])),_:1})]),_:1})]),_:1},8,["model"]),[[g,G.value]]),a[37]||(a[37]=f()),p(y,{gutter:10,class:"mb8"},{default:m(()=>[p(i,{span:1.5},{default:m(()=>[h((c(),b(o,{type:"primary",plain:"",icon:"Plus",onClick:ee},{default:m(()=>a[15]||(a[15]=[f("新增")])),_:1})),[[ue,["education:department:add"]]])]),_:1}),a[18]||(a[18]=f()),p(i,{span:1.5},{default:m(()=>[h((c(),b(o,{type:"success",plain:"",icon:"Edit",disabled:O.value,onClick:ae},{default:m(()=>a[16]||(a[16]=[f("修改")])),_:1},8,["disabled"])),[[ue,["education:department:edit"]]])]),_:1}),a[19]||(a[19]=f()),p(i,{span:1.5},{default:m(()=>[h((c(),b(o,{type:"danger",plain:"",icon:"Delete",disabled:A.value,onClick:te},{default:m(()=>a[17]||(a[17]=[f("删除")])),_:1},8,["disabled"])),[[ue,["education:department:remove"]]])]),_:1}),a[20]||(a[20]=f()),p(r,{showSearch:G.value,"onUpdate:showSearch":a[2]||(a[2]=e=>G.value=e),onQueryTable:W},null,8,["showSearch"])]),_:1}),a[38]||(a[38]=f()),h((c(),b(F,{data:Q.value,onSelectionChange:$},{default:m(()=>[p(V,{type:"selection",width:"55",align:"center"}),a[24]||(a[24]=f()),p(V,{label:"院系ID",align:"center",prop:"id",width:"80"}),a[25]||(a[25]=f()),p(V,{label:"院系名称",align:"center",prop:"name","show-overflow-tooltip":!0}),a[26]||(a[26]=f()),p(V,{label:"院系编码",align:"center",prop:"code","show-overflow-tooltip":!0}),a[27]||(a[27]=f()),p(V,{label:"描述",align:"center",prop:"description","show-overflow-tooltip":!0}),a[28]||(a[28]=f()),p(V,{label:"创建时间",align:"center",prop:"createTime",width:"180"}),a[29]||(a[29]=f()),p(V,{label:"操作",align:"center",width:"180","class-name":"small-padding fixed-width"},{default:m(e=>[h((c(),b(o,{type:"text",icon:"Edit",onClick:a=>ae(e.row)},{default:m(()=>a[21]||(a[21]=[f("修改")])),_:2},1032,["onClick"])),[[ue,["education:department:edit"]]]),a[23]||(a[23]=f()),h((c(),b(o,{type:"text",icon:"Delete",onClick:a=>te(e.row)},{default:m(()=>a[22]||(a[22]=[f("删除")])),_:2},1032,["onClick"])),[[ue,["education:department:remove"]]])]),_:1})]),_:1},8,["data"])),[[ie,B.value]]),a[39]||(a[39]=f()),h(p(K,{total:I.value,page:H.value.pageNum,"onUpdate:page":a[3]||(a[3]=e=>H.value.pageNum=e),limit:H.value.pageSize,"onUpdate:limit":a[4]||(a[4]=e=>H.value.pageSize=e),onPagination:W},null,8,["total","page","limit"]),[[g,I.value>0]]),a[40]||(a[40]=f()),p(oe,{title:R.value,modelValue:X.value,"onUpdate:modelValue":a[8]||(a[8]=e=>X.value=e),width:"600px","append-to-body":""},{footer:m(()=>[v("div",E,[p(o,{type:"primary",onClick:le},{default:m(()=>a[32]||(a[32]=[f("确 定")])),_:1}),a[34]||(a[34]=f()),p(o,{onClick:ne},{default:m(()=>a[33]||(a[33]=[f("取 消")])),_:1})])]),default:m(()=>[p(u,{ref_key:"departmentForm",ref:M,model:J.value,rules:L,"label-width":"100px"},{default:m(()=>[p(t,{label:"院系名称",prop:"name"},{default:m(()=>[p(l,{modelValue:J.value.name,"onUpdate:modelValue":a[5]||(a[5]=e=>J.value.name=e),placeholder:"请输入院系名称"},null,8,["modelValue"])]),_:1}),a[30]||(a[30]=f()),p(t,{label:"院系编码",prop:"code"},{default:m(()=>[p(l,{modelValue:J.value.code,"onUpdate:modelValue":a[6]||(a[6]=e=>J.value.code=e),placeholder:"请输入院系编码"},null,8,["modelValue"])]),_:1}),a[31]||(a[31]=f()),p(t,{label:"描述",prop:"description"},{default:m(()=>[p(l,{modelValue:J.value.description,"onUpdate:modelValue":a[7]||(a[7]=e=>J.value.description=e),type:"textarea",placeholder:"请输入院系描述"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),a[35]||(a[35]=f())]),_:1},8,["title","modelValue"])]),_:1})])}}};export{F as default};
