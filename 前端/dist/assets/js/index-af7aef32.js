var e=(e,a,l)=>new Promise((r,t)=>{var o=e=>{try{n(l.next(e))}catch(a){t(a)}},s=e=>{try{n(l.throw(e))}catch(a){t(a)}},n=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);n((l=l.apply(e,a)).next())});import{_ as a,u as l,m as r}from"./index-1c6f2b30.js";import{ah as t,r as o,M as s,f as n,l as u,m as i,E as d,z as c,D as p,u as m,q as f,A as h,y as v,ab as g}from"./vue-core-d6f028e5.js";import{M as w,R as y,T as _}from"./icons-02de347c.js";import{O as b,Q as k,aa as C,ab as I,R as z,ai as N,aj as x,ak as j,am as S,an as V,ao as U,ap as q,as as P}from"./element-plus-33c96ec5.js";import"./utils-80dc1c42.js";const O={class:"teacher-courses-container"},R={class:"card-header"},T={class:"header-buttons"},A={class:"pagination-container"},D=a({__name:"index",setup(a){const D=t(),M=l(),E=o(null),F=o(!1),G=o(!1),Q=o([]),B=o(0),H=s({courseName:"",semester:"",pageNum:1,pageSize:10});function J(){E.value?(F.value=!0,r(E.value,H).then(e=>{Q.value=e.data.list||[],B.value=e.data.total||0}).catch(e=>{b.error("获取教师课程列表失败")}).finally(()=>{F.value=!1})):b.warning("教师ID不存在，无法获取课程列表")}function K(){H.pageNum=1,J()}function L(){H.courseName="",H.semester="",K()}function W(e){H.pageSize=e,J()}function X(e){H.pageNum=e,J()}function Y(){b.success("导出功能待实现")}return n(()=>e(this,null,function*(){yield function(){return e(this,null,function*(){const e=yield M.getUserInfo();e&&e.teacherId?E.value=e.teacherId:b.warning("获取教师信息失败，请重新登录")})}(),J()})),(e,a)=>{const l=C,r=I,t=z,o=N,s=x,n=j,b=S,M=V,E=U,J=q,Z=g("hasPerms"),$=P;return u(),i("div",O,[d(n,{class:"search-card",shadow:"hover"},{default:c(()=>[d(s,{model:H,ref:"queryForm",inline:!0},{default:c(()=>[d(r,{label:"课程名称",prop:"courseName"},{default:c(()=>[d(l,{modelValue:H.courseName,"onUpdate:modelValue":a[0]||(a[0]=e=>H.courseName=e),placeholder:"请输入课程名称",clearable:""},null,8,["modelValue"])]),_:1}),a[7]||(a[7]=p()),d(r,{label:"学期",prop:"semester"},{default:c(()=>[d(l,{modelValue:H.semester,"onUpdate:modelValue":a[1]||(a[1]=e=>H.semester=e),placeholder:"请输入学期",clearable:""},null,8,["modelValue"])]),_:1}),a[8]||(a[8]=p()),d(r,null,{default:c(()=>[d(o,{type:"primary",onClick:K},{default:c(()=>[d(t,null,{default:c(()=>[d(m(w))]),_:1}),a[4]||(a[4]=p("查询\r\n          "))]),_:1}),a[6]||(a[6]=p()),d(o,{onClick:L},{default:c(()=>[d(t,null,{default:c(()=>[d(m(y))]),_:1}),a[5]||(a[5]=p("重置\r\n          "))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),a[29]||(a[29]=p()),d(n,{class:"table-card",shadow:"hover"},{header:c(()=>[f("div",R,[a[10]||(a[10]=f("span",{class:"header-title"},"我的授课列表",-1)),a[11]||(a[11]=p()),f("div",T,[h((u(),v(o,{type:"primary",onClick:Y,loading:G.value},{default:c(()=>[d(t,null,{default:c(()=>[d(m(_))]),_:1}),a[9]||(a[9]=p("导出\r\n            "))]),_:1},8,["loading"])),[[Z,["course:teaching:list"]]])])])]),default:c(()=>[a[27]||(a[27]=p()),h((u(),v(E,{data:Q.value,stripe:"",border:"",style:{width:"100%"},"header-cell-style":{background:"#f5f7fa",color:"#606266"}},{default:c(()=>[d(b,{type:"index",label:"#",width:"60"}),a[17]||(a[17]=p()),d(b,{prop:"courseName",label:"课程名称","min-width":"180","show-overflow-tooltip":""}),a[18]||(a[18]=p()),d(b,{prop:"courseCode",label:"课程编码",width:"120","show-overflow-tooltip":""}),a[19]||(a[19]=p()),d(b,{prop:"credit",label:"学分",width:"80",align:"center"}),a[20]||(a[20]=p()),d(b,{prop:"semester",label:"学期",width:"120","show-overflow-tooltip":""}),a[21]||(a[21]=p()),d(b,{prop:"classTime",label:"上课时间",width:"150","show-overflow-tooltip":""}),a[22]||(a[22]=p()),d(b,{prop:"location",label:"上课地点",width:"150","show-overflow-tooltip":""}),a[23]||(a[23]=p()),d(b,{prop:"selectedCount",label:"选课人数",width:"100",align:"center"}),a[24]||(a[24]=p()),d(b,{prop:"capacity",label:"课程容量",width:"100",align:"center"}),a[25]||(a[25]=p()),d(b,{label:"状态",width:"100",align:"center"},{default:c(e=>[d(M,{type:0===e.row.status?"success":"info"},{default:c(()=>[p(k(0===e.row.status?"正常":"已结课"),1)]),_:2},1032,["type"])]),_:1}),a[26]||(a[26]=p()),d(b,{label:"操作",width:"220",fixed:"right"},{default:c(e=>[d(o,{type:"primary",link:"",onClick:a=>{return l=e.row,void D.push({name:"TeacherCourseStudents",params:{id:l.id,courseId:l.courseId}});var l}},{default:c(()=>a[12]||(a[12]=[p("\r\n              学生名单\r\n            ")])),_:2},1032,["onClick"]),a[15]||(a[15]=p()),d(o,{type:"primary",link:"",onClick:a=>{return l=e.row,void D.push({name:"GradeInput",query:{courseId:l.courseId,courseOfferingId:l.id}});var l}},{default:c(()=>a[13]||(a[13]=[p("\r\n              成绩录入\r\n            ")])),_:2},1032,["onClick"]),a[16]||(a[16]=p()),d(o,{type:"primary",link:"",onClick:a=>{return l=e.row,void D.push({name:"AttendanceRecord",query:{courseId:l.courseId,courseOfferingId:l.id}});var l}},{default:c(()=>a[14]||(a[14]=[p("\r\n              考勤管理\r\n            ")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[$,F.value]]),a[28]||(a[28]=p()),f("div",A,[d(J,{"current-page":H.pageNum,"onUpdate:currentPage":a[2]||(a[2]=e=>H.pageNum=e),"page-size":H.pageSize,"onUpdate:pageSize":a[3]||(a[3]=e=>H.pageSize=e),"page-sizes":[10,20,50,100],background:!0,layout:"total, sizes, prev, pager, next, jumper",total:B.value,onSizeChange:W,onCurrentChange:X},null,8,["current-page","page-size","total"])])]),_:1})])}}},[["__scopeId","data-v-3b67e076"]]);export{D as default};
