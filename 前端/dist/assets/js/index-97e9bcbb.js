import{p as e,q as a,r as l,t,v as o}from"./index-22381d63.js";import{_ as n}from"./index-50714a02.js";import{_ as d}from"./index-473e483c.js";import{r as u,c as i,f as r,m as c,E as s,z as p,ab as m,l as v,q as f,D as h,A as g,G as _,X as b,y}from"./vue-core-9ee4ed8b.js";import{O as w,a9 as V,P as x,ab as k,ac as C,aj as S,ak as j,ad as U,ah as z,an as N,ap as q,al as P,as as D}from"./element-plus-e2333c73.js";import"./icons-c547ea56.js";import"./utils-e59f4bae.js";const T={class:"app-container"},E={class:"dialog-footer"},F={__name:"index",setup(F){const B=u(!1),K=u([]),O=i((()=>1!==K.value.length)),A=i((()=>0===K.value.length)),G=u(!0),I=u(0),Q=u([]),R=u(""),X=u(!1),H=u({pageNum:1,pageSize:10,name:void 0,code:void 0}),J=u({id:void 0,name:void 0,code:void 0,description:void 0}),L={name:[{required:!0,message:"院系名称不能为空",trigger:"blur"}],code:[{required:!0,message:"院系编码不能为空",trigger:"blur"}]},M=u(null);function W(){B.value=!0,e({pageNum:H.value.pageNum,pageSize:H.value.pageSize,name:H.value.name,code:H.value.code}).then((e=>{Q.value=e.data.records||[],I.value=e.data.total||0,B.value=!1})).catch((e=>{B.value=!1,w.error("获取院系列表失败")}))}function Y(){H.value.pageNum=1,W()}function Z(){H.value={pageNum:1,pageSize:10,name:void 0,code:void 0},Y()}function $(e){K.value=e.map((e=>e.id))}function ee(){oe(),R.value="添加院系",X.value=!0}function ae(e){oe();const l=e.id||K.value[0];B.value=!0,a(l).then((e=>{B.value=!1,e.data?(Object.assign(J.value,e.data),R.value="修改院系",X.value=!0):w.warning("获取院系详情失败")})).catch((e=>{B.value=!1,w.error("获取院系详情失败")}))}function le(){var e;null==(e=M.value)||e.validate((e=>{e&&(J.value.id?l(J.value).then((e=>{w.success("修改成功"),X.value=!1,W()})).catch((e=>{w.error("修改院系失败")})):t(J.value).then((e=>{w.success("新增成功"),X.value=!1,W()})).catch((e=>{w.error("新增院系失败")})))}))}function te(e){const a=e.id||K.value;x.confirm("确认删除选中的院系信息?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{if("number"==typeof a)o(a).then((e=>{w.success("删除成功"),W()})).catch((e=>{w.error("删除院系失败")}));else{const e=a.map((e=>o(e)));Promise.all(e).then((()=>{w.success("批量删除成功"),W()})).catch((e=>{w.error("批量删除院系失败")}))}})).catch((()=>{}))}function oe(){var e;J.value={id:void 0,name:void 0,code:void 0,description:void 0},null==(e=M.value)||e.resetFields()}function ne(){X.value=!1,oe()}return r((()=>{W()})),(e,a)=>{const l=k,t=C,o=S,u=j,i=U,r=d,w=z,x=N,F=q,K=n,oe=P,de=V,ue=m("hasPermi"),ie=D;return v(),c("div",T,[s(de,{class:"box-card"},{header:p((()=>a[9]||(a[9]=[f("div",{class:"card-header"},[f("span",null,"院系管理")],-1)]))),default:p((()=>[a[36]||(a[36]=h()),g(s(u,{model:H.value,ref:"queryForm",inline:!0},{default:p((()=>[s(t,{label:"院系名称",prop:"name"},{default:p((()=>[s(l,{modelValue:H.value.name,"onUpdate:modelValue":a[0]||(a[0]=e=>H.value.name=e),placeholder:"请输入院系名称",clearable:"",style:{width:"240px"},onKeyup:b(Y,["enter"])},null,8,["modelValue"])])),_:1}),a[13]||(a[13]=h()),s(t,{label:"院系编码",prop:"code"},{default:p((()=>[s(l,{modelValue:H.value.code,"onUpdate:modelValue":a[1]||(a[1]=e=>H.value.code=e),placeholder:"请输入院系编码",clearable:"",style:{width:"240px"},onKeyup:b(Y,["enter"])},null,8,["modelValue"])])),_:1}),a[14]||(a[14]=h()),s(t,null,{default:p((()=>[s(o,{type:"primary",icon:"Search",onClick:Y},{default:p((()=>a[10]||(a[10]=[h("搜索")]))),_:1}),a[12]||(a[12]=h()),s(o,{icon:"Refresh",onClick:Z},{default:p((()=>a[11]||(a[11]=[h("重置")]))),_:1})])),_:1})])),_:1},8,["model"]),[[_,G.value]]),a[37]||(a[37]=h()),s(w,{gutter:10,class:"mb8"},{default:p((()=>[s(i,{span:1.5},{default:p((()=>[g((v(),y(o,{type:"primary",plain:"",icon:"Plus",onClick:ee},{default:p((()=>a[15]||(a[15]=[h("新增")]))),_:1})),[[ue,["education:department:add"]]])])),_:1}),a[18]||(a[18]=h()),s(i,{span:1.5},{default:p((()=>[g((v(),y(o,{type:"success",plain:"",icon:"Edit",disabled:O.value,onClick:ae},{default:p((()=>a[16]||(a[16]=[h("修改")]))),_:1},8,["disabled"])),[[ue,["education:department:edit"]]])])),_:1}),a[19]||(a[19]=h()),s(i,{span:1.5},{default:p((()=>[g((v(),y(o,{type:"danger",plain:"",icon:"Delete",disabled:A.value,onClick:te},{default:p((()=>a[17]||(a[17]=[h("删除")]))),_:1},8,["disabled"])),[[ue,["education:department:remove"]]])])),_:1}),a[20]||(a[20]=h()),s(r,{showSearch:G.value,"onUpdate:showSearch":a[2]||(a[2]=e=>G.value=e),onQueryTable:W},null,8,["showSearch"])])),_:1}),a[38]||(a[38]=h()),g((v(),y(F,{data:Q.value,onSelectionChange:$},{default:p((()=>[s(x,{type:"selection",width:"55",align:"center"}),a[24]||(a[24]=h()),s(x,{label:"院系ID",align:"center",prop:"id",width:"80"}),a[25]||(a[25]=h()),s(x,{label:"院系名称",align:"center",prop:"name","show-overflow-tooltip":!0}),a[26]||(a[26]=h()),s(x,{label:"院系编码",align:"center",prop:"code","show-overflow-tooltip":!0}),a[27]||(a[27]=h()),s(x,{label:"描述",align:"center",prop:"description","show-overflow-tooltip":!0}),a[28]||(a[28]=h()),s(x,{label:"创建时间",align:"center",prop:"createTime",width:"180"}),a[29]||(a[29]=h()),s(x,{label:"操作",align:"center",width:"180","class-name":"small-padding fixed-width"},{default:p((e=>[g((v(),y(o,{type:"text",icon:"Edit",onClick:a=>ae(e.row)},{default:p((()=>a[21]||(a[21]=[h("修改")]))),_:2},1032,["onClick"])),[[ue,["education:department:edit"]]]),a[23]||(a[23]=h()),g((v(),y(o,{type:"text",icon:"Delete",onClick:a=>te(e.row)},{default:p((()=>a[22]||(a[22]=[h("删除")]))),_:2},1032,["onClick"])),[[ue,["education:department:remove"]]])])),_:1})])),_:1},8,["data"])),[[ie,B.value]]),a[39]||(a[39]=h()),g(s(K,{total:I.value,page:H.value.pageNum,"onUpdate:page":a[3]||(a[3]=e=>H.value.pageNum=e),limit:H.value.pageSize,"onUpdate:limit":a[4]||(a[4]=e=>H.value.pageSize=e),onPagination:W},null,8,["total","page","limit"]),[[_,I.value>0]]),a[40]||(a[40]=h()),s(oe,{title:R.value,modelValue:X.value,"onUpdate:modelValue":a[8]||(a[8]=e=>X.value=e),width:"600px","append-to-body":""},{footer:p((()=>[f("div",E,[s(o,{type:"primary",onClick:le},{default:p((()=>a[32]||(a[32]=[h("确 定")]))),_:1}),a[34]||(a[34]=h()),s(o,{onClick:ne},{default:p((()=>a[33]||(a[33]=[h("取 消")]))),_:1})])])),default:p((()=>[s(u,{ref_key:"departmentForm",ref:M,model:J.value,rules:L,"label-width":"100px"},{default:p((()=>[s(t,{label:"院系名称",prop:"name"},{default:p((()=>[s(l,{modelValue:J.value.name,"onUpdate:modelValue":a[5]||(a[5]=e=>J.value.name=e),placeholder:"请输入院系名称"},null,8,["modelValue"])])),_:1}),a[30]||(a[30]=h()),s(t,{label:"院系编码",prop:"code"},{default:p((()=>[s(l,{modelValue:J.value.code,"onUpdate:modelValue":a[6]||(a[6]=e=>J.value.code=e),placeholder:"请输入院系编码"},null,8,["modelValue"])])),_:1}),a[31]||(a[31]=h()),s(t,{label:"描述",prop:"description"},{default:p((()=>[s(l,{modelValue:J.value.description,"onUpdate:modelValue":a[7]||(a[7]=e=>J.value.description=e),type:"textarea",placeholder:"请输入院系描述"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"]),a[35]||(a[35]=h())])),_:1},8,["title","modelValue"])])),_:1})])}}};export{F as default};
