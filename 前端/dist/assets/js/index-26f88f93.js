import{s as e,_ as l}from"./index-1c6f2b30.js";import{r as a,M as t,a1 as u,f as s,l as o,m as n,E as i,z as r,q as d,D as p,u as c,X as m,F as v,W as f,A as y,y as h,C as b,a4 as g,ab as _}from"./vue-core-d6f028e5.js";import{Q as w,O as V,P as k,aa as x,ab as C,af as z,R as U,ai as T,aj as N,am as q,an as S,ao as j,ap as $,ak as B,a4 as P,aq as F,as as R,ae as A,au as D}from"./element-plus-33c96ec5.js";import"./icons-02de347c.js";import"./utils-80dc1c42.js";function E(l){return e({url:`/notice/${l}`,method:"get"})}const I={class:"app-container"},K={class:"card-header"},M={class:"right-container"},O={class:"dialog-footer"},Q={class:"notice-detail"},W={class:"notice-title"},X={class:"notice-info"},G={class:"notice-content"},H=l({__name:"index",setup(l){const H=[{label:"普通公告",value:0},{label:"重要公告",value:1},{label:"紧急公告",value:2}],J=[{label:"草稿",value:0},{label:"已发布",value:1},{label:"已下线",value:2}],L=a(),Y=a(!1),Z=a(!1),ee=a(!1),le=a(""),ae=a([]),te=a(0),ue=e=>({0:"普通公告",1:"重要公告",2:"紧急公告"}[e]||""),se=e=>({0:"草稿",1:"已发布",2:"已下线"}[e]||""),oe=t({queryParams:{pageNum:1,pageSize:10,title:void 0,type:void 0,status:void 0},form:{id:void 0,title:"",type:0,status:0,content:""},viewForm:{id:void 0,title:"",type:0,status:0,content:"",publisherName:"",publishTime:""},rules:{title:[{required:!0,message:"公告标题不能为空",trigger:"blur"},{max:100,message:"公告标题长度不能超过100个字符",trigger:"blur"}],type:[{required:!0,message:"公告类型不能为空",trigger:"change"}],content:[{required:!0,message:"公告内容不能为空",trigger:"blur"}]}}),{queryParams:ne,form:ie,viewForm:re,rules:de}=u(oe),pe=()=>{var l;Y.value=!0,(l=ne.value,e({url:"/notice/list",method:"get",params:l})).then(e=>{ae.value=e.data||[],te.value=e.total||0,Y.value=!1}).catch(()=>{Y.value=!1})},ce=()=>{ne.value={pageNum:1,pageSize:10,title:void 0,type:void 0,status:void 0},me()},me=()=>{ne.value.pageNum=1,pe()},ve=e=>{ne.value.pageSize=e,pe()},fe=e=>{ne.value.pageNum=e,pe()},ye=()=>{var e;null==(e=L.value)||e.resetFields(),ie.value={id:void 0,title:"",type:0,status:0,content:""}},he=()=>{Z.value=!1,ye()},be=()=>{ye(),le.value="添加公告",Z.value=!0},ge=()=>{var l;null==(l=L.value)||l.validate(l=>{l&&(ie.value.id?function(l){return e({url:"/notice",method:"put",data:l})}(ie.value).then(e=>{V.success("修改成功"),Z.value=!1,pe()}):function(l){return e({url:"/notice",method:"post",data:l})}(ie.value).then(e=>{V.success("新增成功"),Z.value=!1,pe()}))})},_e=l=>{k.confirm(`是否确认删除标题为"${l.title}"的公告?`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{var a;(a=l.id,e({url:`/notice/${a}`,method:"delete"})).then(()=>{V.success("删除成功"),pe()})}).catch(()=>{})},we=l=>{k.confirm(`是否确认发布标题为"${l.title}"的公告?`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{var a;(a=l.id,e({url:`/notice/publish/${a}`,method:"put"})).then(()=>{V.success("发布成功"),pe()})}).catch(()=>{})},Ve=l=>{k.confirm(`是否确认下线标题为"${l.title}"的公告?`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{var a;(a=l.id,e({url:`/notice/offline/${a}`,method:"put"})).then(()=>{V.success("下线成功"),pe()})}).catch(()=>{})};return s(()=>{pe()}),(e,l)=>{const a=x,t=C,u=A,s=z,V=g("Search"),k=U,oe=T,pe=g("Refresh"),ke=N,xe=g("Plus"),Ce=q,ze=S,Ue=j,Te=$,Ne=B,qe=D,Se=P,je=F,$e=_("hasPermi"),Be=R;return o(),n("div",I,[i(Ne,null,{header:r(()=>[d("div",K,[l[19]||(l[19]=d("span",{class:"card-title"},"公告管理",-1)),l[20]||(l[20]=p()),d("div",M,[i(ke,{inline:!0,model:c(ne),class:"search-form"},{default:r(()=>[i(t,{label:"标题"},{default:r(()=>[i(a,{modelValue:c(ne).title,"onUpdate:modelValue":l[0]||(l[0]=e=>c(ne).title=e),placeholder:"请输入公告标题",clearable:"",onKeyup:m(me,["enter"])},null,8,["modelValue"])]),_:1}),l[14]||(l[14]=p()),i(t,{label:"类型"},{default:r(()=>[i(s,{modelValue:c(ne).type,"onUpdate:modelValue":l[1]||(l[1]=e=>c(ne).type=e),placeholder:"公告类型",clearable:""},{default:r(()=>[(o(),n(v,null,f(H,e=>i(u,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),l[15]||(l[15]=p()),i(t,{label:"状态"},{default:r(()=>[i(s,{modelValue:c(ne).status,"onUpdate:modelValue":l[2]||(l[2]=e=>c(ne).status=e),placeholder:"公告状态",clearable:""},{default:r(()=>[(o(),n(v,null,f(J,e=>i(u,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),l[16]||(l[16]=p()),i(t,null,{default:r(()=>[i(oe,{type:"primary",onClick:me},{default:r(()=>[i(k,null,{default:r(()=>[i(V)]),_:1}),l[11]||(l[11]=p(" 搜索\r\n                "))]),_:1}),l[13]||(l[13]=p()),i(oe,{onClick:ce},{default:r(()=>[i(k,null,{default:r(()=>[i(pe)]),_:1}),l[12]||(l[12]=p(" 重置\r\n                "))]),_:1})]),_:1})]),_:1},8,["model"]),l[18]||(l[18]=p()),y((o(),h(oe,{type:"primary",plain:"",onClick:be},{default:r(()=>[i(k,null,{default:r(()=>[i(xe)]),_:1}),l[17]||(l[17]=p(" 新增\r\n            "))]),_:1})),[[$e,["system:notice:add"]]])])])]),default:r(()=>[l[37]||(l[37]=p()),y((o(),h(Ue,{data:ae.value,border:"",stripe:""},{default:r(()=>[i(Ce,{type:"selection",width:"55",align:"center"}),l[30]||(l[30]=p()),i(Ce,{label:"序号",width:"55",align:"center",type:"index"}),l[31]||(l[31]=p()),i(Ce,{label:"标题",prop:"title","show-overflow-tooltip":!0}),l[32]||(l[32]=p()),i(Ce,{label:"类型",prop:"type",width:"100",align:"center"},{default:r(e=>[i(ze,{type:0===e.row.type?"info":1===e.row.type?"warning":"danger"},{default:r(()=>[p(w(ue(e.row.type)),1)]),_:2},1032,["type"])]),_:1}),l[33]||(l[33]=p()),i(Ce,{label:"状态",prop:"status",width:"100",align:"center"},{default:r(e=>[i(ze,{type:0===e.row.status?"info":1===e.row.status?"success":""},{default:r(()=>[p(w(se(e.row.status)),1)]),_:2},1032,["type"])]),_:1}),l[34]||(l[34]=p()),i(Ce,{label:"发布人",prop:"publisherName",width:"100",align:"center"}),l[35]||(l[35]=p()),i(Ce,{label:"发布时间",prop:"publishTime",width:"160",align:"center"},{default:r(e=>[d("span",null,w(e.row.publishTime||"-"),1)]),_:1}),l[36]||(l[36]=p()),i(Ce,{label:"操作",align:"center",width:"200"},{default:r(e=>[y((o(),h(oe,{size:"small",type:"primary",text:"",onClick:l=>{E(e.row.id).then(e=>{re.value=e.data,ee.value=!0})}},{default:r(()=>l[21]||(l[21]=[p("查看")])),_:2},1032,["onClick"])),[[$e,["system:notice:query"]]]),l[26]||(l[26]=p()),1!==e.row.status?y((o(),h(oe,{key:0,size:"small",type:"success",text:"",onClick:l=>{return a=e.row,ye(),void E(a.id).then(e=>{ie.value=e.data,le.value="修改公告",Z.value=!0});var a}},{default:r(()=>l[22]||(l[22]=[p("修改")])),_:2},1032,["onClick"])),[[$e,["system:notice:edit"]]]):b("",!0),l[27]||(l[27]=p()),0===e.row.status?y((o(),h(oe,{key:1,size:"small",type:"success",text:"",onClick:l=>we(e.row)},{default:r(()=>l[23]||(l[23]=[p("发布")])),_:2},1032,["onClick"])),[[$e,["system:notice:edit"]]]):b("",!0),l[28]||(l[28]=p()),1===e.row.status?y((o(),h(oe,{key:2,size:"small",type:"warning",text:"",onClick:l=>Ve(e.row)},{default:r(()=>l[24]||(l[24]=[p("下线")])),_:2},1032,["onClick"])),[[$e,["system:notice:edit"]]]):b("",!0),l[29]||(l[29]=p()),y((o(),h(oe,{size:"small",type:"danger",text:"",onClick:l=>_e(e.row)},{default:r(()=>l[25]||(l[25]=[p("删除")])),_:2},1032,["onClick"])),[[$e,["system:notice:remove"]]])]),_:1})]),_:1},8,["data"])),[[Be,Y.value]]),l[38]||(l[38]=p()),i(Te,{"current-page":c(ne).pageNum,"onUpdate:currentPage":l[3]||(l[3]=e=>c(ne).pageNum=e),"page-size":c(ne).pageSize,"onUpdate:pageSize":l[4]||(l[4]=e=>c(ne).pageSize=e),"page-sizes":[10,20,50,100],total:te.value,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:ve,onCurrentChange:fe},null,8,["current-page","page-size","total"])]),_:1}),l[51]||(l[51]=p()),i(je,{title:le.value,modelValue:Z.value,"onUpdate:modelValue":l[9]||(l[9]=e=>Z.value=e),width:"60%","append-to-body":"","close-on-click-modal":!1},{footer:r(()=>[d("div",O,[i(oe,{type:"primary",onClick:ge},{default:r(()=>l[42]||(l[42]=[p("确 定")])),_:1}),l[44]||(l[44]=p()),i(oe,{onClick:he},{default:r(()=>l[43]||(l[43]=[p("取 消")])),_:1})])]),default:r(()=>[i(ke,{ref_key:"noticeFormRef",ref:L,model:c(ie),rules:c(de),"label-width":"100px"},{default:r(()=>[i(t,{label:"公告标题",prop:"title"},{default:r(()=>[i(a,{modelValue:c(ie).title,"onUpdate:modelValue":l[5]||(l[5]=e=>c(ie).title=e),placeholder:"请输入公告标题"},null,8,["modelValue"])]),_:1}),l[39]||(l[39]=p()),i(t,{label:"公告类型",prop:"type"},{default:r(()=>[i(s,{modelValue:c(ie).type,"onUpdate:modelValue":l[6]||(l[6]=e=>c(ie).type=e),placeholder:"请选择公告类型",style:{width:"100%"}},{default:r(()=>[(o(),n(v,null,f(H,e=>i(u,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),l[40]||(l[40]=p()),i(t,{label:"公告内容",prop:"content"},{default:r(()=>[i(a,{modelValue:c(ie).content,"onUpdate:modelValue":l[7]||(l[7]=e=>c(ie).content=e),type:"textarea",rows:10,placeholder:"请输入公告内容"},null,8,["modelValue"])]),_:1}),l[41]||(l[41]=p()),i(t,{label:"公告状态",prop:"status"},{default:r(()=>[i(Se,{modelValue:c(ie).status,"onUpdate:modelValue":l[8]||(l[8]=e=>c(ie).status=e)},{default:r(()=>[(o(),n(v,null,f(J,e=>i(qe,{key:e.value,label:e.value},{default:r(()=>[p(w(e.label),1)]),_:2},1032,["label"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"]),l[45]||(l[45]=p())]),_:1},8,["title","modelValue"]),l[52]||(l[52]=p()),i(je,{title:"公告详情",modelValue:ee.value,"onUpdate:modelValue":l[10]||(l[10]=e=>ee.value=e),width:"60%","append-to-body":""},{default:r(()=>[d("div",Q,[d("div",W,w(c(re).title),1),l[49]||(l[49]=p()),d("div",X,[d("span",null,"\r\n            类型："+w(ue(c(re).type)),1),l[46]||(l[46]=p()),d("span",null,"\r\n            发布人："+w(c(re).publisherName),1),l[47]||(l[47]=p()),d("span",null,"\r\n            发布时间："+w(c(re).publishTime||"-"),1),l[48]||(l[48]=p()),d("span",null,"\r\n            状态："+w(se(c(re).status)),1)]),l[50]||(l[50]=p()),d("div",G,w(c(re).content),1)])]),_:1},8,["modelValue"])])}}},[["__scopeId","data-v-27725067"]]);export{H as default};
