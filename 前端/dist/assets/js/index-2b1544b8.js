var e=(e,a,l)=>new Promise(((r,t)=>{var o=e=>{try{n(l.next(e))}catch(a){t(a)}},s=e=>{try{n(l.throw(e))}catch(a){t(a)}},n=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);n((l=l.apply(e,a)).next())}));import{_ as a,u as l,m as r}from"./index-22381d63.js";import{r as t,M as o,f as s,m as n,E as u,z as i,D as d,ah as c,ab as p,l as m,u as f,q as h,A as v,y as g}from"./vue-core-9ee4ed8b.js";import{M as w,R as y,T as _}from"./icons-c547ea56.js";import{O as b,a9 as k,Q as C,ab as I,ac as z,R as N,aj as x,ak as j,an as S,ao as V,ap as q,aq as U,as as P}from"./element-plus-e2333c73.js";import"./utils-e59f4bae.js";const O={class:"teacher-courses-container"},R={class:"card-header"},T={class:"header-buttons"},A={class:"pagination-container"},D=a({__name:"index",setup(a){const D=c(),M=l(),E=t(null),F=t(!1),G=t(!1),Q=t([]),B=t(0),H=o({courseName:"",semester:"",pageNum:1,pageSize:10});function J(){E.value?(F.value=!0,r(E.value,H).then((e=>{Q.value=e.data.list||[],B.value=e.data.total||0})).catch((e=>{b.error("获取教师课程列表失败")})).finally((()=>{F.value=!1}))):b.warning("教师ID不存在，无法获取课程列表")}function K(){H.pageNum=1,J()}function L(){H.courseName="",H.semester="",K()}function W(e){H.pageSize=e,J()}function X(e){H.pageNum=e,J()}function Y(){b.success("导出功能待实现")}return s((()=>e(this,null,(function*(){yield function(){return e(this,null,(function*(){const e=yield M.getUserInfo();e&&e.teacherId?E.value=e.teacherId:b.warning("获取教师信息失败，请重新登录")}))}(),J()})))),(e,a)=>{const l=I,r=z,t=N,o=x,s=j,c=k,b=S,M=V,E=q,J=U,Z=p("hasPerms"),$=P;return m(),n("div",O,[u(c,{class:"search-card",shadow:"hover"},{default:i((()=>[u(s,{model:H,ref:"queryForm",inline:!0},{default:i((()=>[u(r,{label:"课程名称",prop:"courseName"},{default:i((()=>[u(l,{modelValue:H.courseName,"onUpdate:modelValue":a[0]||(a[0]=e=>H.courseName=e),placeholder:"请输入课程名称",clearable:""},null,8,["modelValue"])])),_:1}),a[7]||(a[7]=d()),u(r,{label:"学期",prop:"semester"},{default:i((()=>[u(l,{modelValue:H.semester,"onUpdate:modelValue":a[1]||(a[1]=e=>H.semester=e),placeholder:"请输入学期",clearable:""},null,8,["modelValue"])])),_:1}),a[8]||(a[8]=d()),u(r,null,{default:i((()=>[u(o,{type:"primary",onClick:K},{default:i((()=>[u(t,null,{default:i((()=>[u(f(w))])),_:1}),a[4]||(a[4]=d("查询\r\n          "))])),_:1}),a[6]||(a[6]=d()),u(o,{onClick:L},{default:i((()=>[u(t,null,{default:i((()=>[u(f(y))])),_:1}),a[5]||(a[5]=d("重置\r\n          "))])),_:1})])),_:1})])),_:1},8,["model"])])),_:1}),a[29]||(a[29]=d()),u(c,{class:"table-card",shadow:"hover"},{header:i((()=>[h("div",R,[a[10]||(a[10]=h("span",{class:"header-title"},"我的授课列表",-1)),a[11]||(a[11]=d()),h("div",T,[v((m(),g(o,{type:"primary",onClick:Y,loading:G.value},{default:i((()=>[u(t,null,{default:i((()=>[u(f(_))])),_:1}),a[9]||(a[9]=d("导出\r\n            "))])),_:1},8,["loading"])),[[Z,["course:teaching:list"]]])])])])),default:i((()=>[a[27]||(a[27]=d()),v((m(),g(E,{data:Q.value,stripe:"",border:"",style:{width:"100%"},"header-cell-style":{background:"#f5f7fa",color:"#606266"}},{default:i((()=>[u(b,{type:"index",label:"#",width:"60"}),a[17]||(a[17]=d()),u(b,{prop:"courseName",label:"课程名称","min-width":"180","show-overflow-tooltip":""}),a[18]||(a[18]=d()),u(b,{prop:"courseCode",label:"课程编码",width:"120","show-overflow-tooltip":""}),a[19]||(a[19]=d()),u(b,{prop:"credit",label:"学分",width:"80",align:"center"}),a[20]||(a[20]=d()),u(b,{prop:"semester",label:"学期",width:"120","show-overflow-tooltip":""}),a[21]||(a[21]=d()),u(b,{prop:"classTime",label:"上课时间",width:"150","show-overflow-tooltip":""}),a[22]||(a[22]=d()),u(b,{prop:"location",label:"上课地点",width:"150","show-overflow-tooltip":""}),a[23]||(a[23]=d()),u(b,{prop:"selectedCount",label:"选课人数",width:"100",align:"center"}),a[24]||(a[24]=d()),u(b,{prop:"capacity",label:"课程容量",width:"100",align:"center"}),a[25]||(a[25]=d()),u(b,{label:"状态",width:"100",align:"center"},{default:i((e=>[u(M,{type:0===e.row.status?"success":"info"},{default:i((()=>[d(C(0===e.row.status?"正常":"已结课"),1)])),_:2},1032,["type"])])),_:1}),a[26]||(a[26]=d()),u(b,{label:"操作",width:"220",fixed:"right"},{default:i((e=>[u(o,{type:"primary",link:"",onClick:a=>{return l=e.row,void D.push({name:"TeacherCourseStudents",params:{id:l.id,courseId:l.courseId}});var l}},{default:i((()=>a[12]||(a[12]=[d("\r\n              学生名单\r\n            ")]))),_:2},1032,["onClick"]),a[15]||(a[15]=d()),u(o,{type:"primary",link:"",onClick:a=>{return l=e.row,void D.push({name:"GradeInput",query:{courseId:l.courseId,courseOfferingId:l.id}});var l}},{default:i((()=>a[13]||(a[13]=[d("\r\n              成绩录入\r\n            ")]))),_:2},1032,["onClick"]),a[16]||(a[16]=d()),u(o,{type:"primary",link:"",onClick:a=>{return l=e.row,void D.push({name:"AttendanceRecord",query:{courseId:l.courseId,courseOfferingId:l.id}});var l}},{default:i((()=>a[14]||(a[14]=[d("\r\n              考勤管理\r\n            ")]))),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])),[[$,F.value]]),a[28]||(a[28]=d()),h("div",A,[u(J,{"current-page":H.pageNum,"onUpdate:currentPage":a[2]||(a[2]=e=>H.pageNum=e),"page-size":H.pageSize,"onUpdate:pageSize":a[3]||(a[3]=e=>H.pageSize=e),"page-sizes":[10,20,50,100],background:!0,layout:"total, sizes, prev, pager, next, jumper",total:B.value,onSizeChange:W,onCurrentChange:X},null,8,["current-page","page-size","total"])])])),_:1})])}}},[["__scopeId","data-v-2b5072f6"]]);export{D as default};
