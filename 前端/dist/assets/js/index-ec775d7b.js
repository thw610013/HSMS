import{s as e,_ as l}from"./index-1c6f2b30.js";import{r as a,M as t,a1 as u,f as o,l as r,m as n,E as d,z as i,q as s,D as p,u as c,X as m,F as v,W as f,A as h,y as g,C as y,a4 as _}from"./vue-core-d6f028e5.js";import{Q as b,O as w,P as V,aa as k,ab as x,af as z,R as C,ai as U,aj as D,am as S,U as j,an as q,ao as N,ap as P,ak as $,av as B,aq as T,as as F,ae as R}from"./element-plus-33c96ec5.js";import"./icons-02de347c.js";import"./utils-80dc1c42.js";function A(l){return e({url:"/todo/list",method:"get",params:l})}function E(){return e({url:"/todo/my",method:"get"})}const I={class:"app-container"},K={class:"card-header"},M={class:"right-container"},O={class:"dialog-footer"},Q=l({__name:"index",setup(l){const Q=[{label:"未完成",value:0},{label:"已完成",value:1}],W=[{label:"低",value:0},{label:"中",value:1},{label:"高",value:2}],X=a(),G=a(!1),H=a(!1),J=a(""),L=a([]),Y=a(0),Z=a(!1),ee=t({queryParams:{pageNum:1,pageSize:10,title:void 0,status:void 0,priority:void 0},form:{id:void 0,title:"",content:"",status:0,priority:1,dueDate:null},rules:{title:[{required:!0,message:"待办标题不能为空",trigger:"blur"},{max:100,message:"待办标题长度不能超过100个字符",trigger:"blur"}],priority:[{required:!0,message:"优先级不能为空",trigger:"change"}]}}),{queryParams:le,form:ae,rules:te}=u(ee),ue=()=>{G.value=!0;(Z.value?A:E)(le.value).then(e=>{L.value=e.data||[],Y.value=e.total||0,G.value=!1}).catch(()=>{G.value=!1})},oe=()=>{le.value={pageNum:1,pageSize:10,title:void 0,status:void 0,priority:void 0},re()},re=()=>{le.value.pageNum=1,ue()},ne=e=>{le.value.pageSize=e,ue()},de=e=>{le.value.pageNum=e,ue()},ie=()=>{var e;null==(e=X.value)||e.resetFields(),ae.value={id:void 0,title:"",content:"",status:0,priority:1,dueDate:null}},se=()=>{H.value=!1,ie()},pe=()=>{ie(),J.value="添加待办事项",H.value=!0},ce=l=>{var a;ie(),(a=l.id,e({url:`/todo/${a}`,method:"get"})).then(e=>{ae.value=e.data,J.value="修改待办事项",H.value=!0})},me=()=>{var l;null==(l=X.value)||l.validate(l=>{l&&(ae.value.id?function(l){return e({url:"/todo",method:"put",data:l})}(ae.value).then(e=>{w.success("修改成功"),H.value=!1,ue()}):function(l){return e({url:"/todo",method:"post",data:l})}(ae.value).then(e=>{w.success("新增成功"),H.value=!1,ue()}))})},ve=l=>{V.confirm(`是否确认删除标题为"${l.title}"的待办事项?`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{var a;(a=l.id,e({url:`/todo/${a}`,method:"delete"})).then(()=>{w.success("删除成功"),ue()})}).catch(()=>{})},fe=l=>{V.confirm(`是否确认完成标题为"${l.title}"的待办事项?`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{var a;(a=l.id,e({url:`/todo/complete/${a}`,method:"put"})).then(()=>{w.success("操作成功"),ue()})}).catch(()=>{})};return o(()=>{ue()}),(e,l)=>{const a=k,t=x,u=R,o=z,w=_("Search"),V=C,A=U,E=_("Refresh"),Z=D,ee=_("Plus"),ue=S,ie=j,he=q,ge=N,ye=P,_e=$,be=B,we=T,Ve=F;return r(),n("div",I,[d(_e,null,{header:i(()=>[s("div",K,[l[18]||(l[18]=s("span",{class:"card-title"},"待办事项",-1)),l[19]||(l[19]=p()),s("div",M,[d(Z,{inline:!0,model:c(le),class:"search-form"},{default:i(()=>[d(t,{label:"标题"},{default:i(()=>[d(a,{modelValue:c(le).title,"onUpdate:modelValue":l[0]||(l[0]=e=>c(le).title=e),placeholder:"请输入待办标题",clearable:"",onKeyup:m(re,["enter"])},null,8,["modelValue"])]),_:1}),l[13]||(l[13]=p()),d(t,{label:"状态"},{default:i(()=>[d(o,{modelValue:c(le).status,"onUpdate:modelValue":l[1]||(l[1]=e=>c(le).status=e),placeholder:"待办状态",clearable:""},{default:i(()=>[(r(),n(v,null,f(Q,e=>d(u,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),l[14]||(l[14]=p()),d(t,{label:"优先级"},{default:i(()=>[d(o,{modelValue:c(le).priority,"onUpdate:modelValue":l[2]||(l[2]=e=>c(le).priority=e),placeholder:"优先级",clearable:""},{default:i(()=>[(r(),n(v,null,f(W,e=>d(u,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),l[15]||(l[15]=p()),d(t,null,{default:i(()=>[d(A,{type:"primary",onClick:re},{default:i(()=>[d(V,null,{default:i(()=>[d(w)]),_:1}),l[10]||(l[10]=p(" 搜索\n                "))]),_:1}),l[12]||(l[12]=p()),d(A,{onClick:oe},{default:i(()=>[d(V,null,{default:i(()=>[d(E)]),_:1}),l[11]||(l[11]=p(" 重置\n                "))]),_:1})]),_:1})]),_:1},8,["model"]),l[17]||(l[17]=p()),d(A,{type:"primary",plain:"",onClick:pe},{default:i(()=>[d(V,null,{default:i(()=>[d(ee)]),_:1}),l[16]||(l[16]=p(" 新增\n            "))]),_:1})])])]),default:i(()=>[l[32]||(l[32]=p()),h((r(),g(ge,{data:L.value,border:"",stripe:""},{default:i(()=>[d(ue,{type:"selection",width:"55",align:"center"}),l[25]||(l[25]=p()),d(ue,{label:"序号",width:"55",align:"center",type:"index"}),l[26]||(l[26]=p()),d(ue,{label:"标题",prop:"title","show-overflow-tooltip":"",width:"200"},{default:i(e=>[d(ie,{content:e.row.title,placement:"top","show-after":300},{default:i(()=>[s("span",null,b(e.row.title),1)]),_:2},1032,["content"])]),_:1}),l[27]||(l[27]=p()),d(ue,{label:"内容",prop:"content","show-overflow-tooltip":"","min-width":"180"},{default:i(e=>[d(ie,{content:e.row.content,placement:"top","show-after":300},{default:i(()=>[s("span",null,b(e.row.content),1)]),_:2},1032,["content"])]),_:1}),l[28]||(l[28]=p()),d(ue,{label:"状态",prop:"status",width:"80",align:"center"},{default:i(e=>[d(he,{type:0===e.row.status?"warning":"success"},{default:i(()=>{return[p(b((l=e.row.status,{0:"未完成",1:"已完成"}[l]||"")),1)];var l}),_:2},1032,["type"])]),_:1}),l[29]||(l[29]=p()),d(ue,{label:"优先级",prop:"priority",width:"80",align:"center"},{default:i(e=>[d(he,{type:0===e.row.priority?"info":1===e.row.priority?"warning":"danger"},{default:i(()=>{return[p(b((l=e.row.priority,{0:"低",1:"中",2:"高"}[l]||"")),1)];var l}),_:2},1032,["type"])]),_:1}),l[30]||(l[30]=p()),d(ue,{label:"到期时间",prop:"dueDate",width:"160",align:"center"},{default:i(e=>[s("span",null,b(e.row.dueDate||"-"),1)]),_:1}),l[31]||(l[31]=p()),d(ue,{label:"操作",align:"center",width:"200"},{default:i(e=>[d(A,{size:"small",type:"primary",text:"",onClick:l=>ce(e.row)},{default:i(()=>l[20]||(l[20]=[p("编辑")])),_:2},1032,["onClick"]),l[23]||(l[23]=p()),0===e.row.status?(r(),g(A,{key:0,size:"small",type:"success",text:"",onClick:l=>fe(e.row)},{default:i(()=>l[21]||(l[21]=[p("完成")])),_:2},1032,["onClick"])):y("",!0),l[24]||(l[24]=p()),d(A,{size:"small",type:"danger",text:"",onClick:l=>ve(e.row)},{default:i(()=>l[22]||(l[22]=[p("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[Ve,G.value]]),l[33]||(l[33]=p()),d(ye,{"current-page":c(le).pageNum,"onUpdate:currentPage":l[3]||(l[3]=e=>c(le).pageNum=e),"page-size":c(le).pageSize,"onUpdate:pageSize":l[4]||(l[4]=e=>c(le).pageSize=e),"page-sizes":[10,20,50,100],total:Y.value,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:ne,onCurrentChange:de},null,8,["current-page","page-size","total"])]),_:1}),l[41]||(l[41]=p()),d(we,{title:J.value,modelValue:H.value,"onUpdate:modelValue":l[9]||(l[9]=e=>H.value=e),width:"500px","append-to-body":"","close-on-click-modal":!1},{footer:i(()=>[s("div",O,[d(A,{type:"primary",onClick:me},{default:i(()=>l[37]||(l[37]=[p("确 定")])),_:1}),l[39]||(l[39]=p()),d(A,{onClick:se},{default:i(()=>l[38]||(l[38]=[p("取 消")])),_:1})])]),default:i(()=>[d(Z,{ref_key:"todoFormRef",ref:X,model:c(ae),rules:c(te),"label-width":"80px"},{default:i(()=>[d(t,{label:"标题",prop:"title"},{default:i(()=>[d(a,{modelValue:c(ae).title,"onUpdate:modelValue":l[5]||(l[5]=e=>c(ae).title=e),placeholder:"请输入待办标题"},null,8,["modelValue"])]),_:1}),l[34]||(l[34]=p()),d(t,{label:"内容",prop:"content"},{default:i(()=>[d(a,{modelValue:c(ae).content,"onUpdate:modelValue":l[6]||(l[6]=e=>c(ae).content=e),type:"textarea",rows:4,placeholder:"请输入待办内容"},null,8,["modelValue"])]),_:1}),l[35]||(l[35]=p()),d(t,{label:"优先级",prop:"priority"},{default:i(()=>[d(o,{modelValue:c(ae).priority,"onUpdate:modelValue":l[7]||(l[7]=e=>c(ae).priority=e),placeholder:"请选择优先级",style:{width:"100%"}},{default:i(()=>[(r(),n(v,null,f(W,e=>d(u,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),l[36]||(l[36]=p()),d(t,{label:"到期时间",prop:"dueDate"},{default:i(()=>[d(be,{modelValue:c(ae).dueDate,"onUpdate:modelValue":l[8]||(l[8]=e=>c(ae).dueDate=e),type:"datetime",placeholder:"请选择到期时间",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"]),l[40]||(l[40]=p())]),_:1},8,["title","modelValue"])])}}},[["__scopeId","data-v-bc44adf9"]]);export{Q as default};
