var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,o=(a,t,l)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[t]=l,r=(e,a)=>{for(var t in a||(a={}))s.call(a,t)&&o(e,t,a[t]);if(l)for(var t of l(a))u.call(a,t)&&o(e,t,a[t]);return e},d=(e,l)=>a(e,t(l));import{_ as c,u as i,b as n,c as v}from"./index-22381d63.js";import{_ as p}from"./index-50714a02.js";import{_ as m}from"./index-473e483c.js";import{r as f,f as b,m as h,E as _,z as g,D as w,l as y,q as C,A as N,G as j,X as V,F as x,W as O,y as D}from"./vue-core-9ee4ed8b.js";import{O as S,a9 as T,al as k,Q as U,ab as z,ac as P,ag as I,aj as H,ak as M,ah as q,ad as A,an as E,ao as F,ap as K,az as Q,aA as G,as as R,af as W}from"./element-plus-e2333c73.js";import"./icons-c547ea56.js";import"./utils-e59f4bae.js";const X={class:"app-container"},B={class:"statistic-number"},J={class:"statistic-number"},L={class:"statistic-number"},Y={class:"statistic-number"},Z=c({__name:"index",setup(e){const a=i(),t=f(a.userId),l=f(!1),s=f(!0),u=f(0),o=f([]),c=f(!1),Z=f({}),$=f([{value:"2024-2025-1",label:"2024-2025学年第一学期"},{value:"2024-2025-2",label:"2024-2025学年第二学期"},{value:"2023-2024-1",label:"2023-2024学年第一学期"},{value:"2023-2024-2",label:"2023-2024学年第二学期"}]),ee=f({total:0,current:0,totalCredits:0,totalHours:0}),ae=f({pageNum:1,pageSize:10,courseName:void 0,courseCode:void 0,semester:void 0});function te(){l.value=!0,n(t.value,ae.value).then((e=>{e&&200===e.code&&e.data?(o.value=e.data.rows||e.data.list||[],u.value=parseInt(e.data.total||0),o.value=o.value.map((e=>d(r({},e),{credits:e.credit||0,courseDuration:e.hours||0,courseTime:e.classTime||"",status:void 0!==e.status?e.status:0}))),function(){const e="2023-2024-1";ee.value.total=o.value.length,ee.value.current=o.value.filter((a=>a.semester===e)).length,ee.value.totalCredits=o.value.reduce(((e,a)=>e+(a.credits||a.credit||0)),0),ee.value.totalHours=o.value.reduce(((e,a)=>e+(a.courseDuration||a.hours||0)),0)}()):(S.error("获取课程列表失败"),o.value=[],u.value=0),l.value=!1})).catch((e=>{S.error("获取课程列表失败: "+(e.message||"未知错误")),o.value=[],u.value=0,l.value=!1}))}function le(){ae.value.pageNum=1,te()}function se(){ae.value={pageNum:1,pageSize:10,courseName:void 0,courseCode:void 0,semester:void 0},le()}return b((()=>{te()})),(e,a)=>{const t=z,i=P,n=W,f=I,b=H,ue=M,oe=m,re=q,de=T,ce=A,ie=E,ne=F,ve=K,pe=p,me=Q,fe=G,be=k,he=R;return y(),h("div",X,[_(de,{class:"box-card"},{header:g((()=>a[7]||(a[7]=[C("div",{class:"card-header"},[C("span",null,"我的课程")],-1)]))),default:g((()=>[a[35]||(a[35]=w()),N(_(ue,{model:ae.value,ref:"queryForm",inline:!0},{default:g((()=>[_(i,{label:"课程名称",prop:"courseName"},{default:g((()=>[_(t,{modelValue:ae.value.courseName,"onUpdate:modelValue":a[0]||(a[0]=e=>ae.value.courseName=e),placeholder:"请输入课程名称",clearable:"",onKeyup:V(le,["enter"])},null,8,["modelValue"])])),_:1}),a[11]||(a[11]=w()),_(i,{label:"课程编码",prop:"courseCode"},{default:g((()=>[_(t,{modelValue:ae.value.courseCode,"onUpdate:modelValue":a[1]||(a[1]=e=>ae.value.courseCode=e),placeholder:"请输入课程编码",clearable:"",onKeyup:V(le,["enter"])},null,8,["modelValue"])])),_:1}),a[12]||(a[12]=w()),_(i,{label:"学期",prop:"semester"},{default:g((()=>[_(f,{modelValue:ae.value.semester,"onUpdate:modelValue":a[2]||(a[2]=e=>ae.value.semester=e),placeholder:"请选择学期",clearable:""},{default:g((()=>[(y(!0),h(x,null,O($.value,(e=>(y(),D(n,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),a[13]||(a[13]=w()),_(i,null,{default:g((()=>[_(b,{type:"primary",icon:"Search",onClick:le},{default:g((()=>a[8]||(a[8]=[w("搜索")]))),_:1}),a[10]||(a[10]=w()),_(b,{icon:"Refresh",onClick:se},{default:g((()=>a[9]||(a[9]=[w("重置")]))),_:1})])),_:1})])),_:1},8,["model"]),[[j,s.value]]),a[36]||(a[36]=w()),_(re,{gutter:10,class:"mb8"},{default:g((()=>[_(oe,{showSearch:s.value,"onUpdate:showSearch":a[3]||(a[3]=e=>s.value=e),onQueryTable:te},null,8,["showSearch"])])),_:1}),a[37]||(a[37]=w()),_(re,{gutter:20,class:"mb20"},{default:g((()=>[_(ce,{span:6},{default:g((()=>[_(de,{shadow:"hover",class:"statistic-card"},{default:g((()=>[a[14]||(a[14]=C("div",{class:"statistic-title"},"已选课程总数",-1)),a[15]||(a[15]=w()),C("div",B,U(ee.value.total),1)])),_:1})])),_:1}),a[22]||(a[22]=w()),_(ce,{span:6},{default:g((()=>[_(de,{shadow:"hover",class:"statistic-card"},{default:g((()=>[a[16]||(a[16]=C("div",{class:"statistic-title"},"本学期课程",-1)),a[17]||(a[17]=w()),C("div",J,U(ee.value.current),1)])),_:1})])),_:1}),a[23]||(a[23]=w()),_(ce,{span:6},{default:g((()=>[_(de,{shadow:"hover",class:"statistic-card"},{default:g((()=>[a[18]||(a[18]=C("div",{class:"statistic-title"},"学分总数",-1)),a[19]||(a[19]=w()),C("div",L,U(ee.value.totalCredits),1)])),_:1})])),_:1}),a[24]||(a[24]=w()),_(ce,{span:6},{default:g((()=>[_(de,{shadow:"hover",class:"statistic-card"},{default:g((()=>[a[20]||(a[20]=C("div",{class:"statistic-title"},"课时总数",-1)),a[21]||(a[21]=w()),C("div",Y,U(ee.value.totalHours),1)])),_:1})])),_:1})])),_:1}),a[38]||(a[38]=w()),N((y(),D(ve,{data:o.value},{default:g((()=>[_(ie,{label:"课程名称",align:"center",prop:"courseName","min-width":"120","show-overflow-tooltip":!0}),a[26]||(a[26]=w()),_(ie,{label:"课程编码",align:"center",prop:"courseCode",width:"120"}),a[27]||(a[27]=w()),_(ie,{label:"学分",align:"center",prop:"credits",width:"80"}),a[28]||(a[28]=w()),_(ie,{label:"课时",align:"center",prop:"courseDuration",width:"80"}),a[29]||(a[29]=w()),_(ie,{label:"授课教师",align:"center",prop:"teacherName",width:"100"}),a[30]||(a[30]=w()),_(ie,{label:"上课地点",align:"center",prop:"location",width:"120","show-overflow-tooltip":!0}),a[31]||(a[31]=w()),_(ie,{label:"上课时间",align:"center",prop:"courseTime","min-width":"120","show-overflow-tooltip":!0}),a[32]||(a[32]=w()),_(ie,{label:"学期",align:"center",prop:"semester",width:"100"}),a[33]||(a[33]=w()),_(ie,{label:"状态",align:"center",prop:"status",width:"100"},{default:g((e=>[_(ne,{type:1===e.row.status?"success":0===e.row.status?"info":"danger"},{default:g((()=>[w(U(1===e.row.status?"进行中":0===e.row.status?"未开始":"已结束"),1)])),_:2},1032,["type"])])),_:1}),a[34]||(a[34]=w()),_(ie,{label:"操作",align:"center",width:"150","class-name":"small-padding fixed-width"},{default:g((e=>[_(b,{type:"primary",link:"",icon:"View",onClick:a=>{return t=e.row,c.value=!0,void v(t.courseId).then((e=>{e&&200===e.code&&e.data?Z.value=d(r({},e.data),{courseName:e.data.name||e.data.courseName||"",courseCode:e.data.code||e.data.courseCode||"",credits:e.data.credit||e.data.credits||0,courseDuration:e.data.hours||e.data.courseDuration||0,teacherName:e.data.teacherName||"",teacherContact:e.data.teacherContact||"暂无",location:e.data.location||"",courseTime:e.data.classTime||"",semester:e.data.semester||"",status:void 0!==e.data.status?e.data.status:0,statusText:e.data.statusDesc||(1===e.data.status?"进行中":0===e.data.status?"未开始":2===e.data.status?"已结束":"未知状态"),description:e.data.description||"暂无描述",assessmentMethod:e.data.assessmentMethod||"暂无信息",departmentName:e.data.departmentName||"",capacity:e.data.capacity||0,selectedCount:e.data.selectedCount||0}):(S.error("获取课程详情失败"),Z.value={})})).catch((e=>{S.error("获取课程详情失败: "+(e.message||"未知错误")),Z.value={}}));var t}},{default:g((()=>a[25]||(a[25]=[w("查看")]))),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])),[[he,l.value]]),a[39]||(a[39]=w()),N(_(pe,{total:u.value,page:ae.value.pageNum,"onUpdate:page":a[4]||(a[4]=e=>ae.value.pageNum=e),limit:ae.value.pageSize,"onUpdate:limit":a[5]||(a[5]=e=>ae.value.pageSize=e),onPagination:te},null,8,["total","page","limit"]),[[j,u.value>0]])])),_:1}),a[53]||(a[53]=w()),_(be,{title:"课程详情",modelValue:c.value,"onUpdate:modelValue":a[6]||(a[6]=e=>c.value=e),width:"700px"},{default:g((()=>[_(fe,{column:2,border:""},{default:g((()=>[_(me,{label:"课程名称"},{default:g((()=>[w(U(Z.value.courseName),1)])),_:1}),a[40]||(a[40]=w()),_(me,{label:"课程编码"},{default:g((()=>[w(U(Z.value.courseCode),1)])),_:1}),a[41]||(a[41]=w()),_(me,{label:"学分"},{default:g((()=>[w(U(Z.value.credits),1)])),_:1}),a[42]||(a[42]=w()),_(me,{label:"课时"},{default:g((()=>[w(U(Z.value.courseDuration),1)])),_:1}),a[43]||(a[43]=w()),_(me,{label:"所属院系"},{default:g((()=>[w(U(Z.value.departmentName||"未分配"),1)])),_:1}),a[44]||(a[44]=w()),_(me,{label:"课程容量"},{default:g((()=>[w(U(Z.value.selectedCount||0)+"/"+U(Z.value.capacity||"不限"),1)])),_:1}),a[45]||(a[45]=w()),_(me,{label:"授课教师"},{default:g((()=>[w(U(Z.value.teacherName),1)])),_:1}),a[46]||(a[46]=w()),_(me,{label:"教师联系方式"},{default:g((()=>[w(U(Z.value.teacherContact),1)])),_:1}),a[47]||(a[47]=w()),_(me,{label:"上课地点"},{default:g((()=>[w(U(Z.value.location),1)])),_:1}),a[48]||(a[48]=w()),_(me,{label:"上课时间"},{default:g((()=>[w(U(Z.value.courseTime),1)])),_:1}),a[49]||(a[49]=w()),_(me,{label:"学期"},{default:g((()=>[w(U(Z.value.semester),1)])),_:1}),a[50]||(a[50]=w()),_(me,{label:"状态"},{default:g((()=>[_(ne,{type:1===Z.value.status?"success":0===Z.value.status?"info":"danger"},{default:g((()=>[w(U(Z.value.statusText),1)])),_:1},8,["type"])])),_:1}),a[51]||(a[51]=w()),_(me,{label:"课程简介",span:2},{default:g((()=>[w(U(Z.value.description),1)])),_:1}),a[52]||(a[52]=w()),_(me,{label:"考核方式",span:2},{default:g((()=>[w(U(Z.value.assessmentMethod),1)])),_:1})])),_:1})])),_:1},8,["modelValue"])])}}},[["__scopeId","data-v-62ccaeca"]]);export{Z as default};
