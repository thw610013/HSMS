import{s as e,_ as l}from"./index-c00447c9.js";import{r as a,X as t,ad as u,k as o,z as r,P as n,H as d,L as i,ag as s,y as p,A as c,u as m,a5 as v,O as f,a4 as h,I as g,G as y,M as _,K as b}from"./vue-core-ad22061d.js";import{u as w,H as V,E as k,a as x,w as z,x as C,B as U,b as S,F as D,G as j,J as N,e as B,K as P,L as $,M as q,R as T,O as F,A as K}from"./element-plus-7067fc91.js";import"./icons-3f8828dd.js";import"./utils-ebe9136b.js";function R(l){return e({url:"/todo/list",method:"get",params:l})}function A(){return e({url:"/todo/my",method:"get"})}const G={class:"app-container"},H={class:"card-header"},I={class:"right-container"},L={class:"dialog-footer"},M=l({__name:"index",setup(l){const M=[{label:"未完成",value:0},{label:"已完成",value:1}],O=[{label:"低",value:0},{label:"中",value:1},{label:"高",value:2}],E=a(),J=a(!1),X=a(!1),Q=a(""),W=a([]),Y=a(0),Z=a(!1),ee=t({queryParams:{pageNum:1,pageSize:10,title:void 0,status:void 0,priority:void 0},form:{id:void 0,title:"",content:"",status:0,priority:1,dueDate:null},rules:{title:[{required:!0,message:"待办标题不能为空",trigger:"blur"},{max:100,message:"待办标题长度不能超过100个字符",trigger:"blur"}],priority:[{required:!0,message:"优先级不能为空",trigger:"change"}]}}),{queryParams:le,form:ae,rules:te}=u(ee),ue=()=>{J.value=!0;(Z.value?R:A)(le.value).then(e=>{W.value=e.data||[],Y.value=e.total||0,J.value=!1}).catch(()=>{J.value=!1})},oe=()=>{le.value={pageNum:1,pageSize:10,title:void 0,status:void 0,priority:void 0},re()},re=()=>{le.value.pageNum=1,ue()},ne=e=>{le.value.pageSize=e,ue()},de=e=>{le.value.pageNum=e,ue()},ie=()=>{var e;null==(e=E.value)||e.resetFields(),ae.value={id:void 0,title:"",content:"",status:0,priority:1,dueDate:null}},se=()=>{X.value=!1,ie()},pe=()=>{ie(),Q.value="添加待办事项",X.value=!0},ce=l=>{var a;ie(),(a=l.id,e({url:`/todo/${a}`,method:"get"})).then(e=>{ae.value=e.data,Q.value="修改待办事项",X.value=!0})},me=()=>{var l;null==(l=E.value)||l.validate(l=>{l&&(ae.value.id?function(l){return e({url:"/todo",method:"put",data:l})}(ae.value).then(e=>{k.success("修改成功"),X.value=!1,ue()}):function(l){return e({url:"/todo",method:"post",data:l})}(ae.value).then(e=>{k.success("新增成功"),X.value=!1,ue()}))})},ve=l=>{x.confirm(`是否确认删除标题为"${l.title}"的待办事项?`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{var a;(a=l.id,e({url:`/todo/${a}`,method:"delete"})).then(()=>{k.success("删除成功"),ue()})}).catch(()=>{})},fe=l=>{x.confirm(`是否确认完成标题为"${l.title}"的待办事项?`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{var a;(a=l.id,e({url:`/todo/complete/${a}`,method:"put"})).then(()=>{k.success("操作成功"),ue()})}).catch(()=>{})};return o(()=>{ue()}),(e,l)=>{const a=z,t=C,u=K,o=U,k=s("Search"),x=S,R=D,A=s("Refresh"),Z=j,ee=s("Plus"),ue=N,ie=B,he=P,ge=$,ye=q,_e=w,be=T,we=V,Ve=F;return p(),r("div",G,[n(_e,null,{header:d(()=>[c("div",H,[l[18]||(l[18]=c("span",{class:"card-title"},"待办事项",-1)),l[19]||(l[19]=i()),c("div",I,[n(Z,{inline:!0,model:m(le),class:"search-form"},{default:d(()=>[n(t,{label:"标题"},{default:d(()=>[n(a,{modelValue:m(le).title,"onUpdate:modelValue":l[0]||(l[0]=e=>m(le).title=e),placeholder:"请输入待办标题",clearable:"",onKeyup:v(re,["enter"])},null,8,["modelValue"])]),_:1}),l[13]||(l[13]=i()),n(t,{label:"状态"},{default:d(()=>[n(o,{modelValue:m(le).status,"onUpdate:modelValue":l[1]||(l[1]=e=>m(le).status=e),placeholder:"待办状态",clearable:""},{default:d(()=>[(p(),r(f,null,h(M,e=>n(u,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),l[14]||(l[14]=i()),n(t,{label:"优先级"},{default:d(()=>[n(o,{modelValue:m(le).priority,"onUpdate:modelValue":l[2]||(l[2]=e=>m(le).priority=e),placeholder:"优先级",clearable:""},{default:d(()=>[(p(),r(f,null,h(O,e=>n(u,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),l[15]||(l[15]=i()),n(t,null,{default:d(()=>[n(R,{type:"primary",onClick:re},{default:d(()=>[n(x,null,{default:d(()=>[n(k)]),_:1}),l[10]||(l[10]=i(" 搜索\n                "))]),_:1}),l[12]||(l[12]=i()),n(R,{onClick:oe},{default:d(()=>[n(x,null,{default:d(()=>[n(A)]),_:1}),l[11]||(l[11]=i(" 重置\n                "))]),_:1})]),_:1})]),_:1},8,["model"]),l[17]||(l[17]=i()),n(R,{type:"primary",plain:"",onClick:pe},{default:d(()=>[n(x,null,{default:d(()=>[n(ee)]),_:1}),l[16]||(l[16]=i(" 新增\n            "))]),_:1})])])]),default:d(()=>[l[32]||(l[32]=i()),g((p(),y(ge,{data:W.value,border:"",stripe:""},{default:d(()=>[n(ue,{type:"selection",width:"55",align:"center"}),l[25]||(l[25]=i()),n(ue,{label:"序号",width:"55",align:"center",type:"index"}),l[26]||(l[26]=i()),n(ue,{label:"标题",prop:"title","show-overflow-tooltip":"",width:"200"},{default:d(e=>[n(ie,{content:e.row.title,placement:"top","show-after":300},{default:d(()=>[c("span",null,_(e.row.title),1)]),_:2},1032,["content"])]),_:1}),l[27]||(l[27]=i()),n(ue,{label:"内容",prop:"content","show-overflow-tooltip":"","min-width":"180"},{default:d(e=>[n(ie,{content:e.row.content,placement:"top","show-after":300},{default:d(()=>[c("span",null,_(e.row.content),1)]),_:2},1032,["content"])]),_:1}),l[28]||(l[28]=i()),n(ue,{label:"状态",prop:"status",width:"80",align:"center"},{default:d(e=>[n(he,{type:0===e.row.status?"warning":"success"},{default:d(()=>{return[i(_((l=e.row.status,{0:"未完成",1:"已完成"}[l]||"")),1)];var l}),_:2},1032,["type"])]),_:1}),l[29]||(l[29]=i()),n(ue,{label:"优先级",prop:"priority",width:"80",align:"center"},{default:d(e=>[n(he,{type:0===e.row.priority?"info":1===e.row.priority?"warning":"danger"},{default:d(()=>{return[i(_((l=e.row.priority,{0:"低",1:"中",2:"高"}[l]||"")),1)];var l}),_:2},1032,["type"])]),_:1}),l[30]||(l[30]=i()),n(ue,{label:"到期时间",prop:"dueDate",width:"160",align:"center"},{default:d(e=>[c("span",null,_(e.row.dueDate||"-"),1)]),_:1}),l[31]||(l[31]=i()),n(ue,{label:"操作",align:"center",width:"200"},{default:d(e=>[n(R,{size:"small",type:"primary",text:"",onClick:l=>ce(e.row)},{default:d(()=>l[20]||(l[20]=[i("编辑")])),_:2},1032,["onClick"]),l[23]||(l[23]=i()),0===e.row.status?(p(),y(R,{key:0,size:"small",type:"success",text:"",onClick:l=>fe(e.row)},{default:d(()=>l[21]||(l[21]=[i("完成")])),_:2},1032,["onClick"])):b("",!0),l[24]||(l[24]=i()),n(R,{size:"small",type:"danger",text:"",onClick:l=>ve(e.row)},{default:d(()=>l[22]||(l[22]=[i("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[Ve,J.value]]),l[33]||(l[33]=i()),n(ye,{"current-page":m(le).pageNum,"onUpdate:currentPage":l[3]||(l[3]=e=>m(le).pageNum=e),"page-size":m(le).pageSize,"onUpdate:pageSize":l[4]||(l[4]=e=>m(le).pageSize=e),"page-sizes":[10,20,50,100],total:Y.value,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:ne,onCurrentChange:de},null,8,["current-page","page-size","total"])]),_:1}),l[41]||(l[41]=i()),n(we,{title:Q.value,modelValue:X.value,"onUpdate:modelValue":l[9]||(l[9]=e=>X.value=e),width:"500px","append-to-body":"","close-on-click-modal":!1},{footer:d(()=>[c("div",L,[n(R,{type:"primary",onClick:me},{default:d(()=>l[37]||(l[37]=[i("确 定")])),_:1}),l[39]||(l[39]=i()),n(R,{onClick:se},{default:d(()=>l[38]||(l[38]=[i("取 消")])),_:1})])]),default:d(()=>[n(Z,{ref_key:"todoFormRef",ref:E,model:m(ae),rules:m(te),"label-width":"80px"},{default:d(()=>[n(t,{label:"标题",prop:"title"},{default:d(()=>[n(a,{modelValue:m(ae).title,"onUpdate:modelValue":l[5]||(l[5]=e=>m(ae).title=e),placeholder:"请输入待办标题"},null,8,["modelValue"])]),_:1}),l[34]||(l[34]=i()),n(t,{label:"内容",prop:"content"},{default:d(()=>[n(a,{modelValue:m(ae).content,"onUpdate:modelValue":l[6]||(l[6]=e=>m(ae).content=e),type:"textarea",rows:4,placeholder:"请输入待办内容"},null,8,["modelValue"])]),_:1}),l[35]||(l[35]=i()),n(t,{label:"优先级",prop:"priority"},{default:d(()=>[n(o,{modelValue:m(ae).priority,"onUpdate:modelValue":l[7]||(l[7]=e=>m(ae).priority=e),placeholder:"请选择优先级",style:{width:"100%"}},{default:d(()=>[(p(),r(f,null,h(O,e=>n(u,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),l[36]||(l[36]=i()),n(t,{label:"到期时间",prop:"dueDate"},{default:d(()=>[n(be,{modelValue:m(ae).dueDate,"onUpdate:modelValue":l[8]||(l[8]=e=>m(ae).dueDate=e),type:"datetime",placeholder:"请选择到期时间",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"]),l[40]||(l[40]=i())]),_:1},8,["title","modelValue"])])}}},[["__scopeId","data-v-bc44adf9"]]);export{M as default};
