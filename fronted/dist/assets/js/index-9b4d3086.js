var e=(e,a,l)=>new Promise((r,o)=>{var t=e=>{try{n(l.next(e))}catch(a){o(a)}},s=e=>{try{n(l.throw(e))}catch(a){o(a)}},n=e=>e.done?r(e.value):Promise.resolve(e.value).then(t,s);n((l=l.apply(e,a)).next())});import{_ as a,u as l,m as r}from"./index-c00447c9.js";import{r as o,X as t,k as s,z as n,P as u,H as i,L as d,ay as c,aq as p,y as f,u as m,A as h,I as g,G as v,M as w}from"./vue-core-ad22061d.js";import{M as y,R as _,T as b}from"./icons-3f8828dd.js";import{E as I,u as k,w as C,x as z,b as N,F as x,G as S,J as j,K as V,L as O,M as P,O as U}from"./element-plus-7067fc91.js";import"./utils-ebe9136b.js";const q={class:"teacher-courses-container"},G={class:"card-header"},M={class:"header-buttons"},T={class:"pagination-container"},A=a({__name:"index",setup(a){const A=c(),F=l(),L=o(null),R=o(!1),D=o(!1),E=o([]),H=o(0),J=t({courseName:"",semester:"",pageNum:1,pageSize:10});function K(){L.value?(R.value=!0,r(L.value,J).then(e=>{E.value=e.data.list||[],H.value=e.data.total||0}).catch(e=>{console.error("获取教师课程列表失败:",e),I.error("获取教师课程列表失败")}).finally(()=>{R.value=!1})):I.warning("教师ID不存在，无法获取课程列表")}function X(){J.pageNum=1,K()}function B(){J.courseName="",J.semester="",X()}function Q(e){J.pageSize=e,K()}function W(e){J.pageNum=e,K()}function Y(){I.success("导出功能待实现")}return s(()=>e(this,null,function*(){yield function(){return e(this,null,function*(){const e=yield F.getUserInfo();e&&e.teacherId?L.value=e.teacherId:I.warning("获取教师信息失败，请重新登录")})}(),K()})),(e,a)=>{const l=C,r=z,o=N,t=x,s=S,c=k,I=j,F=V,L=O,K=P,Z=p("hasPerms"),$=U;return f(),n("div",q,[u(c,{class:"search-card",shadow:"hover"},{default:i(()=>[u(s,{model:J,ref:"queryForm",inline:!0},{default:i(()=>[u(r,{label:"课程名称",prop:"courseName"},{default:i(()=>[u(l,{modelValue:J.courseName,"onUpdate:modelValue":a[0]||(a[0]=e=>J.courseName=e),placeholder:"请输入课程名称",clearable:""},null,8,["modelValue"])]),_:1}),a[7]||(a[7]=d()),u(r,{label:"学期",prop:"semester"},{default:i(()=>[u(l,{modelValue:J.semester,"onUpdate:modelValue":a[1]||(a[1]=e=>J.semester=e),placeholder:"请输入学期",clearable:""},null,8,["modelValue"])]),_:1}),a[8]||(a[8]=d()),u(r,null,{default:i(()=>[u(t,{type:"primary",onClick:X},{default:i(()=>[u(o,null,{default:i(()=>[u(m(y))]),_:1}),a[4]||(a[4]=d("查询\n          "))]),_:1}),a[6]||(a[6]=d()),u(t,{onClick:B},{default:i(()=>[u(o,null,{default:i(()=>[u(m(_))]),_:1}),a[5]||(a[5]=d("重置\n          "))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),a[29]||(a[29]=d()),u(c,{class:"table-card",shadow:"hover"},{header:i(()=>[h("div",G,[a[10]||(a[10]=h("span",{class:"header-title"},"我的授课列表",-1)),a[11]||(a[11]=d()),h("div",M,[g((f(),v(t,{type:"primary",onClick:Y,loading:D.value},{default:i(()=>[u(o,null,{default:i(()=>[u(m(b))]),_:1}),a[9]||(a[9]=d("导出\n            "))]),_:1},8,["loading"])),[[Z,["course:teaching:list"]]])])])]),default:i(()=>[a[27]||(a[27]=d()),g((f(),v(L,{data:E.value,stripe:"",border:"",style:{width:"100%"},"header-cell-style":{background:"#f5f7fa",color:"#606266"}},{default:i(()=>[u(I,{type:"index",label:"#",width:"60"}),a[17]||(a[17]=d()),u(I,{prop:"courseName",label:"课程名称","min-width":"180","show-overflow-tooltip":""}),a[18]||(a[18]=d()),u(I,{prop:"courseCode",label:"课程编码",width:"120","show-overflow-tooltip":""}),a[19]||(a[19]=d()),u(I,{prop:"credit",label:"学分",width:"80",align:"center"}),a[20]||(a[20]=d()),u(I,{prop:"semester",label:"学期",width:"120","show-overflow-tooltip":""}),a[21]||(a[21]=d()),u(I,{prop:"classTime",label:"上课时间",width:"150","show-overflow-tooltip":""}),a[22]||(a[22]=d()),u(I,{prop:"location",label:"上课地点",width:"150","show-overflow-tooltip":""}),a[23]||(a[23]=d()),u(I,{prop:"selectedCount",label:"选课人数",width:"100",align:"center"}),a[24]||(a[24]=d()),u(I,{prop:"capacity",label:"课程容量",width:"100",align:"center"}),a[25]||(a[25]=d()),u(I,{label:"状态",width:"100",align:"center"},{default:i(e=>[u(F,{type:0===e.row.status?"success":"info"},{default:i(()=>[d(w(0===e.row.status?"正常":"已结课"),1)]),_:2},1032,["type"])]),_:1}),a[26]||(a[26]=d()),u(I,{label:"操作",width:"220",fixed:"right"},{default:i(e=>[u(t,{type:"primary",link:"",onClick:a=>{return l=e.row,void A.push({name:"TeacherCourseStudents",params:{id:l.id,courseId:l.courseId}});var l}},{default:i(()=>a[12]||(a[12]=[d("\n              学生名单\n            ")])),_:2},1032,["onClick"]),a[15]||(a[15]=d()),u(t,{type:"primary",link:"",onClick:a=>{return l=e.row,void A.push({name:"GradeInput",query:{courseId:l.courseId,courseOfferingId:l.id}});var l}},{default:i(()=>a[13]||(a[13]=[d("\n              成绩录入\n            ")])),_:2},1032,["onClick"]),a[16]||(a[16]=d()),u(t,{type:"primary",link:"",onClick:a=>{return l=e.row,console.log("跳转到考勤管理页面，课程信息:",{courseId:l.courseId,"courseId类型":typeof l.courseId,courseOfferingId:l.id,"courseOfferingId类型":typeof l.id,"完整数据":l}),void A.push({name:"AttendanceRecord",query:{courseId:l.courseId,courseOfferingId:l.id}});var l}},{default:i(()=>a[14]||(a[14]=[d("\n              考勤管理\n            ")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[$,R.value]]),a[28]||(a[28]=d()),h("div",T,[u(K,{"current-page":J.pageNum,"onUpdate:currentPage":a[2]||(a[2]=e=>J.pageNum=e),"page-size":J.pageSize,"onUpdate:pageSize":a[3]||(a[3]=e=>J.pageSize=e),"page-sizes":[10,20,50,100],background:!0,layout:"total, sizes, prev, pager, next, jumper",total:H.value,onSizeChange:Q,onCurrentChange:W},null,8,["current-page","page-size","total"])])]),_:1})])}}},[["__scopeId","data-v-b3357f8b"]]);export{A as default};
