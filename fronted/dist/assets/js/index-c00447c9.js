var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,r=(t,a,l)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[a]=l,s=(e,t)=>{for(var a in t||(t={}))n.call(t,a)&&r(e,a,t[a]);if(l)for(var a of l(t))o.call(t,a)&&r(e,a,t[a]);return e},d=(e,l)=>t(e,a(l)),i=(e,t,a)=>new Promise((l,n)=>{var o=e=>{try{s(a.next(e))}catch(t){n(t)}},r=e=>{try{s(a.throw(e))}catch(t){n(t)}},s=e=>e.done?l(e.value):Promise.resolve(e.value).then(o,r);s((a=a.apply(e,t)).next())});import{aw as u,k as c,G as p,ag as m,y as h,af as f,i as v,ax as g,ay as _,c as b,r as y,h as w,z as V,A as x,P as k,H as I,J as C,C as E,L as D,O as P,a4 as T,M as O,B as $,a8 as A,a9 as R,K as L,u as S,T as j,az as N,W as U,V as z,I as M,Q as B,D as q,n as Y,aA as F,t as W,aB as H,aC as G,X as J,aq as X,aD as Z,S as K,at as Q,aE as ee}from"./vue-core-ad22061d.js";import{Q as te,M as ae,R as le,B as ne,S as oe,T as re,U as se,k as de,D as ie,l as ue,w as ce,V as pe,W as me,o as he,X as fe,j as ve,a as ge,O as _e,Y as be}from"./icons-3f8828dd.js";import{v as ye,w as we,x as Ve,y as xe,z as ke,A as Ie,B as Ce,C as Ee,D as De,E as Pe,F as Te,G as Oe}from"./utils-ebe9136b.js";import{E as $e,a as Ae,b as Re,c as Le,d as Se,e as je,f as Ne,g as Ue,h as ze,i as Me,j as Be,k as qe,l as Ye,m as Fe,n as We,o as He,p as Ge,q as Je,r as Xe,s as Ze,t as Ke,u as Qe,v as et,w as tt,x as at,y as lt,z as nt,A as ot,B as rt,C as st,D as dt,F as it,G as ut,H as ct,I as pt,J as mt,K as ht,L as ft,M as vt,N as gt,O as _t,P as bt,Q as yt,R as wt,S as Vt,T as xt,U as kt,V as It,W as Ct,X as Et,Y as Dt,Z as Pt,_ as Tt,$ as Ot}from"./element-plus-7067fc91.js";function $t(e,t){var a;return e="object"==typeof(a=e)&&null!==a?e:Object.create(null),new Proxy(e,{get:(e,a,l)=>"key"===a?Reflect.get(e,a,l):Reflect.get(e,a,l)||Reflect.get(t,a,l)})}function At(e,{storage:t,serializer:a,key:l,debug:n}){try{const n=null==t?void 0:t.getItem(l);n&&e.$patch(null==a?void 0:a.deserialize(n))}catch(o){n&&console.error("[pinia-plugin-persistedstate]",o)}}function Rt(e,{storage:t,serializer:a,key:l,paths:n,debug:o}){try{const o=Array.isArray(n)?function(e,t){return t.reduce((t,a)=>{const l=a.split(".");return function(e,t,a){return t.slice(0,-1).reduce((e,t)=>/^(__proto__)$/.test(t)?{}:e[t]=e[t]||{},e)[t[t.length-1]]=a,e}(t,l,function(e,t){return t.reduce((e,t)=>null==e?void 0:e[t],e)}(e,l))},{})}(e,n):e;t.setItem(l,a.serialize(o))}catch(r){o&&console.error("[pinia-plugin-persistedstate]",r)}}!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var Lt=function(e={}){return t=>{const{auto:a=!1}=e,{options:{persist:l=a},store:n,pinia:o}=t;if(!l)return;if(!(n.$id in o.state.value)){const e=o._s.get(n.$id.replace("__hot:",""));return void(e&&Promise.resolve().then(()=>e.$persist()))}const r=(Array.isArray(l)?l.map(t=>$t(t,e)):[$t(l,e)]).map(function(e,t){return a=>{var l;try{const{storage:n=localStorage,beforeRestore:o,afterRestore:r,serializer:s={serialize:JSON.stringify,deserialize:JSON.parse},key:d=t.$id,paths:i=null,debug:u=!1}=a;return{storage:n,beforeRestore:o,afterRestore:r,serializer:s,key:(null!=(l=e.key)?l:e=>e)("string"==typeof d?d:d(t.$id)),paths:i,debug:u}}catch(n){return a.debug&&console.error("[pinia-plugin-persistedstate]",n),null}}}(e,n)).filter(Boolean);n.$persist=()=>{r.forEach(e=>{Rt(n.$state,e)})},n.$hydrate=({runHooks:e=!0}={})=>{r.forEach(a=>{const{beforeRestore:l,afterRestore:o}=a;e&&(null==l||l(t)),At(n,a),e&&(null==o||o(t))})},r.forEach(e=>{const{beforeRestore:a,afterRestore:l}=e;null==a||a(t),At(n,e),null==l||l(t),n.$subscribe((t,a)=>{Rt(a,e)},{detached:!0})})}}();
/*! Element Plus v2.9.10 */if("undefined"!=typeof window){let e=function(){var e=document.body,t=document.getElementById("__svg__icons__dom__");t||((t=document.createElementNS("http://www.w3.org/2000/svg","svg")).style.position="absolute",t.style.width="0",t.style.height="0",t.id="__svg__icons__dom__",t.setAttribute("xmlns","http://www.w3.org/2000/svg"),t.setAttribute("xmlns:link","http://www.w3.org/1999/xlink")),t.innerHTML="",e.insertBefore(t,e.lastChild)};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e()}
/*! js-cookie v3.0.5 | MIT */
function St(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)e[l]=a[l]}return e}var jt=function e(t,a){function l(e,l,n){if("undefined"!=typeof document){"number"==typeof(n=St({},a,n)).expires&&(n.expires=new Date(Date.now()+864e5*n.expires)),n.expires&&(n.expires=n.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var o="";for(var r in n)n[r]&&(o+="; "+r,!0!==n[r]&&(o+="="+n[r].split(";")[0]));return document.cookie=e+"="+t.write(l,e)+o}}return Object.create({set:l,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var a=document.cookie?document.cookie.split("; "):[],l={},n=0;n<a.length;n++){var o=a[n].split("="),r=o.slice(1).join("=");try{var s=decodeURIComponent(o[0]);if(l[s]=t.read(r,s),e===s)break}catch(d){}}return e?l[e]:l}},remove:function(e,t){l(e,"",St({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,St({},this.attributes,t))},withConverter:function(t){return e(St({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(a)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});const Nt=u("app",{state:()=>({sidebar:{opened:!jt.get("sidebarStatus")||!!+jt.get("sidebarStatus"),withoutAnimation:!1},device:"desktop",size:jt.get("size")||"default",theme:"light",visitedViews:[],cachedViews:[]}),actions:{toggleSidebar(){this.sidebar.opened=!this.sidebar.opened,this.sidebar.withoutAnimation=!1,this.sidebar.opened?jt.set("sidebarStatus",1):jt.set("sidebarStatus",0)},closeSidebar({withoutAnimation:e}){jt.set("sidebarStatus",0),this.sidebar.opened=!1,this.sidebar.withoutAnimation=e},toggleDevice(e){this.device=e},setSize(e){this.size=e,jt.set("size",e)},setTheme(e){this.theme=e,document.documentElement.className=`theme-${e}`},addVisitedView(e){this.visitedViews.some(t=>t.path===e.path)||this.visitedViews.push(Object.assign({},e,{title:e.meta.title||"no-name"}))},addCachedView(e){this.cachedViews.includes(e.name)||e.meta&&e.meta.keepAlive&&this.cachedViews.push(e.name)},delVisitedView(e){for(const[t,a]of this.visitedViews.entries())if(a.path===e.path){this.visitedViews.splice(t,1);break}},delCachedView(e){const t=this.cachedViews.indexOf(e.name);t>-1&&this.cachedViews.splice(t,1)},delOthersVisitedViews(e){this.visitedViews=this.visitedViews.filter(t=>t.meta.affix||t.path===e.path)},delOthersCachedViews(e){const t=this.cachedViews.indexOf(e.name);this.cachedViews=t>-1?this.cachedViews.slice(t,t+1):[]},delAllVisitedViews(){this.visitedViews=this.visitedViews.filter(e=>e.meta.affix)},delAllCachedViews(){this.cachedViews=[]}},persist:{enabled:!0,strategies:[{key:"app-store",storage:localStorage,paths:["theme","size"]}]}}),Ut={__name:"App",setup(e){const t=Nt();return c(()=>{const e=t.theme;e&&(document.documentElement.className=`theme-${e}`)}),(e,t)=>{const a=m("router-view");return h(),p(a)}}},zt="Student-Management-Token";function Mt(){return jt.get(zt)||localStorage.getItem(zt)}function Bt(){return localStorage.removeItem(zt),jt.remove(zt)}const qt=ye.create({baseURL:"/api",timeout:3e4});function Yt(){return qt({url:"/auth/user/info",method:"get"})}function Ft(e){return qt({url:"/system/user/list",method:"get",params:e})}function Wt(e){return qt({url:`/system/user/${e}`,method:"get"})}function Ht(e){return qt({url:"/system/user",method:"post",data:e})}function Gt(e){return qt({url:"/system/user",method:"put",data:e})}function Jt(e){return qt({url:`/system/user/${e}`,method:"delete"})}function Xt(e){return qt({url:"/system/user/status",method:"put",data:e})}function Zt(e){return qt({url:`/system/user/${e.userId}/password`,method:"put",data:{password:e.password}})}function Kt(e,t){return console.log("发送修改密码请求:",{oldPassword:e,newPassword:t}),qt({url:"/system/user/password",method:"put",data:{oldPassword:e,newPassword:t}})}function Qt(e){return console.log("发送更新个人信息请求:",e),qt({url:"/system/user/profile",method:"put",data:e})}function ea(e){return qt({url:"/system/user/profile/avatar",method:"post",data:e,headers:{"Content-Type":"multipart/form-data"}})}console.log("API请求配置信息:",{baseURL:qt.defaults.baseURL,timeout:qt.defaults.timeout}),qt.interceptors.request.use(e=>{var t,a,l,n,o,r;const s=Mt();return console.log("======== API请求开始 ========"),console.log("请求URL:",e.url),console.log("请求方法:",e.method),"get"===e.method||"delete"===e.method?(console.log("查询参数:",e.params),"/grade/student-list"===e.url&&(console.log("成绩查询接口请求:"),console.log("- courseId:",null==(t=e.params)?void 0:t.courseId,"类型:",typeof(null==(a=e.params)?void 0:a.courseId)),console.log("- semester:",null==(l=e.params)?void 0:l.semester,"类型:",typeof(null==(n=e.params)?void 0:n.semester)),(null==(o=e.params)?void 0:o.courseId)||console.warn("⚠️ 缺少必填参数: courseId"),(null==(r=e.params)?void 0:r.semester)||console.warn("⚠️ 缺少必填参数: semester"))):console.log("提交数据:",e.data),s?(e.headers.Authorization="Bearer "+s,console.log("认证头:","Bearer "+s.substring(0,10)+"...")):console.warn("⚠️ 未找到认证令牌，请求可能会被拒绝"),console.log("完整请求URL:",qt.defaults.baseURL+e.url),console.log("======== 请求配置结束 ========"),e},e=>(console.error("❌ 请求配置错误:",e),Promise.reject(e))),qt.interceptors.response.use(e=>{const t=e.data;return"blob"===e.config.responseType?e:(console.log("响应状态码:",e.status),console.log("响应数据:",e.data),200!==t.code?($e({message:t.message||"系统错误",type:"error",duration:5e3}),console.error("请求失败，错误码:",t.code,"错误信息:",t.message),401===t.code&&(console.warn("登录状态已过期，需要重新登录"),Ae.confirm("登录状态已过期，请重新登录","系统提示",{confirmButtonText:"重新登录",cancelButtonText:"取消",type:"warning"}).then(()=>{console.log("用户确认重新登录，暂时不执行自动退出以便调试")})),Promise.reject(new Error(t.message||"系统错误"))):t)},e=>{console.error("响应错误:",e),e.response&&(console.error("错误状态码:",e.response.status),console.error("错误响应头:",e.response.headers),console.error("错误响应数据:",e.response.data)),e.request&&console.error("请求配置:",e.request),e.config&&(console.error("请求URL:",e.config.url),console.error("请求方法:",e.config.method),console.error("请求参数:",e.config.params||e.config.data));let t=e.message;if(e.response)switch(e.response.status){case 400:t="请求错误";break;case 401:t="未授权，请重新登录",console.error("收到401未授权响应，但暂时不执行自动退出以便调试");break;case 403:t="拒绝访问",console.error("收到403拒绝访问响应");break;case 404:t="请求地址错误";break;case 500:t="服务器内部错误";break;default:t=e.response.data.message||"系统错误"}else t="连接服务器失败";return $e({message:t,type:"error",duration:5e3}),Promise.reject(e)});const ta={},aa=function(e,t,a){if(!t||0===t.length)return e();const l=document.getElementsByTagName("link");return Promise.all(t.map(e=>{if((e=function(e){return"/"+e}(e))in ta)return;ta[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(!!a)for(let a=l.length-1;a>=0;a--){const n=l[a];if(n.href===e&&(!t||"stylesheet"===n.rel))return}else if(document.querySelector(`link[href="${e}"]${n}`))return;const o=document.createElement("link");return o.rel=t?"stylesheet":"modulepreload",t||(o.as="script",o.crossOrigin=""),o.href=e,document.head.appendChild(o),t?new Promise((t,a)=>{o.addEventListener("load",t),o.addEventListener("error",()=>a(new Error(`Unable to preload CSS for ${e}`)))}):void 0})).then(()=>e()).catch(e=>{const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e})},la={"system/user/index":"system/user/index","system/role/index":"system/role/index","system/menu/index":"system/menu/index","education/department/index":"education/department/index","education/major/index":"education/major/index","education/class/index":"education/class/index","student/index":"student/index","student/add":"student/add","student/edit":"student/edit","teacher/index":"teacher/index","teacher/add":"teacher/add","teacher/edit":"teacher/edit","teacher/detail":"teacher/detail","course/index":"course/index","course/add":"course/add","course/offering/index":"course/offering/index","course/list":"course/index","attendance/record/index":"attendance/record/index","attendance/stats/index":"attendance/stats/index","attendance/my/index":"attendance/my/index","selection/manage":"selection/manage","course/selection/index":"course/selection/index","course/my-courses/index":"course/my-courses/index","course/teaching/index":"course/teaching/index","grade/input/index":"grade/input/index","grade/check":"grade/check","grade/stats":"grade/stats","course/selection":"course/selection/index","my-courses":"course/my-courses/index",teaching:"course/teaching/index"};function na(e){if(!e)return"";let t=e.replace(/^(\.\/|\/)/g,"");return t=t.replace(/\.vue$/,""),t=t.replace(/\/index$/,""),t=t.replace(/\\/g,"/"),console.log(`规范化路径: ${e} -> ${t}`),t}function oa(e){const t=Object.assign({"../views/attendance/my/index.vue":()=>aa(()=>import("./index-30eacbec.js"),["assets/js/index-30eacbec.js","assets/js/index-f992b0ab.js","assets/js/element-plus-7067fc91.js","assets/js/vue-core-ad22061d.js","assets/js/utils-ebe9136b.js","assets/js/icons-3f8828dd.js","assets/css/index-ec31c4f3.css","assets/js/index-aa3c308e.js","assets/css/index-0d4e1335.css","assets/js/attendance-0d82083c.js","assets/css/index-7185a55e.css"]),"../views/attendance/record/index.vue":()=>aa(()=>Promise.resolve().then(()=>mr),void 0),"../views/attendance/stats/index.vue":()=>aa(()=>import("./index-a38a24fa.js"),["assets/js/index-a38a24fa.js","assets/js/index-f992b0ab.js","assets/js/element-plus-7067fc91.js","assets/js/vue-core-ad22061d.js","assets/js/utils-ebe9136b.js","assets/js/icons-3f8828dd.js","assets/css/index-ec31c4f3.css","assets/js/attendance-0d82083c.js","assets/css/index-86f4f5e9.css"]),"../views/course/add.vue":()=>aa(()=>Promise.resolve().then(()=>Nl),void 0),"../views/course/index.vue":()=>aa(()=>Promise.resolve().then(()=>Wl),void 0),"../views/course/my-courses/index.vue":()=>aa(()=>import("./index-e2219ab0.js"),["assets/js/index-e2219ab0.js","assets/js/index-f992b0ab.js","assets/js/element-plus-7067fc91.js","assets/js/vue-core-ad22061d.js","assets/js/utils-ebe9136b.js","assets/js/icons-3f8828dd.js","assets/css/index-ec31c4f3.css","assets/js/index-aa3c308e.js","assets/css/index-0d4e1335.css","assets/css/index-297ca248.css"]),"../views/course/offering/index.vue":()=>aa(()=>import("./index-27871132.js"),["assets/js/index-27871132.js","assets/js/vue-core-ad22061d.js","assets/js/icons-3f8828dd.js","assets/js/element-plus-7067fc91.js","assets/js/utils-ebe9136b.js","assets/css/index-29001b93.css"]),"../views/course/selection/index.vue":()=>aa(()=>import("./index-10885957.js"),["assets/js/index-10885957.js","assets/js/index-f992b0ab.js","assets/js/element-plus-7067fc91.js","assets/js/vue-core-ad22061d.js","assets/js/utils-ebe9136b.js","assets/js/icons-3f8828dd.js","assets/css/index-ec31c4f3.css","assets/js/index-aa3c308e.js","assets/css/index-0d4e1335.css","assets/css/index-244ab2c1.css"]),"../views/course/teaching/index.vue":()=>aa(()=>import("./index-9b4d3086.js"),["assets/js/index-9b4d3086.js","assets/js/vue-core-ad22061d.js","assets/js/icons-3f8828dd.js","assets/js/element-plus-7067fc91.js","assets/js/utils-ebe9136b.js","assets/css/index-fd2c9266.css"]),"../views/course/teaching/students.vue":()=>aa(()=>import("./students-819f1f71.js"),["assets/js/students-819f1f71.js","assets/js/vue-core-ad22061d.js","assets/js/icons-3f8828dd.js","assets/js/element-plus-7067fc91.js","assets/js/utils-ebe9136b.js","assets/css/students-522e5160.css"]),"../views/dashboard/index.vue":()=>aa(()=>Promise.resolve().then(()=>Uo),void 0),"../views/education/class/index.vue":()=>aa(()=>import("./index-a1a0513f.js"),["assets/js/index-a1a0513f.js","assets/js/index-f992b0ab.js","assets/js/element-plus-7067fc91.js","assets/js/vue-core-ad22061d.js","assets/js/utils-ebe9136b.js","assets/js/icons-3f8828dd.js","assets/css/index-ec31c4f3.css","assets/js/index-aa3c308e.js","assets/css/index-0d4e1335.css","assets/js/major-11c16f9b.js"]),"../views/education/department/index.vue":()=>aa(()=>import("./index-8b8e4699.js"),["assets/js/index-8b8e4699.js","assets/js/index-f992b0ab.js","assets/js/element-plus-7067fc91.js","assets/js/vue-core-ad22061d.js","assets/js/utils-ebe9136b.js","assets/js/icons-3f8828dd.js","assets/css/index-ec31c4f3.css","assets/js/index-aa3c308e.js","assets/css/index-0d4e1335.css"]),"../views/education/major/index.vue":()=>aa(()=>import("./index-e22b80e7.js"),["assets/js/index-e22b80e7.js","assets/js/index-f992b0ab.js","assets/js/element-plus-7067fc91.js","assets/js/vue-core-ad22061d.js","assets/js/utils-ebe9136b.js","assets/js/icons-3f8828dd.js","assets/css/index-ec31c4f3.css","assets/js/index-aa3c308e.js","assets/css/index-0d4e1335.css","assets/js/major-11c16f9b.js"]),"../views/error/403.vue":()=>aa(()=>import("./403-dc114c12.js"),["assets/js/403-dc114c12.js","assets/js/vue-core-ad22061d.js","assets/js/element-plus-7067fc91.js","assets/js/utils-ebe9136b.js","assets/js/icons-3f8828dd.js","assets/css/403-c7cf1f6c.css"]),"../views/error/404.vue":()=>aa(()=>import("./404-82ef1720.js"),["assets/js/404-82ef1720.js","assets/js/vue-core-ad22061d.js","assets/js/element-plus-7067fc91.js","assets/js/utils-ebe9136b.js","assets/js/icons-3f8828dd.js","assets/css/404-e93499e1.css"]),"../views/grade/check.vue":()=>aa(()=>import("./check-108ea1a6.js"),["assets/js/check-108ea1a6.js","assets/js/icons-3f8828dd.js","assets/js/vue-core-ad22061d.js","assets/js/manage-ed44f4cc.js","assets/js/element-plus-7067fc91.js","assets/js/utils-ebe9136b.js","assets/css/check-7d617ba2.css"]),"../views/grade/input/index.vue":()=>aa(()=>Promise.resolve().then(()=>Cr),void 0),"../views/grade/my/index.vue":()=>aa(()=>import("./index-173815f6.js"),["assets/js/index-173815f6.js","assets/js/index-f992b0ab.js","assets/js/element-plus-7067fc91.js","assets/js/vue-core-ad22061d.js","assets/js/utils-ebe9136b.js","assets/js/icons-3f8828dd.js","assets/css/index-ec31c4f3.css","assets/js/index-aa3c308e.js","assets/css/index-0d4e1335.css","assets/css/index-36278b3a.css"]),"../views/grade/stats.vue":()=>aa(()=>import("./stats-7098bdf3.js"),["assets/js/stats-7098bdf3.js","assets/js/icons-3f8828dd.js","assets/js/vue-core-ad22061d.js","assets/js/utils-ebe9136b.js","assets/js/manage-ed44f4cc.js","assets/js/element-plus-7067fc91.js","assets/css/stats-9ec5cc00.css"]),"../views/login/index.vue":()=>aa(()=>import("./index-edce00a6.js"),["assets/js/index-edce00a6.js","assets/js/vue-core-ad22061d.js","assets/js/element-plus-7067fc91.js","assets/js/utils-ebe9136b.js","assets/js/icons-3f8828dd.js","assets/css/index-e662efad.css"]),"../views/message/notice/index.vue":()=>aa(()=>import("./index-121a638f.js"),["assets/js/index-121a638f.js","assets/js/vue-core-ad22061d.js","assets/js/element-plus-7067fc91.js","assets/js/utils-ebe9136b.js","assets/js/icons-3f8828dd.js","assets/css/index-b9ee6eb5.css"]),"../views/message/todo/index.vue":()=>aa(()=>import("./index-4ad3bd59.js"),["assets/js/index-4ad3bd59.js","assets/js/vue-core-ad22061d.js","assets/js/element-plus-7067fc91.js","assets/js/utils-ebe9136b.js","assets/js/icons-3f8828dd.js","assets/css/index-9c7b2f89.css"]),"../views/profile/index.vue":()=>aa(()=>import("./index-c599bb25.js"),["assets/js/index-c599bb25.js","assets/js/icons-3f8828dd.js","assets/js/vue-core-ad22061d.js","assets/js/element-plus-7067fc91.js","assets/js/utils-ebe9136b.js","assets/css/index-cb107ba7.css"]),"../views/redirect/index.vue":()=>aa(()=>import("./index-d19e2a31.js"),["assets/js/index-d19e2a31.js","assets/js/vue-core-ad22061d.js","assets/js/icons-3f8828dd.js","assets/js/utils-ebe9136b.js","assets/js/element-plus-7067fc91.js","assets/css/index-3310ace1.css"]),"../views/selection/manage.vue":()=>aa(()=>import("./manage-26c32bbb.js"),["assets/js/manage-26c32bbb.js","assets/js/element-plus-7067fc91.js","assets/js/vue-core-ad22061d.js","assets/js/utils-ebe9136b.js","assets/js/icons-3f8828dd.js","assets/js/index-f992b0ab.js","assets/css/index-ec31c4f3.css","assets/js/index-aa3c308e.js","assets/css/index-0d4e1335.css","assets/js/manage-ed44f4cc.js","assets/css/manage-d5678d26.css"]),"../views/student/add.vue":()=>aa(()=>Promise.resolve().then(()=>on),void 0),"../views/student/edit.vue":()=>aa(()=>Promise.resolve().then(()=>Rr),void 0),"../views/student/index.vue":()=>aa(()=>Promise.resolve().then(()=>An),void 0),"../views/system/menu/index.vue":()=>aa(()=>import("./index-c8c893b8.js"),["assets/js/index-c8c893b8.js","assets/js/icons-3f8828dd.js","assets/js/vue-core-ad22061d.js","assets/js/element-plus-7067fc91.js","assets/js/utils-ebe9136b.js","assets/css/index-629010aa.css","assets/css/el-text-ac000e7a.css"]),"../views/system/role/index.vue":()=>aa(()=>import("./index-30cbb4f5.js"),["assets/js/index-30cbb4f5.js","assets/js/icons-3f8828dd.js","assets/js/vue-core-ad22061d.js","assets/js/element-plus-7067fc91.js","assets/js/utils-ebe9136b.js","assets/css/index-fd50d51f.css","assets/css/el-text-ac000e7a.css"]),"../views/system/user/index.vue":()=>aa(()=>import("./index-6b487d1b.js"),["assets/js/index-6b487d1b.js","assets/js/icons-3f8828dd.js","assets/js/vue-core-ad22061d.js","assets/js/element-plus-7067fc91.js","assets/js/utils-ebe9136b.js","assets/css/index-c457d2bc.css"]),"../views/teacher/add.vue":()=>aa(()=>Promise.resolve().then(()=>Kn),void 0),"../views/teacher/detail.vue":()=>aa(()=>import("./detail-a3860caf.js"),["assets/js/detail-a3860caf.js","assets/js/vue-core-ad22061d.js","assets/js/element-plus-7067fc91.js","assets/js/utils-ebe9136b.js","assets/js/icons-3f8828dd.js","assets/css/detail-4c383ef4.css"]),"../views/teacher/edit.vue":()=>aa(()=>import("./edit-c3b69c63.js"),["assets/js/edit-c3b69c63.js","assets/js/vue-core-ad22061d.js","assets/js/element-plus-7067fc91.js","assets/js/utils-ebe9136b.js","assets/js/icons-3f8828dd.js","assets/css/edit-7ab333ce.css"]),"../views/teacher/index.vue":()=>aa(()=>Promise.resolve().then(()=>io),void 0)});console.log(`查找组件: ${e}, 可用组件数: ${Object.keys(t).length}`);const a=na(e);e.includes("message")&&(console.log("检测到message相关路径，打印所有可能的相关组件:"),Object.keys(t).filter(e=>e.includes("message")).forEach(e=>{console.log(`- ${e}`)}));const l=[`../views/${a}.vue`,`../views/${a}/index.vue`],n=a.split("/");if(n.length>1){const e=n.slice(0,-1).join("/"),t=n[n.length-1];l.push(`../views/${e}/${t}/index.vue`)}console.log("尝试查找的所有可能路径:",l);for(const o of l)if(t[o])return console.log(`组件路径匹配成功: ${o}`),t[o];console.log("未找到直接匹配，尝试模糊匹配...");for(const o of l){const e=o.replace("../views/","");for(const a of Object.keys(t))if(a.endsWith(e))return console.log(`简化路径匹配成功: ${a} -> ${e}`),t[a]}if(n.length>0){const e=n[n.length-1];if(console.log(`尝试匹配路径的最后部分: ${e}`),a.startsWith("message/")){console.log("特殊处理message路径:",a);const l=t[`../views/message/${e}/index.vue`];if(l)return console.log(`找到message组件: ../views/message/${e}/index.vue`),l}for(const a of Object.keys(t)){const l=a.toLowerCase();if(l.includes(`/${e.toLowerCase()}.vue`)||l.includes(`/${e.toLowerCase()}/index.vue`)){if(n.length>1){const e=n[n.length-2].toLowerCase();if(!l.includes(`/${e}/`))continue}return console.log(`最后部分匹配成功: ${a}`),t[a]}}}return console.error(`找不到匹配的组件: ${e}`),console.log("规范化后的路径:",a),console.log("尝试过的搜索路径:",l),console.log("可用的前10个模块:",Object.keys(t).slice(0,10)),null}function ra(e){return()=>{if(console.log(`统一加载器加载组件: ${e}`),"course/list"===e||"/course/list"===e){console.log("检测到course/list路径，进行特殊处理");const e=require("@/views/course/index.vue").default;return Promise.resolve(e)}if(e.startsWith("student/edit/")||e.startsWith("/student/edit/")){console.log("检测到student/edit路径，进行特殊处理");const e=require("@/views/student/edit.vue").default;return Promise.resolve(e)}try{const{getManualComponent:t}=require("@/router/manualRoutes"),a=t(e);if(a)return console.log(`找到手动映射组件: ${e}`),Promise.resolve(a)}catch(s){console.error("加载手动映射组件时出错:",s)}const t=Object.assign({"../views/attendance/my/index.vue":()=>aa(()=>import("./index-30eacbec.js"),["assets/js/index-30eacbec.js","assets/js/index-f992b0ab.js","assets/js/element-plus-7067fc91.js","assets/js/vue-core-ad22061d.js","assets/js/utils-ebe9136b.js","assets/js/icons-3f8828dd.js","assets/css/index-ec31c4f3.css","assets/js/index-aa3c308e.js","assets/css/index-0d4e1335.css","assets/js/attendance-0d82083c.js","assets/css/index-7185a55e.css"]),"../views/attendance/record/index.vue":()=>aa(()=>Promise.resolve().then(()=>mr),void 0),"../views/attendance/stats/index.vue":()=>aa(()=>import("./index-a38a24fa.js"),["assets/js/index-a38a24fa.js","assets/js/index-f992b0ab.js","assets/js/element-plus-7067fc91.js","assets/js/vue-core-ad22061d.js","assets/js/utils-ebe9136b.js","assets/js/icons-3f8828dd.js","assets/css/index-ec31c4f3.css","assets/js/attendance-0d82083c.js","assets/css/index-86f4f5e9.css"]),"../views/course/add.vue":()=>aa(()=>Promise.resolve().then(()=>Nl),void 0),"../views/course/index.vue":()=>aa(()=>Promise.resolve().then(()=>Wl),void 0),"../views/course/my-courses/index.vue":()=>aa(()=>import("./index-e2219ab0.js"),["assets/js/index-e2219ab0.js","assets/js/index-f992b0ab.js","assets/js/element-plus-7067fc91.js","assets/js/vue-core-ad22061d.js","assets/js/utils-ebe9136b.js","assets/js/icons-3f8828dd.js","assets/css/index-ec31c4f3.css","assets/js/index-aa3c308e.js","assets/css/index-0d4e1335.css","assets/css/index-297ca248.css"]),"../views/course/offering/index.vue":()=>aa(()=>import("./index-27871132.js"),["assets/js/index-27871132.js","assets/js/vue-core-ad22061d.js","assets/js/icons-3f8828dd.js","assets/js/element-plus-7067fc91.js","assets/js/utils-ebe9136b.js","assets/css/index-29001b93.css"]),"../views/course/selection/index.vue":()=>aa(()=>import("./index-10885957.js"),["assets/js/index-10885957.js","assets/js/index-f992b0ab.js","assets/js/element-plus-7067fc91.js","assets/js/vue-core-ad22061d.js","assets/js/utils-ebe9136b.js","assets/js/icons-3f8828dd.js","assets/css/index-ec31c4f3.css","assets/js/index-aa3c308e.js","assets/css/index-0d4e1335.css","assets/css/index-244ab2c1.css"]),"../views/course/teaching/index.vue":()=>aa(()=>import("./index-9b4d3086.js"),["assets/js/index-9b4d3086.js","assets/js/vue-core-ad22061d.js","assets/js/icons-3f8828dd.js","assets/js/element-plus-7067fc91.js","assets/js/utils-ebe9136b.js","assets/css/index-fd2c9266.css"]),"../views/course/teaching/students.vue":()=>aa(()=>import("./students-819f1f71.js"),["assets/js/students-819f1f71.js","assets/js/vue-core-ad22061d.js","assets/js/icons-3f8828dd.js","assets/js/element-plus-7067fc91.js","assets/js/utils-ebe9136b.js","assets/css/students-522e5160.css"]),"../views/dashboard/index.vue":()=>aa(()=>Promise.resolve().then(()=>Uo),void 0),"../views/education/class/index.vue":()=>aa(()=>import("./index-a1a0513f.js"),["assets/js/index-a1a0513f.js","assets/js/index-f992b0ab.js","assets/js/element-plus-7067fc91.js","assets/js/vue-core-ad22061d.js","assets/js/utils-ebe9136b.js","assets/js/icons-3f8828dd.js","assets/css/index-ec31c4f3.css","assets/js/index-aa3c308e.js","assets/css/index-0d4e1335.css","assets/js/major-11c16f9b.js"]),"../views/education/department/index.vue":()=>aa(()=>import("./index-8b8e4699.js"),["assets/js/index-8b8e4699.js","assets/js/index-f992b0ab.js","assets/js/element-plus-7067fc91.js","assets/js/vue-core-ad22061d.js","assets/js/utils-ebe9136b.js","assets/js/icons-3f8828dd.js","assets/css/index-ec31c4f3.css","assets/js/index-aa3c308e.js","assets/css/index-0d4e1335.css"]),"../views/education/major/index.vue":()=>aa(()=>import("./index-e22b80e7.js"),["assets/js/index-e22b80e7.js","assets/js/index-f992b0ab.js","assets/js/element-plus-7067fc91.js","assets/js/vue-core-ad22061d.js","assets/js/utils-ebe9136b.js","assets/js/icons-3f8828dd.js","assets/css/index-ec31c4f3.css","assets/js/index-aa3c308e.js","assets/css/index-0d4e1335.css","assets/js/major-11c16f9b.js"]),"../views/error/403.vue":()=>aa(()=>import("./403-dc114c12.js"),["assets/js/403-dc114c12.js","assets/js/vue-core-ad22061d.js","assets/js/element-plus-7067fc91.js","assets/js/utils-ebe9136b.js","assets/js/icons-3f8828dd.js","assets/css/403-c7cf1f6c.css"]),"../views/error/404.vue":()=>aa(()=>import("./404-82ef1720.js"),["assets/js/404-82ef1720.js","assets/js/vue-core-ad22061d.js","assets/js/element-plus-7067fc91.js","assets/js/utils-ebe9136b.js","assets/js/icons-3f8828dd.js","assets/css/404-e93499e1.css"]),"../views/grade/check.vue":()=>aa(()=>import("./check-108ea1a6.js"),["assets/js/check-108ea1a6.js","assets/js/icons-3f8828dd.js","assets/js/vue-core-ad22061d.js","assets/js/manage-ed44f4cc.js","assets/js/element-plus-7067fc91.js","assets/js/utils-ebe9136b.js","assets/css/check-7d617ba2.css"]),"../views/grade/input/index.vue":()=>aa(()=>Promise.resolve().then(()=>Cr),void 0),"../views/grade/my/index.vue":()=>aa(()=>import("./index-173815f6.js"),["assets/js/index-173815f6.js","assets/js/index-f992b0ab.js","assets/js/element-plus-7067fc91.js","assets/js/vue-core-ad22061d.js","assets/js/utils-ebe9136b.js","assets/js/icons-3f8828dd.js","assets/css/index-ec31c4f3.css","assets/js/index-aa3c308e.js","assets/css/index-0d4e1335.css","assets/css/index-36278b3a.css"]),"../views/grade/stats.vue":()=>aa(()=>import("./stats-7098bdf3.js"),["assets/js/stats-7098bdf3.js","assets/js/icons-3f8828dd.js","assets/js/vue-core-ad22061d.js","assets/js/utils-ebe9136b.js","assets/js/manage-ed44f4cc.js","assets/js/element-plus-7067fc91.js","assets/css/stats-9ec5cc00.css"]),"../views/login/index.vue":()=>aa(()=>import("./index-edce00a6.js"),["assets/js/index-edce00a6.js","assets/js/vue-core-ad22061d.js","assets/js/element-plus-7067fc91.js","assets/js/utils-ebe9136b.js","assets/js/icons-3f8828dd.js","assets/css/index-e662efad.css"]),"../views/message/notice/index.vue":()=>aa(()=>import("./index-121a638f.js"),["assets/js/index-121a638f.js","assets/js/vue-core-ad22061d.js","assets/js/element-plus-7067fc91.js","assets/js/utils-ebe9136b.js","assets/js/icons-3f8828dd.js","assets/css/index-b9ee6eb5.css"]),"../views/message/todo/index.vue":()=>aa(()=>import("./index-4ad3bd59.js"),["assets/js/index-4ad3bd59.js","assets/js/vue-core-ad22061d.js","assets/js/element-plus-7067fc91.js","assets/js/utils-ebe9136b.js","assets/js/icons-3f8828dd.js","assets/css/index-9c7b2f89.css"]),"../views/profile/index.vue":()=>aa(()=>import("./index-c599bb25.js"),["assets/js/index-c599bb25.js","assets/js/icons-3f8828dd.js","assets/js/vue-core-ad22061d.js","assets/js/element-plus-7067fc91.js","assets/js/utils-ebe9136b.js","assets/css/index-cb107ba7.css"]),"../views/redirect/index.vue":()=>aa(()=>import("./index-d19e2a31.js"),["assets/js/index-d19e2a31.js","assets/js/vue-core-ad22061d.js","assets/js/icons-3f8828dd.js","assets/js/utils-ebe9136b.js","assets/js/element-plus-7067fc91.js","assets/css/index-3310ace1.css"]),"../views/selection/manage.vue":()=>aa(()=>import("./manage-26c32bbb.js"),["assets/js/manage-26c32bbb.js","assets/js/element-plus-7067fc91.js","assets/js/vue-core-ad22061d.js","assets/js/utils-ebe9136b.js","assets/js/icons-3f8828dd.js","assets/js/index-f992b0ab.js","assets/css/index-ec31c4f3.css","assets/js/index-aa3c308e.js","assets/css/index-0d4e1335.css","assets/js/manage-ed44f4cc.js","assets/css/manage-d5678d26.css"]),"../views/student/add.vue":()=>aa(()=>Promise.resolve().then(()=>on),void 0),"../views/student/edit.vue":()=>aa(()=>Promise.resolve().then(()=>Rr),void 0),"../views/student/index.vue":()=>aa(()=>Promise.resolve().then(()=>An),void 0),"../views/system/menu/index.vue":()=>aa(()=>import("./index-c8c893b8.js"),["assets/js/index-c8c893b8.js","assets/js/icons-3f8828dd.js","assets/js/vue-core-ad22061d.js","assets/js/element-plus-7067fc91.js","assets/js/utils-ebe9136b.js","assets/css/index-629010aa.css","assets/css/el-text-ac000e7a.css"]),"../views/system/role/index.vue":()=>aa(()=>import("./index-30cbb4f5.js"),["assets/js/index-30cbb4f5.js","assets/js/icons-3f8828dd.js","assets/js/vue-core-ad22061d.js","assets/js/element-plus-7067fc91.js","assets/js/utils-ebe9136b.js","assets/css/index-fd50d51f.css","assets/css/el-text-ac000e7a.css"]),"../views/system/user/index.vue":()=>aa(()=>import("./index-6b487d1b.js"),["assets/js/index-6b487d1b.js","assets/js/icons-3f8828dd.js","assets/js/vue-core-ad22061d.js","assets/js/element-plus-7067fc91.js","assets/js/utils-ebe9136b.js","assets/css/index-c457d2bc.css"]),"../views/teacher/add.vue":()=>aa(()=>Promise.resolve().then(()=>Kn),void 0),"../views/teacher/detail.vue":()=>aa(()=>import("./detail-a3860caf.js"),["assets/js/detail-a3860caf.js","assets/js/vue-core-ad22061d.js","assets/js/element-plus-7067fc91.js","assets/js/utils-ebe9136b.js","assets/js/icons-3f8828dd.js","assets/css/detail-4c383ef4.css"]),"../views/teacher/edit.vue":()=>aa(()=>import("./edit-c3b69c63.js"),["assets/js/edit-c3b69c63.js","assets/js/vue-core-ad22061d.js","assets/js/element-plus-7067fc91.js","assets/js/utils-ebe9136b.js","assets/js/icons-3f8828dd.js","assets/css/edit-7ab333ce.css"]),"../views/teacher/index.vue":()=>aa(()=>Promise.resolve().then(()=>io),void 0)}),a=na(e);console.log(`加载组件，规范化后路径: ${a}`),e.includes("message")&&(console.log("正在加载message相关组件:",e),console.log("可用的message相关模块:"),Object.keys(t).filter(e=>e.includes("message")).forEach(e=>console.log(`- ${e}`)));const l=`../views/${a}.vue`,n=`../views/${a}/index.vue`,o=e.startsWith("message/")?`../views/message/${e.split("/")[1]}/index.vue`:null;if(console.log(`尝试加载路径: ${l} 或 ${n}${o?" 或 "+o:""}`),console.log(`可用模块: ${Object.keys(t).length}`),t[l])return console.log(`找到直接模式组件: ${l}`),t[l]();if(t[n])return console.log(`找到索引模式组件: ${n}`),t[n]();if(o&&t[o])return console.log(`找到消息模式组件: ${o}`),t[o]();const r=oa(e);return r?(console.log("通过findComponentModule找到组件"),r()):(console.error(`组件 ${e} 未找到，尝试过的路径都不存在`),Promise.resolve({render:()=>f("div",{style:{padding:"20px"}},[f("h2","组件加载错误"),f("p",`无法加载组件: ${e}`),f("pre",{style:{color:"red"}},`找不到路径: ${l} 或 ${n}${o?" 或 "+o:""}`)])}))}}function sa(e,t){const a=[];return e.forEach(e=>{const l=s({},e);(function(e,t){return!t.meta||!t.meta.roles||e.some(e=>t.meta.roles.includes(e))})(t,l)&&(l.children&&(l.children=sa(l.children,t)),a.push(l))}),a}function da(e){const t={render:()=>f("div",{style:{padding:"20px"}},[f("h2","页面开发中..."),f("p","该功能模块正在开发中，敬请期待！"),f("pre",{style:{color:"blue",textAlign:"left"}},"调试信息将显示在控制台")])};!function(){const e=Object.assign({"../views/attendance/my/index.vue":()=>aa(()=>import("./index-30eacbec.js"),["assets/js/index-30eacbec.js","assets/js/index-f992b0ab.js","assets/js/element-plus-7067fc91.js","assets/js/vue-core-ad22061d.js","assets/js/utils-ebe9136b.js","assets/js/icons-3f8828dd.js","assets/css/index-ec31c4f3.css","assets/js/index-aa3c308e.js","assets/css/index-0d4e1335.css","assets/js/attendance-0d82083c.js","assets/css/index-7185a55e.css"]),"../views/attendance/record/index.vue":()=>aa(()=>Promise.resolve().then(()=>mr),void 0),"../views/attendance/stats/index.vue":()=>aa(()=>import("./index-a38a24fa.js"),["assets/js/index-a38a24fa.js","assets/js/index-f992b0ab.js","assets/js/element-plus-7067fc91.js","assets/js/vue-core-ad22061d.js","assets/js/utils-ebe9136b.js","assets/js/icons-3f8828dd.js","assets/css/index-ec31c4f3.css","assets/js/attendance-0d82083c.js","assets/css/index-86f4f5e9.css"]),"../views/course/add.vue":()=>aa(()=>Promise.resolve().then(()=>Nl),void 0),"../views/course/index.vue":()=>aa(()=>Promise.resolve().then(()=>Wl),void 0),"../views/course/my-courses/index.vue":()=>aa(()=>import("./index-e2219ab0.js"),["assets/js/index-e2219ab0.js","assets/js/index-f992b0ab.js","assets/js/element-plus-7067fc91.js","assets/js/vue-core-ad22061d.js","assets/js/utils-ebe9136b.js","assets/js/icons-3f8828dd.js","assets/css/index-ec31c4f3.css","assets/js/index-aa3c308e.js","assets/css/index-0d4e1335.css","assets/css/index-297ca248.css"]),"../views/course/offering/index.vue":()=>aa(()=>import("./index-27871132.js"),["assets/js/index-27871132.js","assets/js/vue-core-ad22061d.js","assets/js/icons-3f8828dd.js","assets/js/element-plus-7067fc91.js","assets/js/utils-ebe9136b.js","assets/css/index-29001b93.css"]),"../views/course/selection/index.vue":()=>aa(()=>import("./index-10885957.js"),["assets/js/index-10885957.js","assets/js/index-f992b0ab.js","assets/js/element-plus-7067fc91.js","assets/js/vue-core-ad22061d.js","assets/js/utils-ebe9136b.js","assets/js/icons-3f8828dd.js","assets/css/index-ec31c4f3.css","assets/js/index-aa3c308e.js","assets/css/index-0d4e1335.css","assets/css/index-244ab2c1.css"]),"../views/course/teaching/index.vue":()=>aa(()=>import("./index-9b4d3086.js"),["assets/js/index-9b4d3086.js","assets/js/vue-core-ad22061d.js","assets/js/icons-3f8828dd.js","assets/js/element-plus-7067fc91.js","assets/js/utils-ebe9136b.js","assets/css/index-fd2c9266.css"]),"../views/course/teaching/students.vue":()=>aa(()=>import("./students-819f1f71.js"),["assets/js/students-819f1f71.js","assets/js/vue-core-ad22061d.js","assets/js/icons-3f8828dd.js","assets/js/element-plus-7067fc91.js","assets/js/utils-ebe9136b.js","assets/css/students-522e5160.css"]),"../views/dashboard/index.vue":()=>aa(()=>Promise.resolve().then(()=>Uo),void 0),"../views/education/class/index.vue":()=>aa(()=>import("./index-a1a0513f.js"),["assets/js/index-a1a0513f.js","assets/js/index-f992b0ab.js","assets/js/element-plus-7067fc91.js","assets/js/vue-core-ad22061d.js","assets/js/utils-ebe9136b.js","assets/js/icons-3f8828dd.js","assets/css/index-ec31c4f3.css","assets/js/index-aa3c308e.js","assets/css/index-0d4e1335.css","assets/js/major-11c16f9b.js"]),"../views/education/department/index.vue":()=>aa(()=>import("./index-8b8e4699.js"),["assets/js/index-8b8e4699.js","assets/js/index-f992b0ab.js","assets/js/element-plus-7067fc91.js","assets/js/vue-core-ad22061d.js","assets/js/utils-ebe9136b.js","assets/js/icons-3f8828dd.js","assets/css/index-ec31c4f3.css","assets/js/index-aa3c308e.js","assets/css/index-0d4e1335.css"]),"../views/education/major/index.vue":()=>aa(()=>import("./index-e22b80e7.js"),["assets/js/index-e22b80e7.js","assets/js/index-f992b0ab.js","assets/js/element-plus-7067fc91.js","assets/js/vue-core-ad22061d.js","assets/js/utils-ebe9136b.js","assets/js/icons-3f8828dd.js","assets/css/index-ec31c4f3.css","assets/js/index-aa3c308e.js","assets/css/index-0d4e1335.css","assets/js/major-11c16f9b.js"]),"../views/error/403.vue":()=>aa(()=>import("./403-dc114c12.js"),["assets/js/403-dc114c12.js","assets/js/vue-core-ad22061d.js","assets/js/element-plus-7067fc91.js","assets/js/utils-ebe9136b.js","assets/js/icons-3f8828dd.js","assets/css/403-c7cf1f6c.css"]),"../views/error/404.vue":()=>aa(()=>import("./404-82ef1720.js"),["assets/js/404-82ef1720.js","assets/js/vue-core-ad22061d.js","assets/js/element-plus-7067fc91.js","assets/js/utils-ebe9136b.js","assets/js/icons-3f8828dd.js","assets/css/404-e93499e1.css"]),"../views/grade/check.vue":()=>aa(()=>import("./check-108ea1a6.js"),["assets/js/check-108ea1a6.js","assets/js/icons-3f8828dd.js","assets/js/vue-core-ad22061d.js","assets/js/manage-ed44f4cc.js","assets/js/element-plus-7067fc91.js","assets/js/utils-ebe9136b.js","assets/css/check-7d617ba2.css"]),"../views/grade/input/index.vue":()=>aa(()=>Promise.resolve().then(()=>Cr),void 0),"../views/grade/my/index.vue":()=>aa(()=>import("./index-173815f6.js"),["assets/js/index-173815f6.js","assets/js/index-f992b0ab.js","assets/js/element-plus-7067fc91.js","assets/js/vue-core-ad22061d.js","assets/js/utils-ebe9136b.js","assets/js/icons-3f8828dd.js","assets/css/index-ec31c4f3.css","assets/js/index-aa3c308e.js","assets/css/index-0d4e1335.css","assets/css/index-36278b3a.css"]),"../views/grade/stats.vue":()=>aa(()=>import("./stats-7098bdf3.js"),["assets/js/stats-7098bdf3.js","assets/js/icons-3f8828dd.js","assets/js/vue-core-ad22061d.js","assets/js/utils-ebe9136b.js","assets/js/manage-ed44f4cc.js","assets/js/element-plus-7067fc91.js","assets/css/stats-9ec5cc00.css"]),"../views/login/index.vue":()=>aa(()=>import("./index-edce00a6.js"),["assets/js/index-edce00a6.js","assets/js/vue-core-ad22061d.js","assets/js/element-plus-7067fc91.js","assets/js/utils-ebe9136b.js","assets/js/icons-3f8828dd.js","assets/css/index-e662efad.css"]),"../views/message/notice/index.vue":()=>aa(()=>import("./index-121a638f.js"),["assets/js/index-121a638f.js","assets/js/vue-core-ad22061d.js","assets/js/element-plus-7067fc91.js","assets/js/utils-ebe9136b.js","assets/js/icons-3f8828dd.js","assets/css/index-b9ee6eb5.css"]),"../views/message/todo/index.vue":()=>aa(()=>import("./index-4ad3bd59.js"),["assets/js/index-4ad3bd59.js","assets/js/vue-core-ad22061d.js","assets/js/element-plus-7067fc91.js","assets/js/utils-ebe9136b.js","assets/js/icons-3f8828dd.js","assets/css/index-9c7b2f89.css"]),"../views/profile/index.vue":()=>aa(()=>import("./index-c599bb25.js"),["assets/js/index-c599bb25.js","assets/js/icons-3f8828dd.js","assets/js/vue-core-ad22061d.js","assets/js/element-plus-7067fc91.js","assets/js/utils-ebe9136b.js","assets/css/index-cb107ba7.css"]),"../views/redirect/index.vue":()=>aa(()=>import("./index-d19e2a31.js"),["assets/js/index-d19e2a31.js","assets/js/vue-core-ad22061d.js","assets/js/icons-3f8828dd.js","assets/js/utils-ebe9136b.js","assets/js/element-plus-7067fc91.js","assets/css/index-3310ace1.css"]),"../views/selection/manage.vue":()=>aa(()=>import("./manage-26c32bbb.js"),["assets/js/manage-26c32bbb.js","assets/js/element-plus-7067fc91.js","assets/js/vue-core-ad22061d.js","assets/js/utils-ebe9136b.js","assets/js/icons-3f8828dd.js","assets/js/index-f992b0ab.js","assets/css/index-ec31c4f3.css","assets/js/index-aa3c308e.js","assets/css/index-0d4e1335.css","assets/js/manage-ed44f4cc.js","assets/css/manage-d5678d26.css"]),"../views/student/add.vue":()=>aa(()=>Promise.resolve().then(()=>on),void 0),"../views/student/edit.vue":()=>aa(()=>Promise.resolve().then(()=>Rr),void 0),"../views/student/index.vue":()=>aa(()=>Promise.resolve().then(()=>An),void 0),"../views/system/menu/index.vue":()=>aa(()=>import("./index-c8c893b8.js"),["assets/js/index-c8c893b8.js","assets/js/icons-3f8828dd.js","assets/js/vue-core-ad22061d.js","assets/js/element-plus-7067fc91.js","assets/js/utils-ebe9136b.js","assets/css/index-629010aa.css","assets/css/el-text-ac000e7a.css"]),"../views/system/role/index.vue":()=>aa(()=>import("./index-30cbb4f5.js"),["assets/js/index-30cbb4f5.js","assets/js/icons-3f8828dd.js","assets/js/vue-core-ad22061d.js","assets/js/element-plus-7067fc91.js","assets/js/utils-ebe9136b.js","assets/css/index-fd50d51f.css","assets/css/el-text-ac000e7a.css"]),"../views/system/user/index.vue":()=>aa(()=>import("./index-6b487d1b.js"),["assets/js/index-6b487d1b.js","assets/js/icons-3f8828dd.js","assets/js/vue-core-ad22061d.js","assets/js/element-plus-7067fc91.js","assets/js/utils-ebe9136b.js","assets/css/index-c457d2bc.css"]),"../views/teacher/add.vue":()=>aa(()=>Promise.resolve().then(()=>Kn),void 0),"../views/teacher/detail.vue":()=>aa(()=>import("./detail-a3860caf.js"),["assets/js/detail-a3860caf.js","assets/js/vue-core-ad22061d.js","assets/js/element-plus-7067fc91.js","assets/js/utils-ebe9136b.js","assets/js/icons-3f8828dd.js","assets/css/detail-4c383ef4.css"]),"../views/teacher/edit.vue":()=>aa(()=>import("./edit-c3b69c63.js"),["assets/js/edit-c3b69c63.js","assets/js/vue-core-ad22061d.js","assets/js/element-plus-7067fc91.js","assets/js/utils-ebe9136b.js","assets/js/icons-3f8828dd.js","assets/css/edit-7ab333ce.css"]),"../views/teacher/index.vue":()=>aa(()=>Promise.resolve().then(()=>io),void 0)});console.log("===== 组件加载调试 ====="),console.log(`总共找到 ${Object.keys(e).length} 个组件`);const t={};Object.keys(e).forEach(e=>{const a=e.match(/\.\.\/views\/([^/]+)/);if(a&&a[1]){const l=a[1];t[l]=t[l]||[],t[l].push(e)}}),Object.keys(t).forEach(e=>{console.log(`${e}相关组件 (${t[e].length}):`,t[e])}),console.log("===== 目录结构分析 =====");const a=Object.keys(e).filter(e=>e.match(/\.\.\/views\/[^/]+\/[^/]+\.vue$/)).length,l=Object.keys(e).filter(e=>e.match(/\.\.\/views\/[^/]+\/[^/]+\/index\.vue$/)).length;console.log(`直接文件模式数量 (xxx.vue): ${a}`),console.log(`索引文件模式数量 (xxx/index.vue): ${l}`),console.log("推荐的结构模式: "+(a>=l?"直接文件模式":"索引文件模式")),console.log("===== 路径加载测试 ====="),["course/add","student/add","teacher/add","attendance/record","system/user"].forEach(t=>{const a=[`../views/${t}.vue`,`../views/${t}/index.vue`];console.log(`测试路径 "${t}" 可能的实际路径:`),a.forEach(t=>{console.log(`- ${t}: ${e[t]?"存在":"不存在"}`)});const l=oa(t);console.log("使用统一加载器结果: "+(l?"成功":"失败"))})}();const a={};e.forEach(e=>{a[e.parentId]||(a[e.parentId]=[]),a[e.parentId].push(e)});const l=function e(l){const n=[],o=a[l];return o?(o.forEach(a=>{if("F"===a.menuType)return;if(1===a.visible)return;const l=a.path||"",o=l.startsWith("/")?l:`/${l}`,r={path:o,name:o?o.replace(/\//g,"-").slice(1):"",component:null,meta:{title:a.menuName,icon:a.icon||"",hidden:1===a.visible,keepAlive:0===a.isCache}};if("M"===a.menuType){r.component=Ja;const t=e(a.id);t.length>0&&(r.children=t,r.redirect||(r.redirect=t[0].path))}else if("C"===a.menuType)if(a.component)if("Layout"===a.component)r.component=Ja;else{console.log(`[路由生成] 处理菜单: ${a.menuName}, ID: ${a.id}, 路径: ${o}, 组件: ${a.component}`);try{const e=function(e){if(!e)return null;let t=e;return t.endsWith(".vue")&&(t=t.slice(0,-4)),la[t]||t}(a.component),t=oa(e);if(t)r.component=t,console.log(`[路由生成] 成功加载组件: ${a.menuName} -> ${e}`);else{const t=`../views/${e}.vue`;r.component=()=>aa(()=>import(t),[]).then(e=>(console.log(`[路由生成] 动态导入组件成功: ${t}`),e)).catch(a=>(console.error(`[路由生成] 动态导入组件失败: ${t}`,a),{render:()=>f("div",[f("h2","组件加载失败"),f("p",`无法加载组件: ${e}`),f("pre",{style:{color:"red"}},`错误: ${a.message}`)])}))}}catch(s){console.error(`[路由生成] 加载组件错误: ${a.component}`,s),r.component=t}}else console.warn(`[路由生成] 菜单[${a.menuName}]没有设置组件路径, 使用临时组件`),r.component=t;n.push(r)}),n):n}(0);return function e(t){t.forEach(t=>{t.path&&!t.path.startsWith("/")&&(t.path=`/${t.path}`),t.redirect&&"string"==typeof t.redirect&&!t.redirect.startsWith("/")&&(t.redirect=`/${t.redirect}`),t.children&&t.children.length>0&&e(t.children)})}(l),l}const ia=u("permission",{state:()=>({routes:[],addRoutes:[]}),getters:{getRoutes:e=>e.routes,getAddRoutes:e=>e.addRoutes},actions:{generateRoutes(){return i(this,null,function*(){const e=pa().roles;console.log("权限管理 - 开始生成路由, 用户角色:",e);try{const t=yield qt({url:"/auth/routes",method:"get"});console.log("权限管理 - 从后端获取菜单数据:",t.data);let a=[];if(t.data&&Array.isArray(t.data)){const l=da(t.data);console.log("权限管理 - 转换后的路由:",l),a=sa(l,e)}else console.warn("权限管理 - 后端未返回有效菜单数据，使用前端静态路由"),a=sa(Qa,e);return this.addRoutes=a,this.routes=Ka.concat(a),a}catch(t){console.error("权限管理 - 获取菜单失败:",t),console.warn("权限管理 - 降级使用前端静态路由");const a=sa(Qa,e);return this.addRoutes=a,this.routes=Ka.concat(a),a}})},resetRoutes(){this.routes=[],this.addRoutes=[]}},persist:{enabled:!1}}),ua="data:image/png;base64,";function ca(e){if(!e)return"";if(e.startsWith("http://")||e.startsWith("https://"))return e;if((e=>e&&(e.startsWith("/src/")||e.startsWith("/assets/")))(e))return e;if((e=>e&&e.startsWith("/")&&!e.startsWith("//")&&!e.startsWith("/api")&&!e.startsWith("http"))(e)){return`/api${e.startsWith("/")?e:`/${e}`}`}return e}const pa=u("user",{state:()=>({token:Mt(),name:"",avatar:"",roles:[],permissions:[],userId:null,userInfo:{avatar:ua}}),getters:{userRoles:e=>e.roles,isAdmin:e=>e.roles.includes("admin"),isTeacher:e=>e.roles.includes("teacher"),isStudent:e=>e.roles.includes("student")},actions:{login(e){return i(this,null,function*(){try{const{username:a,password:l}=e,n=yield(t={username:a.trim(),password:l},qt({url:"/auth/login",method:"post",data:t})),{token:o}=n.data;return function(e){localStorage.setItem(zt,e),jt.set(zt,e)}(o),this.token=o,Promise.resolve()}catch(a){return Promise.reject(a)}var t})},getInfo(){return i(this,null,function*(){try{const e=yield Yt();console.log("获取用户信息接口返回数据:",e.data);const{roles:t,name:a,avatar:l,permissions:n,userId:o}=e.data;if(!t||t.length<=0)throw console.error("用户角色不能为空！",t),new Error("用户角色不能为空！");return console.info("获取到用户角色:",t),this.roles=t,this.name=a,this.avatar=l?ca(l):ua,this.permissions=n,this.userId=o,this.userInfo=d(s({},e.data),{avatar:l?ca(l):ua}),Promise.resolve(e)}catch(e){return console.error("获取用户信息失败:",e),Promise.reject(e)}})},hasPermission(e){return!(!this.permissions||0===this.permissions.length)&&this.permissions.includes(e)},hasRole(e){return!(!this.roles||0===this.roles.length)&&this.roles.includes(e)},updateUserInfo(e){e.username&&(this.userInfo.username=e.username),e.name&&(this.name=e.name,this.userInfo.name=e.name),e.avatar&&(this.avatar=ca(e.avatar),this.userInfo.avatar=ca(e.avatar)),e.email&&(this.userInfo.email=e.email),e.phone&&(this.userInfo.phone=e.phone),this.userInfo=s(s({},this.userInfo),e),console.log("用户信息已更新:",this.userInfo)},logout(){return i(this,null,function*(){try{yield qt({url:"/auth/logout",method:"post"});const e=ia();return this.resetState(),e.resetRoutes(),el.push("/login"),Promise.resolve()}catch(e){return Promise.reject(e)}})},resetToken(){Bt(),this.token="",this.roles=[],this.permissions=[]},resetState(){this.token="",this.name="",this.avatar="",this.roles=[],this.permissions=[],this.userId=null,this.userInfo={avatar:ua},Bt(),function(){var e;const t=(null==(e=null==window?void 0:window.__vueRouter__)?void 0:e._routes)||[];t.length>0&&(console.log("清理路由缓存:",t.length),t.length=0);window.__vite_plugin_vue_router_cache__&&(window.__vite_plugin_vue_router_cache__={});console.log("路由缓存已清理")}()}},persist:{key:"user-store",storage:localStorage,paths:["token","roles","permissions","userId","name","avatar","userInfo"]}}),ma="data:image/png;base64,",ha=(e,t)=>{const a=e.__vccOpts||e;for(const[l,n]of t)a[l]=n;return a},fa={class:"navbar"},va={class:"left-area"},ga={class:"right-menu"},_a={class:"avatar-wrapper"},ba={class:"user-name"},ya=ha({__name:"Navbar",setup(e){const t=v("showSettings"),a=g();_();const l=Nt(),n=pa(),o=b(()=>l.sidebar),r=b(()=>n.name||"未登录"),s=b(()=>{const e=n.avatar||ma;return e.startsWith("/src/")||e.startsWith("/assets/")?e:ca(e)}),d=y([]);w(()=>a.path,()=>{if(a.path.startsWith("/dashboard"))return void(d.value=[]);const e=a.matched.filter(e=>e.meta&&e.meta.title);d.value=e.map(e=>({path:e.path,title:e.meta.title}))},{immediate:!0});const u=()=>{l.toggleSidebar()},c=()=>{t.value=!0},f=()=>{document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():document.documentElement.requestFullscreen()},$=()=>{Ae.confirm("确定要退出系统吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>i(this,null,function*(){yield n.logout()})).catch(()=>{})};return(e,t)=>{const a=Re,l=Le,n=Se,i=m("FullScreen"),v=je,g=m("Setting"),_=Ne,b=m("ArrowDown"),y=m("User"),w=m("router-link"),A=Ue,R=m("SwitchButton"),L=ze,S=Me;return h(),V("div",fa,[x("div",va,[x("div",{class:"hamburger",onClick:u},[k(a,{size:24,class:E({"is-active":o.value.opened})},{default:I(()=>[(h(),p(C(o.value.opened?"Expand":"Fold")))]),_:1},8,["class"])]),t[2]||(t[2]=D()),k(n,{separator:"/"},{default:I(()=>[k(l,{to:{path:"/"}},{default:I(()=>t[0]||(t[0]=[D("首页")])),_:1}),t[1]||(t[1]=D()),(h(!0),V(P,null,T(d.value,(e,t)=>(h(),p(l,{key:t,to:e.path},{default:I(()=>[D(O(e.title),1)]),_:2},1032,["to"]))),128))]),_:1})]),t[11]||(t[11]=D()),x("div",ga,[x("div",{class:"right-menu-item",onClick:f},[k(v,{content:"全屏",placement:"bottom"},{default:I(()=>[k(a,{size:20},{default:I(()=>[k(i)]),_:1})]),_:1})]),t[9]||(t[9]=D()),x("div",{class:"right-menu-item",onClick:c},[k(v,{content:"系统设置",placement:"bottom"},{default:I(()=>[k(a,{size:20},{default:I(()=>[k(g)]),_:1})]),_:1})]),t[10]||(t[10]=D()),k(S,{class:"avatar-container",trigger:"click"},{dropdown:I(()=>[k(L,null,{default:I(()=>[k(A,null,{default:I(()=>[k(w,{to:"/profile"},{default:I(()=>[k(a,null,{default:I(()=>[k(y)]),_:1}),t[5]||(t[5]=D("\n                个人中心\n              "))]),_:1})]),_:1}),t[7]||(t[7]=D()),k(A,{divided:"",onClick:$},{default:I(()=>[k(a,null,{default:I(()=>[k(R)]),_:1}),t[6]||(t[6]=D("\n              退出登录\n            "))]),_:1})]),_:1})]),default:I(()=>[x("div",_a,[k(_,{size:32,src:s.value},null,8,["src"]),t[3]||(t[3]=D()),x("span",ba,O(r.value),1),t[4]||(t[4]=D()),k(a,null,{default:I(()=>[k(b)]),_:1})]),t[8]||(t[8]=D())]),_:1})])])}}},[["__scopeId","data-v-13d8fa84"]]);function wa(e){return/^(https?:|mailto:|tel:)/.test(e)}const Va={__name:"Link",props:{to:{type:String,required:!0}},setup(e){const t=e,a=b(()=>wa(t.to)?"a":"router-link"),l=b(()=>{if(console.log("生成链接属性, 目标路径:",t.to),wa(t.to))return{href:t.to,target:"_blank",rel:"noopener"};{const e=t.to.replace(/\/+/g,"/");return console.log("处理后的路径:",e),{to:e}}});return(e,t)=>(h(),p(C(a.value),A(R(l.value)),{default:I(()=>[$(e.$slots,"default")]),_:3},16))}};function xa(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function ka(e,t){for(var a,l="",n=0,o=-1,r=0,s=0;s<=e.length;++s){if(s<e.length)a=e.charCodeAt(s);else{if(47===a)break;a=47}if(47===a){if(o===s-1||1===r);else if(o!==s-1&&2===r){if(l.length<2||2!==n||46!==l.charCodeAt(l.length-1)||46!==l.charCodeAt(l.length-2))if(l.length>2){var d=l.lastIndexOf("/");if(d!==l.length-1){-1===d?(l="",n=0):n=(l=l.slice(0,d)).length-1-l.lastIndexOf("/"),o=s,r=0;continue}}else if(2===l.length||1===l.length){l="",n=0,o=s,r=0;continue}t&&(l.length>0?l+="/..":l="..",n=2)}else l.length>0?l+="/"+e.slice(o+1,s):l=e.slice(o+1,s),n=s-o-1;o=s,r=0}else 46===a&&-1!==r?++r:r=-1}return l}var Ia={resolve:function(){for(var e,t="",a=!1,l=arguments.length-1;l>=-1&&!a;l--){var n;l>=0?n=arguments[l]:(void 0===e&&(e=process.cwd()),n=e),xa(n),0!==n.length&&(t=n+"/"+t,a=47===n.charCodeAt(0))}return t=ka(t,!a),a?t.length>0?"/"+t:"/":t.length>0?t:"."},normalize:function(e){if(xa(e),0===e.length)return".";var t=47===e.charCodeAt(0),a=47===e.charCodeAt(e.length-1);return 0!==(e=ka(e,!t)).length||t||(e="."),e.length>0&&a&&(e+="/"),t?"/"+e:e},isAbsolute:function(e){return xa(e),e.length>0&&47===e.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var e,t=0;t<arguments.length;++t){var a=arguments[t];xa(a),a.length>0&&(void 0===e?e=a:e+="/"+a)}return void 0===e?".":Ia.normalize(e)},relative:function(e,t){if(xa(e),xa(t),e===t)return"";if((e=Ia.resolve(e))===(t=Ia.resolve(t)))return"";for(var a=1;a<e.length&&47===e.charCodeAt(a);++a);for(var l=e.length,n=l-a,o=1;o<t.length&&47===t.charCodeAt(o);++o);for(var r=t.length-o,s=n<r?n:r,d=-1,i=0;i<=s;++i){if(i===s){if(r>s){if(47===t.charCodeAt(o+i))return t.slice(o+i+1);if(0===i)return t.slice(o+i)}else n>s&&(47===e.charCodeAt(a+i)?d=i:0===i&&(d=0));break}var u=e.charCodeAt(a+i);if(u!==t.charCodeAt(o+i))break;47===u&&(d=i)}var c="";for(i=a+d+1;i<=l;++i)i!==l&&47!==e.charCodeAt(i)||(0===c.length?c+="..":c+="/..");return c.length>0?c+t.slice(o+d):(o+=d,47===t.charCodeAt(o)&&++o,t.slice(o))},_makeLong:function(e){return e},dirname:function(e){if(xa(e),0===e.length)return".";for(var t=e.charCodeAt(0),a=47===t,l=-1,n=!0,o=e.length-1;o>=1;--o)if(47===(t=e.charCodeAt(o))){if(!n){l=o;break}}else n=!1;return-1===l?a?"/":".":a&&1===l?"//":e.slice(0,l)},basename:function(e,t){if(void 0!==t&&"string"!=typeof t)throw new TypeError('"ext" argument must be a string');xa(e);var a,l=0,n=-1,o=!0;if(void 0!==t&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";var r=t.length-1,s=-1;for(a=e.length-1;a>=0;--a){var d=e.charCodeAt(a);if(47===d){if(!o){l=a+1;break}}else-1===s&&(o=!1,s=a+1),r>=0&&(d===t.charCodeAt(r)?-1===--r&&(n=a):(r=-1,n=s))}return l===n?n=s:-1===n&&(n=e.length),e.slice(l,n)}for(a=e.length-1;a>=0;--a)if(47===e.charCodeAt(a)){if(!o){l=a+1;break}}else-1===n&&(o=!1,n=a+1);return-1===n?"":e.slice(l,n)},extname:function(e){xa(e);for(var t=-1,a=0,l=-1,n=!0,o=0,r=e.length-1;r>=0;--r){var s=e.charCodeAt(r);if(47!==s)-1===l&&(n=!1,l=r+1),46===s?-1===t?t=r:1!==o&&(o=1):-1!==t&&(o=-1);else if(!n){a=r+1;break}}return-1===t||-1===l||0===o||1===o&&t===l-1&&t===a+1?"":e.slice(t,l)},format:function(e){if(null===e||"object"!=typeof e)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return function(e,t){var a=t.dir||t.root,l=t.base||(t.name||"")+(t.ext||"");return a?a===t.root?a+l:a+e+l:l}("/",e)},parse:function(e){xa(e);var t={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return t;var a,l=e.charCodeAt(0),n=47===l;n?(t.root="/",a=1):a=0;for(var o=-1,r=0,s=-1,d=!0,i=e.length-1,u=0;i>=a;--i)if(47!==(l=e.charCodeAt(i)))-1===s&&(d=!1,s=i+1),46===l?-1===o?o=i:1!==u&&(u=1):-1!==o&&(u=-1);else if(!d){r=i+1;break}return-1===o||-1===s||0===u||1===u&&o===s-1&&o===r+1?-1!==s&&(t.base=t.name=0===r&&n?e.slice(1,s):e.slice(r,s)):(0===r&&n?(t.name=e.slice(1,o),t.base=e.slice(1,s)):(t.name=e.slice(r,o),t.base=e.slice(r,s)),t.ext=e.slice(o,s)),r>0?t.dir=e.slice(0,r-1):n&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};Ia.posix=Ia;const Ca={key:0},Ea={__name:"SidebarItem",props:{item:{type:Object,required:!0},basePath:{type:String,default:""},isCollapse:{type:Boolean,default:!1}},setup(e){const t=e,a=e=>{if(wa(e))return e;if(wa(t.basePath))return t.basePath;if(console.log("解析路径 - 基础路径:",t.basePath,"路由路径:",e),e.startsWith("/"))return console.log("子路由是绝对路径，直接使用:",e),e;let a;return a=t.basePath.endsWith("/")||""===e?t.basePath+e:`${t.basePath}/${e}`,a=a.replace(/\/+/g,"/"),console.log("解析结果:",a),a};return(t,l)=>{const n=Re,o=Be,r=m("sidebar-item",!0),s=qe;return e.item.hidden?L("",!0):(h(),V("div",Ca,[(d=e.item,!d.children||0===d.children.length||1===d.children.length&&d.children[0].hidden?(h(),V(P,{key:0},[e.item.meta?(h(),p(Va,{key:0,to:a(e.item.path)},{default:I(()=>[k(o,{index:a(e.item.path)},{title:I(()=>[x("span",null,O(e.item.meta.title),1)]),default:I(()=>[e.item.meta.icon?(h(),p(n,{key:0},{default:I(()=>[(h(),p(C(e.item.meta.icon)))]),_:1})):L("",!0),l[0]||(l[0]=D())]),_:1},8,["index"])]),_:1},8,["to"])):L("",!0)],64)):(h(),p(s,{key:1,index:a(e.item.path),"popper-append-to-body":""},{title:I(()=>[e.item.meta&&e.item.meta.icon?(h(),p(n,{key:0},{default:I(()=>[(h(),p(C(e.item.meta.icon)))]),_:1})):L("",!0),l[1]||(l[1]=D()),x("span",null,O(e.item.meta?e.item.meta.title:""),1)]),default:I(()=>[l[2]||(l[2]=D()),(h(!0),V(P,null,T(e.item.children,t=>(h(),p(r,{key:t.path,"is-collapse":e.isCollapse,item:t,"base-path":a(e.item.path)},null,8,["is-collapse","item","base-path"]))),128))]),_:1},8,["index"])))]));var d}}},Da=ha({__name:"index",setup(e){const t=g(),a=_(),l=Nt(),n=ia(),o=b(()=>!l.sidebar.opened),r=b(()=>{const e=n.routes.filter(e=>!("/"===e.path||"/dashboard"===e.path||e.hidden));return console.log("侧边栏过滤后的路由:",e),e.forEach(e=>{var t;console.log(`路由: ${e.path}, 名称: ${e.name||"无名称"}, 子路由数: ${(null==(t=e.children)?void 0:t.length)||0}`),e.children&&e.children.forEach(t=>{console.log(`  子路由: ${t.path}, 完整路径: ${e.path}/${t.path}, 名称: ${t.name||"无名称"}`)})}),e}),s=b(()=>{const{meta:e,path:a}=t;return e.activeMenu?e.activeMenu:a});return(e,t)=>{const l=Re,n=Be,d=Ye;return h(),p(d,{"default-active":s.value,collapse:o.value,"unique-opened":!0,"collapse-transition":!1,mode:"vertical","background-color":"#001529","text-color":"hsla(0,0%,100%,.65)","active-text-color":"#ffffff",class:"sidebar-menu"},{default:I(()=>[k(n,{index:"/dashboard",onClick:t[0]||(t[0]=e=>{return t="/dashboard",void a.push(t);var t})},{title:I(()=>t[1]||(t[1]=[x("span",null,"首页",-1)])),default:I(()=>[k(l,null,{default:I(()=>[k(S(te))]),_:1}),t[2]||(t[2]=D())]),_:1}),t[3]||(t[3]=D()),t[4]||(t[4]=x("div",{class:"menu-divider"},null,-1)),t[5]||(t[5]=D()),(h(!0),V(P,null,T(r.value,e=>(h(),p(Ea,{key:e.path,item:e,"base-path":e.path,"is-collapse":o.value},null,8,["item","base-path","is-collapse"]))),128))]),_:1},8,["default-active","collapse"])}}},[["__scopeId","data-v-bbd713b5"]]),Pa={class:"app-main"},Ta=ha({__name:"AppMain",setup(e){const t=g(),a=Nt(),l=b(()=>a.cachedViews),n=b(()=>t.meta.usePathKey?t.path:t.fullPath);return(e,t)=>{const a=m("router-view");return h(),V("section",Pa,[k(a,null,{default:I(({Component:e})=>[k(j,{name:"fade-transform",mode:"out-in"},{default:I(()=>[(h(),p(N,{include:l.value},[(h(),p(C(e),{key:n.value}))],1032,["include"]))]),_:2},1024)]),_:1})])}}},[["__scopeId","data-v-01ae5bb8"]]),Oa={class:"tags-view-container"},$a=["onClick","onContextmenu"],Aa=ha({__name:"index",setup(e){const t=g(),a=_(),l=Nt(),n=y(null),o=b(()=>l.visitedViews),r=e=>t.path===e,s=e=>e.meta&&e.meta.affix,d=()=>{if(n.value){const e=document.querySelector(".tags-view-item.active");if(e){const t=n.value.$el.offsetWidth,a=document.querySelectorAll(".tags-view-item");let l=0,o=0;for(let n=0;n<a.length&&(l+=a[n].offsetWidth,a[n]!==e);n++)o+=a[n].offsetWidth;l>t&&n.value.setScrollLeft(o-t/2+e.offsetWidth/2)}}},i=y(!1),u=y(0),f=y(0),v=y({}),C=()=>{i.value=!1},$=e=>{let t="/dashboard";if(r(e.path)){const n=A(o.value,e);n&&(t=n.path),a.push(t).then(()=>{l.delVisitedView(e),l.delCachedView(e)}).catch(e=>{console.error("关闭标签导航失败:",e),a.push("/dashboard")})}else l.delVisitedView(e),l.delCachedView(e)},A=(e,t)=>{const a=e.findIndex(e=>e.path===t.path);return a===e.length-1?a>0?e[a-1]:null:e[a+1]},R=()=>{const e=v.value.path;e!==t.path?a.push(e).then(()=>{l.delOthersVisitedViews(v.value),l.delOthersCachedViews(v.value)}).catch(e=>{console.error("关闭其他标签导航失败:",e),a.push("/dashboard")}):(l.delOthersVisitedViews(v.value),l.delOthersCachedViews(v.value))},S=()=>{a.push("/dashboard").then(()=>{l.delAllVisitedViews(),l.delAllCachedViews()}).catch(e=>{console.error("关闭所有标签导航失败:",e)})};return w(t,e=>{e.path.startsWith("/redirect/")||(()=>{const{name:e,path:a,meta:n}=t;e&&(l.addVisitedView(t),l.addCachedView(t),Y(()=>{d()}))})()},{immediate:!0}),c(()=>{document.addEventListener("click",C)}),U(()=>{document.removeEventListener("click",C)}),(e,d)=>{const c=m("HomeFilled"),g=Re,_=m("router-link"),b=m("Close"),y=Fe;return h(),V("div",Oa,[k(y,{class:"tags-view-wrapper",ref_key:"scrollbarRef",ref:n,"wrap-class":"scrollbar-wrapper",native:!1},{default:I(()=>[x("div",{class:E(["tags-view-item",{active:r("/dashboard")}])},[k(_,{to:"/dashboard"},{default:I(()=>[k(g,null,{default:I(()=>[k(c)]),_:1}),d[2]||(d[2]=D()),d[3]||(d[3]=x("span",null,"首页",-1))]),_:1})],2),d[5]||(d[5]=D()),(h(!0),V(P,null,T(o.value,e=>(h(),V("div",{key:e.path,class:E(["tags-view-item",{active:r(e.path)}]),onClick:l=>(e=>{e.path!==t.path&&a.push(e.path).catch(e=>{console.error("导航失败:",e),a.push("/dashboard")})})(e),onContextmenu:z(t=>((e,t)=>{const a=e.target.getBoundingClientRect().left,l=e.target.offsetWidth,n=window.innerWidth-105,o=a+l/2;f.value=o>n?n:o,u.value=e.target.getBoundingClientRect().top+20,i.value=!0,v.value=t})(t,e),["prevent"])},[k(_,{to:{path:e.path}},{default:I(()=>[x("span",null,O(e.title),1),d[4]||(d[4]=D()),s(e)?L("",!0):(h(),p(g,{key:0,onClick:z(t=>$(e),["stop","prevent"]),class:"close-icon"},{default:I(()=>[k(b)]),_:2},1032,["onClick"]))]),_:2},1032,["to"])],42,$a))),128))]),_:1},512),d[9]||(d[9]=D()),M(x("ul",{style:q({left:f.value+"px",top:u.value+"px"}),class:"contextmenu"},[x("li",{onClick:d[0]||(d[0]=e=>{return t=v.value,l.delCachedView(t),void a.replace({path:"/redirect"+t.path});var t})},"刷新"),d[6]||(d[6]=D()),s(v.value)?L("",!0):(h(),V("li",{key:0,onClick:d[1]||(d[1]=e=>$(v.value))},"关闭")),d[7]||(d[7]=D()),x("li",{onClick:R},"关闭其他"),d[8]||(d[8]=D()),x("li",{onClick:S},"关闭所有")],4),[[B,i.value]])])}}},[["__scopeId","data-v-47616348"]]),Ra={class:"setting-container"},La={class:"setting-item"},Sa={class:"theme-picker"},ja=["onClick"],Na={class:"setting-item"},Ua={class:"setting-item"},za={class:"setting-item"},Ma=ha({__name:"index",setup(e){const t=Nt(),a=[{value:"default",color:"#1890ff",text:"默认蓝"},{value:"green",color:"#52c41a",text:"清新绿"},{value:"purple",color:"#722ed1",text:"优雅紫"},{value:"pink",color:"#eb2f96",text:"魅力粉"},{value:"orange",color:"#fa8c16",text:"活力橙"},{value:"red",color:"#f5222d",text:"热情红"}],l=b({get:()=>t.sidebar.opened,set:e=>{e?t.toggleSidebar():t.closeSidebar({withoutAnimation:!1})}}),n=b({get:()=>t.theme,set:e=>t.setTheme(e)}),o=b({get:()=>t.size,set:e=>t.setSize(e)}),r=y(!0),s=()=>{t.toggleSidebar()},d=e=>{o.value=e};return(e,t)=>{const i=m("Check"),u=Re,c=We,f=He,v=Ge;return h(),V("div",Ra,[t[16]||(t[16]=x("h2",{class:"setting-title"},"系统设置",-1)),t[17]||(t[17]=D()),x("div",La,[t[3]||(t[3]=x("div",{class:"setting-item-title"},"系统主题",-1)),t[4]||(t[4]=D()),x("div",Sa,[(h(),V(P,null,T(a,e=>x("div",{key:e.value,class:E(["theme-item",{active:n.value===e.value}]),style:q({backgroundColor:e.color}),onClick:t=>{return a=e.value,void(n.value=a);var a}},[n.value===e.value?(h(),p(u,{key:0},{default:I(()=>[k(i)]),_:1})):L("",!0)],14,ja)),64))])]),t[18]||(t[18]=D()),x("div",Na,[t[5]||(t[5]=x("div",{class:"setting-item-title"},"侧边栏",-1)),t[6]||(t[6]=D()),k(c,{modelValue:l.value,"onUpdate:modelValue":t[0]||(t[0]=e=>l.value=e),"inline-prompt":"","active-text":"开启","inactive-text":"关闭",onChange:s},null,8,["modelValue"])]),t[19]||(t[19]=D()),x("div",Ua,[t[7]||(t[7]=x("div",{class:"setting-item-title"},"标签栏",-1)),t[8]||(t[8]=D()),k(c,{modelValue:r.value,"onUpdate:modelValue":t[1]||(t[1]=e=>r.value=e),"inline-prompt":"","active-text":"开启","inactive-text":"关闭"},null,8,["modelValue"])]),t[20]||(t[20]=D()),x("div",za,[t[14]||(t[14]=x("div",{class:"setting-item-title"},"系统大小",-1)),t[15]||(t[15]=D()),k(v,{modelValue:o.value,"onUpdate:modelValue":t[2]||(t[2]=e=>o.value=e),onChange:d},{default:I(()=>[k(f,{label:"large"},{default:I(()=>t[9]||(t[9]=[D("大")])),_:1}),t[12]||(t[12]=D()),k(f,{label:"default"},{default:I(()=>t[10]||(t[10]=[D("中")])),_:1}),t[13]||(t[13]=D()),k(f,{label:"small"},{default:I(()=>t[11]||(t[11]=[D("小")])),_:1})]),_:1},8,["modelValue"])])])}}},[["__scopeId","data-v-ef484591"]]),Ba={class:"logo-container"},qa={key:0,class:"logo-title"},Ya=ha({__name:"Logo",setup(e){const t=Nt(),{sidebar:a}=t,l=b(()=>!a.opened);return(e,t)=>{const a=m("router-link");return h(),V("div",Ba,[k(a,{to:"/",class:"logo-link"},{default:I(()=>[t[0]||(t[0]=x("img",{src:ma,class:"logo-image",alt:"系统logo"},null,-1)),t[1]||(t[1]=D()),l.value?L("",!0):(h(),V("h1",qa,"高校智能管理平台"))]),_:1})])}}},[["__scopeId","data-v-0aa9a5b5"]]),Fa={class:"logo-container"},Wa={class:"header"},Ha={class:"navbar-container"},Ga={class:"tags-container"},Ja=ha({__name:"index",setup(e){const t=Nt(),{sidebar:a,device:l}=F(t),n=y(!1);W("showSettings",n);const o=y(!0),r=b(()=>({"hide-sidebar":!a.value.opened,"open-sidebar":a.value.opened,"without-animation":a.value.withoutAnimation,mobile:"mobile"===l.value})),s=b(()=>a.value.opened?"220px":"60px"),d=g();return W("currentRoute",d),(e,t)=>{const a=Fe,l=Je,d=Xe;return h(),V("div",{class:E(["app-wrapper",r.value]),style:q({"--header-height":"60px","--sidebar-width":s.value})},[x("div",{class:"sidebar-container",style:q({width:s.value})},[x("div",Fa,[k(Ya)]),t[1]||(t[1]=D()),k(a,{class:"scrollbar-wrapper"},{default:I(()=>[k(Da)]),_:1})],4),t[6]||(t[6]=D()),x("div",{class:"main-container",style:q({"margin-left":s.value})},[x("div",Wa,[x("div",Ha,[k(ya)]),t[2]||(t[2]=D()),x("div",Ga,[o.value?(h(),p(Aa,{key:0})):L("",!0)])]),t[3]||(t[3]=D()),k(Ta),t[4]||(t[4]=D()),k(l,{modelValue:n.value,"onUpdate:modelValue":t[0]||(t[0]=e=>n.value=e),title:"系统设置",direction:"rtl",size:"300px"},{default:I(()=>[k(Ma)]),_:1},8,["modelValue"]),t[5]||(t[5]=D()),k(d,{target:".main-container"})],4)],6)}}},[["__scopeId","data-v-b698df6e"]]),Xa={render:()=>f("div",{style:{padding:"20px"}},[f("h2","页面开发中..."),f("p","该功能模块正在开发中，敬请期待！")])};function Za(e){return ra(e)}const Ka=[{path:"/redirect",component:Ja,hidden:!0,children:[{path:"/redirect/:path(.*)",component:Za("redirect/index")}]},{path:"/login",component:Za("login/index"),hidden:!0},{path:"/404",component:Za("error/404"),hidden:!0},{path:"/",component:Ja,redirect:"/dashboard",children:[{path:"dashboard",name:"Dashboard",component:Za("dashboard"),meta:{title:"首页",icon:"HomeFilled",affix:!0}}]},{path:"/profile",component:Ja,hidden:!0,children:[{path:"",name:"Profile",component:Za("profile/index"),meta:{title:"个人中心"}}]},{path:"/course",component:Ja,children:[{path:"list",name:"CourseList",component:Za("course/index"),meta:{title:"课程列表"}}],hidden:!0},{path:"/course-add",component:Ja,children:[{path:"",name:"CourseAdd",component:Za("course/add"),meta:{title:"新增课程"}}],hidden:!0},{path:"/error",component:Ja,hidden:!0,children:[{path:"forbidden",name:"Forbidden",component:Za("error/403"),meta:{title:"无权访问"}}]},{path:"/student-edit/:id",component:Ja,children:[{path:"",name:"StudentEdit",component:Za("student/edit"),meta:{title:"编辑学生",activeMenu:"/student/list"}}],hidden:!0},{path:"/:pathMatch(.*)*",name:"NotFound",component:Za("error/404"),hidden:!0}],Qa=[{path:"/education",component:Ja,redirect:"/education/department",meta:{title:"教务管理",icon:"School",roles:["admin"]},children:[{path:"department",name:"DepartmentList",component:Za("education/department/index"),meta:{title:"院系管理",icon:"OfficeBuilding",roles:["admin"]}},{path:"major",name:"MajorList",component:Za("education/major/index"),meta:{title:"专业管理",icon:"Memo",roles:["admin"]}},{path:"class",name:"ClassList",component:Za("education/class/index"),meta:{title:"班级管理",icon:"House",roles:["admin"]}}]},{path:"/student",component:Ja,redirect:"/student/list",meta:{title:"学生管理",icon:"User",roles:["admin","teacher","student"]},children:[{path:"list",name:"StudentList",component:Za("student/index"),meta:{title:"学生列表",icon:"List"},beforeEnter:(e,t,a)=>{console.log("----------学生列表路由钩子开始-----------"),console.log("尝试进入学生列表路由",e.path),console.log("路由元数据:",e.meta),console.log("学生列表路由守卫通过，允许访问"),a(),console.log("----------学生列表路由钩子结束-----------")}},{path:"add",name:"StudentAdd",component:Za("student/add"),meta:{title:"新增学生",icon:"Plus"}},{path:"detail/:id",name:"StudentDetail",component:Xa,meta:{title:"学生详情",activeMenu:"/student/list"},hidden:!0},{path:"edit/:id",name:"StudentEdit",component:Za("student/edit"),meta:{title:"编辑学生",activeMenu:"/student/list"},hidden:!0,alias:"/student/edit/:id"}]},{path:"/teacher",component:Ja,redirect:"/teacher/list",meta:{title:"教师管理",icon:"UserFilled",roles:["admin"]},children:[{path:"list",name:"TeacherList",component:Za("teacher/index"),meta:{title:"教师列表",icon:"List"}},{path:"add",name:"TeacherAdd",component:Za("teacher/add"),meta:{title:"新增教师",icon:"Plus"}},{path:"detail/:id",name:"TeacherDetail",component:Za("teacher/detail"),meta:{title:"教师详情",activeMenu:"/teacher/list"},hidden:!0},{path:"edit/:id",name:"TeacherEdit",component:Za("teacher/edit"),meta:{title:"编辑教师",activeMenu:"/teacher/list"},hidden:!0}]},{path:"/course",component:Ja,redirect:"/course/list",meta:{title:"课程管理",icon:"Notebook",roles:["admin","teacher"]},children:[{path:"list",name:"CourseList",component:Za("course/index"),meta:{title:"课程列表",icon:"List"}},{path:"add",name:"CourseAdd",component:Za("course/add"),meta:{title:"新增课程",icon:"Plus",roles:["admin"]}},{path:"detail/:id",name:"CourseDetail",component:Xa,meta:{title:"课程详情",activeMenu:"/course/list"},hidden:!0},{path:"students/:id",name:"CourseStudents",component:Xa,meta:{title:"课程学生",activeMenu:"/course/list"},hidden:!0},{path:"offering",name:"CourseOfferingList",component:Za("course/offering/index"),meta:{title:"课程开设记录",icon:"Notebook",roles:["admin","teacher"]}},{path:"",redirect:"list"}]},{path:"/selection",component:Ja,redirect:"/selection/list",meta:{title:"选课管理",icon:"Calendar",roles:["admin","teacher","student"]},children:[{path:"my-courses",name:"MyCoursesStudent",component:Xa,meta:{title:"我的课程",icon:"Notebook",roles:["student"]}},{path:"select",name:"CourseSelection",component:Xa,meta:{title:"选课",icon:"Plus",roles:["student"]}},{path:"teaching",name:"TeachingCourses",component:Za("course/teaching/index"),meta:{title:"授课列表",icon:"Reading",roles:["teacher"]}},{path:"teaching/:id/:courseId",name:"TeacherCourseStudents",component:Za("course/teaching/students"),meta:{title:"课程学生",activeMenu:"/selection/teaching",roles:["teacher"]},hidden:!0},{path:"manage",name:"SelectionManage",component:Za("selection/manage"),meta:{title:"选课管理",icon:"Setting",roles:["admin"]}}]},{path:"/grade",component:Ja,redirect:"/grade/my",meta:{title:"成绩管理",icon:"Document",roles:["admin","teacher","student"]},children:[{path:"my",name:"MyGrades",component:Xa,meta:{title:"我的成绩",icon:"Search",roles:["student"]}},{path:"input",name:"GradeInput",component:Za("grade/input/index"),meta:{title:"成绩录入",icon:"Edit",roles:["teacher"]}},{path:"check",name:"GradeCheck",component:Za("grade/check"),meta:{title:"成绩查询",icon:"Search",roles:["admin","teacher"]}},{path:"stats",name:"GradeStats",component:Za("grade/stats"),meta:{title:"成绩统计",icon:"DataAnalysis",roles:["admin","teacher"]}}]},{path:"/attendance",component:Ja,redirect:"/attendance/record",meta:{title:"考勤管理",icon:"Clock",roles:["admin","teacher","student"]},children:[{path:"record",name:"AttendanceRecord",component:Za("attendance/record/index"),meta:{title:"考勤记录",icon:"Document",roles:["admin","teacher"],perms:["attendance:record:list"]}},{path:"stats",name:"AttendanceStats",component:Za("attendance/stats/index"),meta:{title:"考勤统计",icon:"DataAnalysis",roles:["admin","teacher"],perms:["attendance:stats:list"]}},{path:"my",name:"MyAttendance",component:Za("attendance/my/index"),meta:{title:"我的考勤",icon:"Search",roles:["student"],perms:["attendance:record:list"]}}]},{path:"/message",component:Ja,redirect:"/message/notice",meta:{title:"消息管理",icon:"MessageBox",roles:["admin","teacher","student"]},children:[{path:"notice",name:"NoticeList",component:Za("message/notice/index"),meta:{title:"公告管理",icon:"Bell",roles:["admin","teacher","student"]}},{path:"todo",name:"TodoList",component:Za("message/todo/index"),meta:{title:"待办事项",icon:"List",roles:["admin","teacher","student"]}}]},{path:"/system",component:Ja,redirect:"/system/user",meta:{title:"系统管理",icon:"Setting",roles:["admin"]},children:[{path:"user",name:"UserManage",component:Za("system/user/index"),meta:{title:"用户管理",icon:"User"}},{path:"role",name:"RoleManage",component:Za("system/role/index"),meta:{title:"角色管理",icon:"UserFilled"}},{path:"menu",name:"MenuManage",component:Za("system/menu/index"),meta:{title:"菜单管理",icon:"Menu"}}]}],el=H({history:G(""),routes:Ka,scrollBehavior:()=>({top:0})}),tl=["/login"];let al=!1;function ll(){console.log("开始手动注册消息相关路由...");if(el.getRoutes().some(e=>"/message"===e.path)){console.log("已存在消息路由，先移除..."),el.removeRoute("NoticeList"),el.removeRoute("TodoList");const e=el.removeRoute("MessageManage");console.log("移除结果:",e?"成功":"失败或不存在")}const e={path:"/message",name:"MessageManage",component:Ja,redirect:"/message/notice",meta:{title:"消息管理",icon:"MessageBox",roles:["admin","teacher","student"]},children:[{path:"notice",name:"NoticeList",component:Za("message/notice/index"),meta:{title:"公告管理",icon:"Bell",roles:["admin","teacher","student"]}},{path:"todo",name:"TodoList",component:Za("message/todo/index"),meta:{title:"待办事项",icon:"List",roles:["admin","teacher","student"]}}]};console.log("正在添加消息路由:",e),el.addRoute(e);const t=el.getRoutes().some(e=>"/message"===e.path);return console.log("消息路由添加是否成功:",t?"是":"否"),console.log("当前所有路由路径:",el.getRoutes().map(e=>({path:e.path,name:e.name,childrenCount:e.children?e.children.length:0}))),t}el.beforeEach((e,t,a)=>i(void 0,null,function*(){if(console.log("-------路由守卫开始-------"),console.log("从路由:",t.path,"跳转到:",e.path),console.log("目标路由完整信息:",e),"/course/list"===e.path&&"CourseList"!==e.name)return console.log("检测到访问/course/list路径，进行特殊处理"),a({path:"/course",name:"CourseList",replace:!0});const l=Mt();if(console.log("是否有Token:",l?"是":"否"),l)if("/login"===e.path)console.log("已登录状态下访问登录页，重定向到首页"),a({path:"/"});else{const t=pa(),l=ia();try{if(0===t.roles.length){console.log("用户角色信息为空，开始获取用户信息"),yield t.getInfo(),console.log("获取用户信息成功，角色:",t.roles);const n=yield l.generateRoutes();return console.log("生成的可访问路由数量:",n.length),n.forEach(e=>{console.log("动态添加路由:",e.path),el.addRoute(e)}),al=!0,console.log("已完成动态路由添加，重新导航到:",e.path),a(d(s({},e),{replace:!0}))}if(0===e.matched.length){if(console.log("未找到匹配的路由，路径:",e.path),al){console.log("动态路由已添加但未匹配，尝试延迟重试");if(e.path.includes("/redirect")||e.fullPath.includes("redirect=")||e.fullPath.includes("closeTab="))return console.log("检测到可能是标签关闭操作，尝试导航至首页"),a("/dashboard");const t=(e=>{for(const t of accessRoutes){if(e.startsWith(t.path))return t.redirect||t.path;if(t.children)for(const a of t.children){const l=t.path+"/"+a.path;if(e.startsWith(l))return l}}return null})(e.path);return t?(console.log("找到可能的匹配路由:",t),a(t)):(console.log("无法找到匹配路由，跳转到首页"),a("/dashboard"))}{console.log("动态路由未添加，重新生成路由");const t=yield l.generateRoutes();return console.log("重新生成的可访问路由数量:",t.length),t.forEach(e=>{console.log("重新添加路由:",e.path),el.addRoute(e)}),al=!0,console.log("完成路由重新添加，重新导航"),a(d(s({},e),{replace:!0}))}}if(console.log("路由匹配成功，匹配的路由数:",e.matched.length),console.log("匹配的路由:",e.matched.map(e=>e.path)),e.meta&&e.meta.roles&&e.meta.roles.length>0){console.log("当前路由需要角色权限:",e.meta.roles),console.log("用户拥有角色:",t.roles);if(!t.roles.some(t=>e.meta.roles.includes(t)))return console.log("用户无权访问此页面，重定向到403页面"),a("/error/forbidden")}console.log("路由守卫检查通过，允许访问:",e.path),a()}catch(n){console.error("路由守卫出错:",n),t.resetState(),l.resetRoutes(),al=!1,$e.error("登录状态已失效，请重新登录"),a(`/login?redirect=${e.path}`)}}else console.log("未检测到Token"),-1!==tl.indexOf(e.path)?(console.log("目标路径在白名单中，直接访问"),a()):(console.log("未登录，重定向到登录页"),a(`/login?redirect=${e.path}`));console.log("-------路由守卫结束-------")})),el.afterEach(()=>{});var nl={exports:{}};
/* NProgress, (c) 2013, 2014 Rico Sta. Cruz - http://ricostacruz.com/nprogress
 * @license MIT */const ol=Ke(nl.exports=function(){var e,t,a={version:"0.2.0"},l=a.settings={minimum:.08,easing:"ease",positionUsing:"",speed:200,trickle:!0,trickleRate:.02,trickleSpeed:800,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};function n(e,t,a){return e<t?t:e>a?a:e}function o(e){return 100*(-1+e)}function r(e,t,a){var n;return(n="translate3d"===l.positionUsing?{transform:"translate3d("+o(e)+"%,0,0)"}:"translate"===l.positionUsing?{transform:"translate("+o(e)+"%,0)"}:{"margin-left":o(e)+"%"}).transition="all "+t+"ms "+a,n}a.configure=function(e){var t,a;for(t in e)void 0!==(a=e[t])&&e.hasOwnProperty(t)&&(l[t]=a);return this},a.status=null,a.set=function(e){var t=a.isStarted();e=n(e,l.minimum,1),a.status=1===e?null:e;var o=a.render(!t),i=o.querySelector(l.barSelector),u=l.speed,c=l.easing;return o.offsetWidth,s(function(t){""===l.positionUsing&&(l.positionUsing=a.getPositioningCSS()),d(i,r(e,u,c)),1===e?(d(o,{transition:"none",opacity:1}),o.offsetWidth,setTimeout(function(){d(o,{transition:"all "+u+"ms linear",opacity:0}),setTimeout(function(){a.remove(),t()},u)},u)):setTimeout(t,u)}),this},a.isStarted=function(){return"number"==typeof a.status},a.start=function(){a.status||a.set(0);var e=function(){setTimeout(function(){a.status&&(a.trickle(),e())},l.trickleSpeed)};return l.trickle&&e(),this},a.done=function(e){return e||a.status?a.inc(.3+.5*Math.random()).set(1):this},a.inc=function(e){var t=a.status;return t?("number"!=typeof e&&(e=(1-t)*n(Math.random()*t,.1,.95)),t=n(t+e,0,.994),a.set(t)):a.start()},a.trickle=function(){return a.inc(Math.random()*l.trickleRate)},e=0,t=0,a.promise=function(l){return l&&"resolved"!==l.state()?(0===t&&a.start(),e++,t++,l.always(function(){0===--t?(e=0,a.done()):a.set((e-t)/e)}),this):this},a.render=function(e){if(a.isRendered())return document.getElementById("nprogress");u(document.documentElement,"nprogress-busy");var t=document.createElement("div");t.id="nprogress",t.innerHTML=l.template;var n,r=t.querySelector(l.barSelector),s=e?"-100":o(a.status||0),i=document.querySelector(l.parent);return d(r,{transition:"all 0 linear",transform:"translate3d("+s+"%,0,0)"}),l.showSpinner||(n=t.querySelector(l.spinnerSelector))&&m(n),i!=document.body&&u(i,"nprogress-custom-parent"),i.appendChild(t),t},a.remove=function(){c(document.documentElement,"nprogress-busy"),c(document.querySelector(l.parent),"nprogress-custom-parent");var e=document.getElementById("nprogress");e&&m(e)},a.isRendered=function(){return!!document.getElementById("nprogress")},a.getPositioningCSS=function(){var e=document.body.style,t="WebkitTransform"in e?"Webkit":"MozTransform"in e?"Moz":"msTransform"in e?"ms":"OTransform"in e?"O":"";return t+"Perspective"in e?"translate3d":t+"Transform"in e?"translate":"margin"};var s=function(){var e=[];function t(){var a=e.shift();a&&a(t)}return function(a){e.push(a),1==e.length&&t()}}(),d=function(){var e=["Webkit","O","Moz","ms"],t={};function a(e){return e.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(e,t){return t.toUpperCase()})}function l(t){var a=document.body.style;if(t in a)return t;for(var l,n=e.length,o=t.charAt(0).toUpperCase()+t.slice(1);n--;)if((l=e[n]+o)in a)return l;return t}function n(e){return e=a(e),t[e]||(t[e]=l(e))}function o(e,t,a){t=n(t),e.style[t]=a}return function(e,t){var a,l,n=arguments;if(2==n.length)for(a in t)void 0!==(l=t[a])&&t.hasOwnProperty(a)&&o(e,a,l);else o(e,n[1],n[2])}}();function i(e,t){return("string"==typeof e?e:p(e)).indexOf(" "+t+" ")>=0}function u(e,t){var a=p(e),l=a+t;i(a,t)||(e.className=l.substring(1))}function c(e,t){var a,l=p(e);i(e,t)&&(a=l.replace(" "+t+" "," "),e.className=a.substring(1,a.length-1))}function p(e){return(" "+(e.className||"")+" ").replace(/\s+/gi," ")}function m(e){e&&e.parentNode&&e.parentNode.removeChild(e)}return a}());console.log("Permission.js - 初始化时注册消息路由"),ll(),ol.configure({showSpinner:!1});const rl=["/login","/404"];let sl=!1,dl=!1;el.beforeEach((e,t,a)=>i(void 0,null,function*(){ol.start(),document.title=e.meta.title?`${e.meta.title} - EduSmart 高校智能管理平台`:"EduSmart 高校智能管理平台";const t=Mt(),l=pa();if(console.log("路由守卫 - 目标路径:",e.path),console.log("路由守卫 - 是否有Token:",t),console.log("路由守卫 - 是否有用户信息:",l.userId?"是":"否"),"/message/notice"!==e.path&&"/message/todo"!==e.path||!t||(console.log("检测到访问消息路由，确保路由已注册"),ll()),t)if("/login"===e.path)a({path:"/"}),ol.done();else{const t=ia(),o=l.userId&&l.roles&&l.roles.length>0;if(console.log("路由守卫 - 用户信息是否完整:",o),console.log("路由守卫 - 用户角色:",l.roles),o)if(!sl||dl)try{dl=!1;const l=yield t.generateRoutes();console.log("路由守卫 - 动态路由生成完成:",l),l.forEach(e=>{el.addRoute(e)}),ll(),sl=!0,a({path:e.path,replace:!0})}catch(n){console.error("路由生成错误:",n),l.resetState(),a("/login")}else if(0===e.matched.length){console.log("路由守卫 - 路由未匹配，尝试重新加载路由"),sl=!1,dl=!0;["/student/edit/","/teacher/edit/","/course/edit/","/student-edit/"].some(t=>e.path.includes(t))&&(console.log(`路由守卫 - 检测到特殊路由: ${e.path}，确保路由加载正确`),ll());(yield t.generateRoutes()).forEach(e=>{el.addRoute(e)}),ll();const l=e.path;a({path:l,replace:!0})}else console.log("路由守卫 - 正常访问:",e.path),a();else try{yield l.getInfo();(yield t.generateRoutes()).forEach(e=>{el.addRoute(e)}),ll(),sl=!0,a({path:e.path,replace:!0})}catch(n){console.error("获取用户信息失败:",n),l.resetState(),$e.error(n.message||"验证失败，请重新登录"),a(`/login?redirect=${e.path}`),ol.done()}}else rl.includes(e.path)?a():(a(`/login?redirect=${e.path}`),ol.done())})),el.afterEach(()=>{ol.done()});const il={mounted(e,t){const{value:a}=t,l=pa().roles;if(console.log("角色检查 - 需要角色:",a),console.log("角色检查 - 用户角色:",l),a&&a instanceof Array&&a.length>0){l.some(e=>a.includes(e))?console.log("角色检查 - 有角色，显示元素"):(e.style.display="none",console.log("角色检查 - 无角色，隐藏元素"))}else{if(!a||"string"!=typeof a)throw new Error("使用方式有误，请参考文档");l.includes(a)?console.log("角色检查 - 有角色，显示元素"):(e.style.display="none",console.log("角色检查 - 无角色，隐藏元素"))}}},ul={"education:department:remove":["education:department:delete"],"education:department:delete":["education:department:remove"]};const cl={mounted(e,t){const{value:a}=t,l=pa().permissions;if(console.log("权限检查 - 元素:",e),console.log("权限检查 - 需要权限:",a),console.log("权限检查 - 用户权限:",l),!a)return;var n,o;(n=a,o=l,Array.isArray(n)?n.some(e=>!!o.includes(e)||(ul[e]||[]).some(e=>o.includes(e))):!!o.includes(n)||(ul[n]||[]).some(e=>o.includes(e)))?console.log("权限检查 - 有权限，启用元素"):(console.log("权限检查 - 无权限，禁用元素"),ml(e,function(e){if(Array.isArray(e))return`您没有${e.join("或")}权限，请联系管理员`;return`您没有${e}权限，请联系管理员`}(a)))}},pl={mounted(e,t){t.value&&ml(e)},updated(e,t){t.value?ml(e):function(e){e.disabled=!1,e.classList.remove("is-disabled"),e.style.cursor="",e.style.opacity="",e.style.pointerEvents="";const t=e.querySelectorAll("input, button, textarea, select");t.forEach(e=>{e.disabled=!1,e.classList.remove("is-disabled")}),e._originalClick&&(e.onclick=e._originalClick,e._originalClick=null)}(e)}};function ml(e,t){e.disabled=!0,e.classList.add("is-disabled"),e.style.cursor="not-allowed",e.style.opacity="0.7",e.style.pointerEvents="none",e.style.display="";e.querySelectorAll("input, button, textarea, select").forEach(e=>{e.disabled=!0,e.classList.add("is-disabled")}),t&&(e.setAttribute("title",t),e._originalClick||(e._originalClick=e.onclick,e.onclick=function(e){return e.stopPropagation(),$e.warning(t),!1}))}const hl={install(e){e.directive("hasPerms",cl),e.directive("hasRoles",il),e.directive("hasPermi",cl),e.directive("disabled",pl)}};function fl(e){return qt({url:`/course/${e}`,method:"get"})}function vl(e){return qt({url:"/course",method:"post",data:e})}function gl(e){return qt({url:"/course",method:"put",data:e})}function _l(e){return qt({url:`/course/${e}`,method:"delete"})}function bl(e){return qt({url:"/course/listForAttendance",method:"get",params:e})}function yl(){return qt({url:"/course/list",method:"get",params:{pageNum:1,pageSize:1e3}})}function wl(e,t){return qt({url:`/student/${e}/my-courses`,method:"get",params:t})}function Vl(e){return qt({url:"/student/current/available-courses",method:"get",params:e})}function xl(e){return qt({url:"/student/current/selected-courses",method:"get",params:e})}function kl(e){return qt({url:`/student/current/select-course/${e}`,method:"post"})}function Il(e){return qt({url:`/student/current/withdraw-course/${e}`,method:"delete"})}function Cl(){return qt({url:"/student/course/selection/settings",method:"get"})}function El(e){return qt({url:"/course/check-conflict",method:"post",data:{courseTime1:e.courseTime1||"",courseTime2:e.courseTime2||""}})}function Dl(e){return qt({url:"/education/department/list",method:"get",params:e})}function Pl(e){return qt({url:`/education/department/${e}`,method:"get"})}function Tl(e){return qt({url:"/education/department",method:"post",data:e})}function Ol(e){return qt({url:"/education/department",method:"put",data:e})}function $l(e){return qt({url:`/education/department/${e}`,method:"delete"})}function Al(){return qt({url:"/education/department/all",method:"get"})}function Rl(){return qt({url:"/education/major/all",method:"get"})}const Ll={class:"app-container"},Sl={class:"form-buttons"},jl=ha({__name:"add",setup(e){const t=_(),a=y(null),l=y([]),n=y([]),o=y([]),r=J({code:"",name:"",credit:3,hours:48,type:0,departmentId:null,description:"",majorIds:[],recommendSemester:"",prerequisites:[],difficulty:3}),s={code:[{required:!0,message:"请输入课程编号",trigger:"blur"},{pattern:/^[A-Za-z0-9-]+$/,message:"课程编号只能包含字母、数字和连字符",trigger:"blur"}],name:[{required:!0,message:"请输入课程名称",trigger:"blur"}],credit:[{required:!0,message:"请输入学分",trigger:"blur"}],hours:[{required:!0,message:"请输入学时",trigger:"blur"}],type:[{required:!0,message:"请选择课程类型",trigger:"change"}],departmentId:[{required:!0,message:"请选择开课院系",trigger:"change"}]};c(()=>{d(),u(),m()});const d=()=>i(this,null,function*(){try{const e=yield Al();e&&e.data&&(l.value=e.data)}catch(e){console.error("获取院系列表失败:",e),$e.error("获取院系列表失败")}}),u=()=>i(this,null,function*(){try{const e=yield Rl();e&&e.data&&(n.value=e.data)}catch(e){console.error("获取专业列表失败:",e),$e.error("获取专业列表失败")}}),m=()=>i(this,null,function*(){try{o.value=[{id:1,name:"高等数学"},{id:2,name:"线性代数"},{id:3,name:"大学英语"},{id:4,name:"计算机导论"},{id:5,name:"程序设计基础"}]}catch(e){console.error("获取课程列表失败:",e),$e.error("获取课程列表失败")}}),f=()=>i(this,null,function*(){a.value&&(yield a.value.validate((e,a)=>i(this,null,function*(){var l,n;if(e)try{yield vl(r),$e.success("新增课程成功"),t.push({path:"/course",name:"CourseList",replace:!0})}catch(o){console.error("新增课程失败:",o),$e.error((null==(n=null==(l=o.response)?void 0:l.data)?void 0:n.message)||"新增课程失败")}else console.log("表单校验不通过",a)})))}),v=()=>{$e.info("已取消新增"),t.push({path:"/course",name:"CourseList",replace:!0})};return(e,t)=>{const d=et,i=tt,u=at,c=lt,m=nt,g=ot,_=rt,b=st,y=dt,w=it,C=ut,E=Qe;return h(),V("div",Ll,[k(E,{class:"box-card"},{header:I(()=>t[11]||(t[11]=[x("div",{class:"card-header"},[x("span",null,"新增课程")],-1)])),default:I(()=>[t[38]||(t[38]=D()),k(C,{ref_key:"courseFormRef",ref:a,model:r,rules:s,"label-width":"120px"},{default:I(()=>[k(d,{"content-position":"left"},{default:I(()=>t[12]||(t[12]=[D("基本信息")])),_:1}),t[34]||(t[34]=D()),k(b,{gutter:24},{default:I(()=>[k(c,{span:12},{default:I(()=>[k(u,{label:"课程编号",prop:"code"},{default:I(()=>[k(i,{modelValue:r.code,"onUpdate:modelValue":t[0]||(t[0]=e=>r.code=e),placeholder:"请输入课程编号"},null,8,["modelValue"])]),_:1})]),_:1}),t[14]||(t[14]=D()),k(c,{span:12},{default:I(()=>[k(u,{label:"课程名称",prop:"name"},{default:I(()=>[k(i,{modelValue:r.name,"onUpdate:modelValue":t[1]||(t[1]=e=>r.name=e),placeholder:"请输入课程名称"},null,8,["modelValue"])]),_:1})]),_:1}),t[15]||(t[15]=D()),k(c,{span:12},{default:I(()=>[k(u,{label:"学分",prop:"credit"},{default:I(()=>[k(m,{modelValue:r.credit,"onUpdate:modelValue":t[2]||(t[2]=e=>r.credit=e),min:0,max:20,precision:1,step:.5,style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),t[16]||(t[16]=D()),k(c,{span:12},{default:I(()=>[k(u,{label:"学时",prop:"hours"},{default:I(()=>[k(m,{modelValue:r.hours,"onUpdate:modelValue":t[3]||(t[3]=e=>r.hours=e),min:0,max:200,precision:0,step:1,style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),t[17]||(t[17]=D()),k(c,{span:12},{default:I(()=>[k(u,{label:"课程类型",prop:"type"},{default:I(()=>[k(_,{modelValue:r.type,"onUpdate:modelValue":t[4]||(t[4]=e=>r.type=e),placeholder:"请选择课程类型",style:{width:"100%"}},{default:I(()=>[k(g,{label:"必修",value:0}),t[13]||(t[13]=D()),k(g,{label:"选修",value:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),t[18]||(t[18]=D()),k(c,{span:12},{default:I(()=>[k(u,{label:"开课院系",prop:"departmentId"},{default:I(()=>[k(_,{modelValue:r.departmentId,"onUpdate:modelValue":t[5]||(t[5]=e=>r.departmentId=e),placeholder:"请选择院系",style:{width:"100%"}},{default:I(()=>[(h(!0),V(P,null,T(l.value,e=>(h(),p(g,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),t[19]||(t[19]=D()),k(c,{span:24},{default:I(()=>[k(u,{label:"课程描述",prop:"description"},{default:I(()=>[k(i,{modelValue:r.description,"onUpdate:modelValue":t[6]||(t[6]=e=>r.description=e),type:"textarea",placeholder:"请输入课程描述",rows:4},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t[35]||(t[35]=D()),k(d,{"content-position":"left"},{default:I(()=>t[20]||(t[20]=[D("教学计划")])),_:1}),t[36]||(t[36]=D()),k(b,{gutter:24},{default:I(()=>[k(c,{span:12},{default:I(()=>[k(u,{label:"适用专业",prop:"majorIds"},{default:I(()=>[k(_,{modelValue:r.majorIds,"onUpdate:modelValue":t[7]||(t[7]=e=>r.majorIds=e),multiple:"",placeholder:"请选择适用专业",style:{width:"100%"},"collapse-tags":!0,"collapse-tags-tooltip":!0},{default:I(()=>[(h(!0),V(P,null,T(n.value,e=>(h(),p(g,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),t[28]||(t[28]=D()),k(c,{span:12},{default:I(()=>[k(u,{label:"推荐学期",prop:"recommendSemester"},{default:I(()=>[k(_,{modelValue:r.recommendSemester,"onUpdate:modelValue":t[8]||(t[8]=e=>r.recommendSemester=e),placeholder:"请选择推荐学期",style:{width:"100%"}},{default:I(()=>[k(g,{label:"大一上学期",value:"1-1"}),t[21]||(t[21]=D()),k(g,{label:"大一下学期",value:"1-2"}),t[22]||(t[22]=D()),k(g,{label:"大二上学期",value:"2-1"}),t[23]||(t[23]=D()),k(g,{label:"大二下学期",value:"2-2"}),t[24]||(t[24]=D()),k(g,{label:"大三上学期",value:"3-1"}),t[25]||(t[25]=D()),k(g,{label:"大三下学期",value:"3-2"}),t[26]||(t[26]=D()),k(g,{label:"大四上学期",value:"4-1"}),t[27]||(t[27]=D()),k(g,{label:"大四下学期",value:"4-2"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),t[29]||(t[29]=D()),k(c,{span:12},{default:I(()=>[k(u,{label:"先修课程",prop:"prerequisites"},{default:I(()=>[k(_,{modelValue:r.prerequisites,"onUpdate:modelValue":t[9]||(t[9]=e=>r.prerequisites=e),multiple:"",placeholder:"请选择先修课程",style:{width:"100%"},"collapse-tags":!0,"collapse-tags-tooltip":!0,filterable:""},{default:I(()=>[(h(!0),V(P,null,T(o.value,e=>(h(),p(g,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),t[30]||(t[30]=D()),k(c,{span:12},{default:I(()=>[k(u,{label:"课程难度",prop:"difficulty"},{default:I(()=>[k(y,{modelValue:r.difficulty,"onUpdate:modelValue":t[10]||(t[10]=e=>r.difficulty=e),"show-score":"",max:5,"allow-half":!1,colors:["#99A9BF","#F7BA2A","#FF9900"],style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t[37]||(t[37]=D()),x("div",Sl,[k(w,{onClick:v},{default:I(()=>t[31]||(t[31]=[D("取消")])),_:1}),t[33]||(t[33]=D()),k(w,{type:"primary",onClick:f},{default:I(()=>t[32]||(t[32]=[D("确定")])),_:1})])]),_:1},8,["model"])]),_:1})])}}},[["__scopeId","data-v-264ce842"]]),Nl=Object.freeze(Object.defineProperty({__proto__:null,default:jl},Symbol.toStringTag,{value:"Module"})),Ul={class:"course-container"},zl={class:"card-header"},Ml={class:"header-buttons"},Bl={class:"pagination-container"},ql={class:"dialog-footer"},Yl={class:"dialog-footer"},Fl=ha({__name:"index",setup(e){_();const t=y([]),a=y(0),l=y(!1),n=y(!1),o=y(!1),r=J({pageNum:1,pageSize:10,code:"",name:"",departmentId:null,type:null}),u=y([]),m=()=>i(this,null,function*(){try{const e=yield Al();e&&e.data&&(u.value=e.data)}catch(e){console.error("获取院系列表失败:",e),$e.error("获取院系列表失败")}}),f=y(null),v=y(null),g=J({visible:!1,title:"",type:"add"}),b=J({id:void 0,code:"",name:"",credit:3,hours:48,type:0,departmentId:null,description:""}),w={code:[{required:!0,message:"请输入课程编号",trigger:"blur"},{pattern:/^[A-Za-z0-9-]+$/,message:"课程编号只能包含字母、数字和连字符",trigger:"blur"}],name:[{required:!0,message:"请输入课程名称",trigger:"blur"}],credit:[{required:!0,message:"请输入学分",trigger:"blur"}],hours:[{required:!0,message:"请输入学时",trigger:"blur"}],type:[{required:!0,message:"请选择课程类型",trigger:"change"}],departmentId:[{required:!0,message:"请选择开课院系",trigger:"change"}]};c(()=>i(this,null,function*(){yield m(),E()}));const C=e=>{const t=u.value.find(t=>t.id===e);return t?t.name:""},E=()=>i(this,null,function*(){l.value=!0;try{const l=yield(e=r,qt({url:"/course/list",method:"get",params:e}));l.data&&l.data.list&&Array.isArray(l.data.list)?(t.value=l.data.list.map(e=>{return d(s({},e),{typeDesc:(t=e.type,0===t?"必修":1===t?"选修":"未知"),departmentName:e.departmentName||C(e.departmentId)});var t}),a.value=l.data.total||0):(t.value=[],a.value=0,console.error("返回数据格式异常:",l))}catch(n){console.error("获取课程列表失败:",n),$e.error("获取课程列表失败"),t.value=[],a.value=0}finally{l.value=!1}var e}),$=()=>{r.pageNum=1,E()},A=()=>{var e;null==(e=v.value)||e.resetFields(),$()},R=e=>{r.pageNum=e,E()},j=e=>{r.pageSize=e,E()},N=()=>{B(),g.visible=!0,g.title="新增课程",g.type="add",Y(()=>{var e;null==(e=f.value)||e.clearValidate()})},U=e=>{Ae.confirm(`确定要删除课程 ${e.name} 吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>i(this,null,function*(){try{yield _l(e.id),$e.success("删除成功"),E()}catch(t){console.error("删除课程失败:",t),$e.error("删除课程失败")}})).catch(()=>{})},z=()=>i(this,null,function*(){f.value&&(yield f.value.validate((e,t)=>i(this,null,function*(){var a,l;if(e)try{const e="add"===g.type?vl:gl;yield e(b),$e.success("add"===g.type?"新增成功":"修改成功"),g.visible=!1,E()}catch(n){console.error("add"===g.type?"新增失败":"修改失败",n),$e.error((null==(l=null==(a=n.response)?void 0:a.data)?void 0:l.message)||("add"===g.type?"新增失败":"修改失败"))}else console.log("表单校验不通过",t)})))}),B=()=>{b.id=void 0,b.code="",b.name="",b.credit=3,b.hours=48,b.type=0,b.departmentId=null,b.description=""},q=e=>(n.value=!0,$e.info("课程导入功能开发中"),n.value=!1,!1),F=()=>{var e;o.value=!0,(e=r,qt({url:"/course/export",method:"get",params:e,responseType:"blob"})).then(e=>{const t=new Blob([e.data],{type:"application/vnd.ms-excel"}),a=`课程列表_${(new Date).getTime()}.xlsx`;if(navigator.msSaveBlob)navigator.msSaveBlob(t,a);else{const e=document.createElement("a");e.href=URL.createObjectURL(t),e.download=a,e.click(),URL.revokeObjectURL(e.href)}$e.success("导出成功")}).catch(e=>{console.error("导出失败",e),$e.error("导出失败")}).finally(()=>{o.value=!1})},W=y([]),H=e=>{W.value=e},G=()=>{0!==W.value.length?Ae.confirm(`确定要删除选中的 ${W.value.length} 条课程记录吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>i(this,null,function*(){try{const e=W.value.map(e=>_l(e.id));yield Promise.all(e),$e.success("批量删除成功"),E()}catch(e){console.error("批量删除失败",e),$e.error("批量删除失败")}})).catch(()=>{}):$e.warning("请至少选择一条记录")},Z=y(!1),K=[{prop:"code",label:"课程编号"},{prop:"name",label:"课程名称"},{prop:"credit",label:"学分"},{prop:"hours",label:"学时"},{prop:"type",label:"课程类型"},{prop:"departmentName",label:"开课院系"},{prop:"description",label:"课程描述"},{prop:"createTime",label:"创建时间"}],Q=y(["code","name","credit","hours","type","departmentName","description","createTime"]),ee=J({code:!0,name:!0,credit:!0,hours:!0,type:!0,departmentName:!0,description:!0,createTime:!0}),te=()=>{for(const e in ee)ee[e]=Q.value.includes(e);Z.value=!1},ie=e=>{const t=pa().permissions;return"string"==typeof e?t.includes(e):e instanceof Array&&e.length>0&&t.some(t=>e.includes(t))};return(e,s)=>{const d=tt,i=at,c=ot,m=rt,_=Re,y=it,C=ut,E=Qe,J=pt,ee=je,ue=mt,ce=ht,pe=Ue,me=ze,he=Me,fe=ft,ve=vt,ge=lt,_e=nt,be=st,ye=ct,we=bt,Ve=gt,xe=X("hasPerms"),ke=_t;return h(),V("div",Ul,[k(E,{class:"search-card",shadow:"hover"},{default:I(()=>[k(C,{model:r,ref_key:"queryForm",ref:v,inline:!0},{default:I(()=>[k(i,{label:"课程编号",prop:"code"},{default:I(()=>[k(d,{modelValue:r.code,"onUpdate:modelValue":s[0]||(s[0]=e=>r.code=e),placeholder:"请输入课程编号",clearable:""},null,8,["modelValue"])]),_:1}),s[23]||(s[23]=D()),k(i,{label:"课程名称",prop:"name"},{default:I(()=>[k(d,{modelValue:r.name,"onUpdate:modelValue":s[1]||(s[1]=e=>r.name=e),placeholder:"请输入课程名称",clearable:""},null,8,["modelValue"])]),_:1}),s[24]||(s[24]=D()),k(i,{label:"开课院系",prop:"departmentId"},{default:I(()=>[k(m,{modelValue:r.departmentId,"onUpdate:modelValue":s[2]||(s[2]=e=>r.departmentId=e),placeholder:"请选择院系",clearable:"",style:{"min-width":"200px"}},{default:I(()=>[(h(!0),V(P,null,T(u.value,e=>(h(),p(c,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),s[25]||(s[25]=D()),k(i,{label:"课程类型",prop:"type"},{default:I(()=>[k(m,{modelValue:r.type,"onUpdate:modelValue":s[3]||(s[3]=e=>r.type=e),placeholder:"请选择类型",clearable:"",style:{"min-width":"150px"}},{default:I(()=>[k(c,{label:"必修",value:0}),s[19]||(s[19]=D()),k(c,{label:"选修",value:1})]),_:1},8,["modelValue"])]),_:1}),s[26]||(s[26]=D()),k(i,null,{default:I(()=>[k(y,{type:"primary",onClick:$},{default:I(()=>[k(_,null,{default:I(()=>[k(S(ae))]),_:1}),s[20]||(s[20]=D("查询\n          "))]),_:1}),s[22]||(s[22]=D()),k(y,{onClick:A},{default:I(()=>[k(_,null,{default:I(()=>[k(S(le))]),_:1}),s[21]||(s[21]=D("重置\n          "))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),s[77]||(s[77]=D()),k(E,{class:"table-card",shadow:"hover"},{header:I(()=>[x("div",zl,[s[35]||(s[35]=x("span",{class:"header-title"},"课程信息列表",-1)),s[36]||(s[36]=D()),x("div",Ml,[M((h(),p(y,{type:"primary",onClick:N},{default:I(()=>[k(_,null,{default:I(()=>[k(S(ne))]),_:1}),s[27]||(s[27]=D("新增\n            "))]),_:1})),[[xe,["course:course:add"]]]),s[31]||(s[31]=D()),M((h(),p(y,{type:"danger",disabled:0===W.value.length,onClick:G},{default:I(()=>s[28]||(s[28]=[D("\n              批量删除\n            ")])),_:1},8,["disabled"])),[[xe,["course:course:delete"]]]),s[32]||(s[32]=D()),M((h(),p(J,{class:"upload-demo","show-file-list":!1,"before-upload":q},{default:I(()=>[k(y,{type:"primary",loading:n.value,plain:""},{default:I(()=>[k(_,null,{default:I(()=>[k(S(oe))]),_:1}),s[29]||(s[29]=D("导入\n              "))]),_:1},8,["loading"])]),_:1})),[[xe,["course:course:import"]]]),s[33]||(s[33]=D()),M((h(),p(y,{type:"primary",plain:"",onClick:F,loading:o.value},{default:I(()=>[k(_,null,{default:I(()=>[k(S(re))]),_:1}),s[30]||(s[30]=D("导出\n            "))]),_:1},8,["loading"])),[[xe,["course:course:export"]]]),s[34]||(s[34]=D()),k(ee,{content:"设置显示列"},{default:I(()=>[k(y,{type:"primary",plain:"",onClick:s[4]||(s[4]=e=>Z.value=!0)},{default:I(()=>[k(_,null,{default:I(()=>[k(S(se))]),_:1})]),_:1})]),_:1})])])]),default:I(()=>[s[60]||(s[60]=D()),M((h(),p(fe,{data:t.value,stripe:"",border:"",onSelectionChange:H,style:{width:"100%"},"header-cell-style":{background:"#f5f7fa",color:"#606266"}},{default:I(()=>[k(ue,{type:"selection",width:"55"}),s[50]||(s[50]=D()),k(ue,{type:"index",label:"#",width:"60"}),s[51]||(s[51]=D()),k(ue,{prop:"code",label:"课程编号",width:"120"}),s[52]||(s[52]=D()),k(ue,{prop:"name",label:"课程名称",width:"160"}),s[53]||(s[53]=D()),k(ue,{prop:"credit",label:"学分",width:"80",align:"center"}),s[54]||(s[54]=D()),k(ue,{prop:"hours",label:"学时",width:"80",align:"center"}),s[55]||(s[55]=D()),k(ue,{label:"课程类型",width:"100",align:"center"},{default:I(e=>[k(ce,{type:0===e.row.type?"danger":"success"},{default:I(()=>[D(O(e.row.typeDesc),1)]),_:2},1032,["type"])]),_:1}),s[56]||(s[56]=D()),k(ue,{prop:"departmentName",label:"开课院系",width:"160"}),s[57]||(s[57]=D()),k(ue,{prop:"description",label:"课程描述","min-width":"200","show-overflow-tooltip":""}),s[58]||(s[58]=D()),k(ue,{prop:"createTime",label:"创建时间",width:"160",align:"center"}),s[59]||(s[59]=D()),k(ue,{label:"操作","min-width":"220",fixed:"right"},{default:I(e=>[M((h(),p(y,{type:"primary",link:"",onClick:t=>{return a=e.row,B(),g.visible=!0,g.title="编辑课程",g.type="update",fl(a.id).then(e=>{const t=e.data;b.id=t.id,b.code=t.code,b.name=t.name,b.credit=t.credit,b.hours=t.hours,b.type=t.type,b.departmentId=t.departmentId,b.description=t.description}).catch(e=>{console.error("获取课程详情失败:",e),$e.error("获取课程详情失败")}),void Y(()=>{var e;null==(e=f.value)||e.clearValidate()});var a}},{default:I(()=>s[37]||(s[37]=[D("\n              编辑\n            ")])),_:2},1032,["onClick"])),[[xe,["course:course:edit"]]]),s[48]||(s[48]=D()),M((h(),p(y,{type:"primary",link:"",onClick:t=>{return a=e.row,void Ae.alert(`\n    <div style="text-align: left">\n      <p><strong>课程编号：</strong>${a.code}</p>\n      <p><strong>课程名称：</strong>${a.name}</p>\n      <p><strong>学分：</strong>${a.credit}</p>\n      <p><strong>学时：</strong>${a.hours}</p>\n      <p><strong>课程类型：</strong>${a.typeDesc}</p>\n      <p><strong>开课院系：</strong>${a.departmentName}</p>\n      <p><strong>课程描述：</strong>${a.description||"无"}</p>\n      <p><strong>创建时间：</strong>${a.createTime}</p>\n    </div>\n  `,"课程详情",{dangerouslyUseHTMLString:!0,confirmButtonText:"确定"});var a}},{default:I(()=>s[38]||(s[38]=[D("\n              详情\n            ")])),_:2},1032,["onClick"])),[[xe,["course:course:query"]]]),s[49]||(s[49]=D()),k(he,null,{dropdown:I(()=>[k(me,null,{default:I(()=>[k(pe,{onClick:t=>{return a=e.row,void $e.info(`将显示课程 ${a.name} 的学生列表，功能开发中`);var a}},{default:I(()=>s[40]||(s[40]=[D("查看学生")])),_:2},1032,["onClick"]),s[44]||(s[44]=D()),k(pe,{onClick:t=>{return a=e.row,void $e.info(`将显示课程 ${a.name} 的教师列表，功能开发中`);var a}},{default:I(()=>s[41]||(s[41]=[D("查看教师")])),_:2},1032,["onClick"]),s[45]||(s[45]=D()),k(pe,{onClick:t=>{return a=e.row,void $e.info(`将显示课程 ${a.name} 的课表信息，功能开发中`);var a}},{default:I(()=>s[42]||(s[42]=[D("查看课表")])),_:2},1032,["onClick"]),s[46]||(s[46]=D()),ie("course:course:delete")?(h(),p(pe,{key:0,divided:"",onClick:t=>U(e.row),class:"text-danger"},{default:I(()=>s[43]||(s[43]=[D("删除")])),_:2},1032,["onClick"])):L("",!0)]),_:2},1024)]),default:I(()=>[k(y,{link:"",type:"primary"},{default:I(()=>[s[39]||(s[39]=D("\n                更多")),k(_,{class:"el-icon--right"},{default:I(()=>[k(S(de))]),_:1})]),_:1}),s[47]||(s[47]=D())]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[ke,l.value]]),s[61]||(s[61]=D()),x("div",Bl,[k(ve,{"current-page":r.pageNum,"onUpdate:currentPage":s[5]||(s[5]=e=>r.pageNum=e),"page-size":r.pageSize,"onUpdate:pageSize":s[6]||(s[6]=e=>r.pageSize=e),"page-sizes":[10,20,50,100],background:!0,layout:"total, sizes, prev, pager, next, jumper",total:a.value,onSizeChange:j,onCurrentChange:R},null,8,["current-page","page-size","total"])])]),_:1}),s[78]||(s[78]=D()),k(ye,{title:g.title,modelValue:g.visible,"onUpdate:modelValue":s[15]||(s[15]=e=>g.visible=e),width:"600px","append-to-body":"","destroy-on-close":""},{footer:I(()=>[x("div",ql,[k(y,{onClick:s[14]||(s[14]=e=>g.visible=!1)},{default:I(()=>s[69]||(s[69]=[D("取消")])),_:1}),s[71]||(s[71]=D()),k(y,{type:"primary",onClick:z},{default:I(()=>s[70]||(s[70]=[D("确定")])),_:1})])]),default:I(()=>[k(C,{ref_key:"courseFormRef",ref:f,model:b,rules:w,"label-width":"100px"},{default:I(()=>[k(be,{gutter:24},{default:I(()=>[k(ge,{span:12},{default:I(()=>[k(i,{label:"课程编号",prop:"code"},{default:I(()=>[k(d,{modelValue:b.code,"onUpdate:modelValue":s[7]||(s[7]=e=>b.code=e),placeholder:"请输入课程编号",disabled:"update"===g.type},null,8,["modelValue","disabled"])]),_:1})]),_:1}),s[63]||(s[63]=D()),k(ge,{span:12},{default:I(()=>[k(i,{label:"课程名称",prop:"name"},{default:I(()=>[k(d,{modelValue:b.name,"onUpdate:modelValue":s[8]||(s[8]=e=>b.name=e),placeholder:"请输入课程名称"},null,8,["modelValue"])]),_:1})]),_:1}),s[64]||(s[64]=D()),k(ge,{span:12},{default:I(()=>[k(i,{label:"学分",prop:"credit"},{default:I(()=>[k(_e,{modelValue:b.credit,"onUpdate:modelValue":s[9]||(s[9]=e=>b.credit=e),min:0,max:20,precision:1,step:.5,style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),s[65]||(s[65]=D()),k(ge,{span:12},{default:I(()=>[k(i,{label:"学时",prop:"hours"},{default:I(()=>[k(_e,{modelValue:b.hours,"onUpdate:modelValue":s[10]||(s[10]=e=>b.hours=e),min:0,max:200,precision:0,step:1,style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),s[66]||(s[66]=D()),k(ge,{span:12},{default:I(()=>[k(i,{label:"课程类型",prop:"type"},{default:I(()=>[k(m,{modelValue:b.type,"onUpdate:modelValue":s[11]||(s[11]=e=>b.type=e),placeholder:"请选择课程类型",style:{width:"100%"}},{default:I(()=>[k(c,{label:"必修",value:0}),s[62]||(s[62]=D()),k(c,{label:"选修",value:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),s[67]||(s[67]=D()),k(ge,{span:12},{default:I(()=>[k(i,{label:"开课院系",prop:"departmentId"},{default:I(()=>[k(m,{modelValue:b.departmentId,"onUpdate:modelValue":s[12]||(s[12]=e=>b.departmentId=e),placeholder:"请选择院系",style:{width:"100%"}},{default:I(()=>[(h(!0),V(P,null,T(u.value,e=>(h(),p(c,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),s[68]||(s[68]=D()),k(ge,{span:24},{default:I(()=>[k(i,{label:"课程描述",prop:"description"},{default:I(()=>[k(d,{modelValue:b.description,"onUpdate:modelValue":s[13]||(s[13]=e=>b.description=e),type:"textarea",placeholder:"请输入课程描述",rows:4},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"]),s[72]||(s[72]=D())]),_:1},8,["title","modelValue"]),s[79]||(s[79]=D()),k(ye,{title:"表格列设置",modelValue:Z.value,"onUpdate:modelValue":s[18]||(s[18]=e=>Z.value=e),width:"400px","append-to-body":""},{footer:I(()=>[x("div",Yl,[k(y,{onClick:s[17]||(s[17]=e=>Z.value=!1)},{default:I(()=>s[73]||(s[73]=[D("取消")])),_:1}),s[75]||(s[75]=D()),k(y,{type:"primary",onClick:te},{default:I(()=>s[74]||(s[74]=[D("确定")])),_:1})])]),default:I(()=>[k(Ve,{modelValue:Q.value,"onUpdate:modelValue":s[16]||(s[16]=e=>Q.value=e)},{default:I(()=>[k(be,{gutter:20},{default:I(()=>[(h(),V(P,null,T(K,e=>k(ge,{span:12,key:e.prop},{default:I(()=>[k(we,{label:e.prop},{default:I(()=>[D(O(e.label),1)]),_:2},1032,["label"])]),_:2},1024)),64))]),_:1})]),_:1},8,["modelValue"]),s[76]||(s[76]=D())]),_:1},8,["modelValue"])])}}},[["__scopeId","data-v-df8ffc36"]]),Wl=Object.freeze(Object.defineProperty({__proto__:null,default:Fl},Symbol.toStringTag,{value:"Module"}));function Hl(e){return console.log("调用学生详情API, ID:",e),qt({url:`/student/${e}`,method:"get"}).then(e=>(console.log("获取学生详情成功, 返回数据:",e),e)).catch(e=>(console.error("获取学生详情失败, 错误:",e),Promise.reject(e)))}function Gl(e){return qt({url:`/student/${e}`,method:"delete"})}function Jl(e){return qt({url:"/student/export",method:"get",params:e,responseType:"blob"})}function Xl(e){return qt({url:"/student/class/list",method:"get",params:e})}function Zl(){return console.log("调用获取所有班级API"),qt({url:"/student/class/all",method:"get"})}const Kl={class:"student-add-container"},Ql={class:"card-header"},en={class:"empty-data-tip"},tn={key:0},an={key:1},ln={class:"form-footer"},nn=ha({__name:"add",setup(e){const t=_(),a=y(null),l=y("basic"),n=y(!1),o=J({studentNo:"",name:"",gender:0,classId:null,admissionDate:null,graduationDate:null,idCard:"",birthday:null,address:"",username:"",password:"123456",email:"",phone:"",status:0}),r={studentNo:[{required:!0,message:"请输入学号",trigger:"blur"},{pattern:/^[A-Za-z0-9]+$/,message:"学号只能包含字母和数字",trigger:"blur"}],name:[{required:!0,message:"请输入姓名",trigger:"blur"}],gender:[{required:!0,message:"请选择性别",trigger:"change"}],classId:[{required:!0,message:"请选择班级",trigger:"change"}],admissionDate:[{required:!0,message:"请选择入学日期",trigger:"change"}],idCard:[{pattern:/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/,message:"身份证号格式不正确",trigger:"blur"}],username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度不能少于6位",trigger:"blur"}],email:[{pattern:/^[\w.-]+@[\w.-]+\.\w+$/,message:"邮箱格式不正确",trigger:"blur"}],phone:[{pattern:/^1[3-9]\d{9}$/,message:"手机号格式不正确",trigger:"blur"}]},d=y([]),u=y([]),m=y([]);c(()=>{Promise.all([(console.log("开始获取班级列表..."),Zl().then(e=>(console.log("班级列表获取成功:",e.data),Array.isArray(e.data)?d.value=e.data:(console.warn("班级列表数据格式不正确:",e.data),d.value=[],$e.warning("班级列表数据格式不正确")),Promise.resolve(e.data))).catch(e=>(console.error("获取班级列表失败:",e),d.value=[],$e.warning("获取班级列表失败，请刷新页面重试"),Promise.resolve([])))),(console.log("开始获取专业列表..."),Rl().then(e=>(console.log("专业列表获取成功:",e.data),Array.isArray(e.data)?u.value=e.data:(console.warn("专业列表数据格式不正确:",e.data),u.value=[],$e.warning("专业列表数据格式不正确")),Promise.resolve(e.data))).catch(e=>(console.error("获取专业列表失败:",e),u.value=[],$e.warning("获取专业列表失败，请刷新页面重试"),Promise.resolve([])))),(console.log("开始获取院系列表..."),Al().then(e=>(console.log("院系列表获取成功:",e.data),Array.isArray(e.data)?m.value=e.data:(console.warn("院系列表数据格式不正确:",e.data),m.value=[],$e.warning("院系列表数据格式不正确")),Promise.resolve(e.data))).catch(e=>(console.error("获取院系列表失败:",e),m.value=[],$e.warning("获取院系列表失败，请刷新页面重试"),Promise.resolve([]))))]).then(()=>{console.log("所有基础数据加载完成")}).catch(e=>{console.error("加载基础数据时出错:",e)})});const f=()=>i(this,null,function*(){a.value&&(0!==d.value.length?(null!==o.classId&&(o.classId=Number(o.classId)),null!==o.gender&&(o.gender=Number(o.gender)),yield a.value.validate((e,a)=>i(this,null,function*(){var r,d,i;if(e)try{n.value=!0,console.log("表单数据:",o);const e=s({},o),a=yield(i=e,qt({url:"/student",method:"post",data:i}));console.log("添加学生成功:",a),$e.success("学生添加成功"),t.push("/student-list")}catch(u){console.error("添加学生失败:",u),$e.error((null==(d=null==(r=u.response)?void 0:r.data)?void 0:d.message)||"添加学生失败")}finally{n.value=!1}else{console.error("表单验证失败:",JSON.stringify(a,null,2));const e=Object.keys(a);console.log("验证失败的字段:",e);const t=["studentNo","name","gender","classId","admissionDate","graduationDate","idCard","birthday","address"],o=["username","password","email","phone"];e.some(e=>t.includes(e))?(l.value="basic",console.log("切换到基本信息标签页")):e.some(e=>o.includes(e))&&(l.value="account",console.log("切换到账号信息标签页"));let r="表单填写有误，请检查以下字段：";for(const l in a)a[l]&&a[l][0]&&a[l][0].message&&(r+=`\n- ${a[l][0].message}`);$e.error(r),n.value=!1}}))):$e.warning("班级数据未加载，无法提交表单。请刷新页面重试"))}),v=()=>{t.push("/student-list")};return(e,t)=>{const s=Re,i=it,u=tt,c=at,m=lt,g=yt,_=Ge,b=ot,y=rt,w=wt,C=st,E=Vt,O=xt,$=ut,A=Qe;return h(),V("div",Kl,[k(A,{class:"box-card"},{header:I(()=>[x("div",Ql,[t[15]||(t[15]=x("span",null,"新增学生",-1)),t[16]||(t[16]=D()),k(i,{onClick:v,link:""},{default:I(()=>[k(s,null,{default:I(()=>[k(S(ie))]),_:1}),t[14]||(t[14]=D("返回\n          "))]),_:1})])]),default:I(()=>[t[37]||(t[37]=D()),k($,{ref_key:"studentFormRef",ref:a,model:o,rules:r,"label-width":"100px",class:"student-form"},{default:I(()=>[k(O,{modelValue:l.value,"onUpdate:modelValue":t[13]||(t[13]=e=>l.value=e)},{default:I(()=>[k(E,{label:"基本信息",name:"basic"},{default:I(()=>[k(C,{gutter:20},{default:I(()=>[k(m,{span:12},{default:I(()=>[k(c,{label:"学号",prop:"studentNo"},{default:I(()=>[k(u,{modelValue:o.studentNo,"onUpdate:modelValue":t[0]||(t[0]=e=>o.studentNo=e),placeholder:"请输入学号"},null,8,["modelValue"])]),_:1})]),_:1}),t[21]||(t[21]=D()),k(m,{span:12},{default:I(()=>[k(c,{label:"姓名",prop:"name"},{default:I(()=>[k(u,{modelValue:o.name,"onUpdate:modelValue":t[1]||(t[1]=e=>o.name=e),placeholder:"请输入姓名"},null,8,["modelValue"])]),_:1})]),_:1}),t[22]||(t[22]=D()),k(m,{span:12},{default:I(()=>[k(c,{label:"性别",prop:"gender"},{default:I(()=>[k(_,{modelValue:o.gender,"onUpdate:modelValue":t[2]||(t[2]=e=>o.gender=e)},{default:I(()=>[k(g,{label:0},{default:I(()=>t[17]||(t[17]=[D("男")])),_:1}),t[19]||(t[19]=D()),k(g,{label:1},{default:I(()=>t[18]||(t[18]=[D("女")])),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),t[23]||(t[23]=D()),k(m,{span:12},{default:I(()=>[k(c,{label:"班级",prop:"classId"},{default:I(()=>[k(y,{modelValue:o.classId,"onUpdate:modelValue":t[3]||(t[3]=e=>o.classId=e),placeholder:"请选择班级",style:{width:"100%"}},{empty:I(()=>[x("div",en,[0===d.value.length?(h(),V("span",tn,"暂无班级数据")):(h(),V("span",an,"加载班级数据中..."))])]),default:I(()=>[(h(!0),V(P,null,T(d.value,e=>(h(),p(b,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128)),t[20]||(t[20]=D())]),_:1},8,["modelValue"])]),_:1})]),_:1}),t[24]||(t[24]=D()),k(m,{span:12},{default:I(()=>[k(c,{label:"入学日期",prop:"admissionDate"},{default:I(()=>[k(w,{modelValue:o.admissionDate,"onUpdate:modelValue":t[4]||(t[4]=e=>o.admissionDate=e),type:"date",placeholder:"选择入学日期","value-format":"YYYY-MM-DD",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),t[25]||(t[25]=D()),k(m,{span:12},{default:I(()=>[k(c,{label:"预计毕业",prop:"graduationDate"},{default:I(()=>[k(w,{modelValue:o.graduationDate,"onUpdate:modelValue":t[5]||(t[5]=e=>o.graduationDate=e),type:"date",placeholder:"选择毕业日期","value-format":"YYYY-MM-DD",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),t[26]||(t[26]=D()),k(m,{span:12},{default:I(()=>[k(c,{label:"身份证号",prop:"idCard"},{default:I(()=>[k(u,{modelValue:o.idCard,"onUpdate:modelValue":t[6]||(t[6]=e=>o.idCard=e),placeholder:"请输入身份证号"},null,8,["modelValue"])]),_:1})]),_:1}),t[27]||(t[27]=D()),k(m,{span:12},{default:I(()=>[k(c,{label:"出生日期",prop:"birthday"},{default:I(()=>[k(w,{modelValue:o.birthday,"onUpdate:modelValue":t[7]||(t[7]=e=>o.birthday=e),type:"date",placeholder:"选择出生日期","value-format":"YYYY-MM-DD",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),t[28]||(t[28]=D()),k(m,{span:24},{default:I(()=>[k(c,{label:"家庭住址",prop:"address"},{default:I(()=>[k(u,{modelValue:o.address,"onUpdate:modelValue":t[8]||(t[8]=e=>o.address=e),placeholder:"请输入家庭住址"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),t[32]||(t[32]=D()),k(E,{label:"账号信息",name:"account"},{default:I(()=>[k(C,{gutter:20},{default:I(()=>[k(m,{span:12},{default:I(()=>[k(c,{label:"用户名",prop:"username"},{default:I(()=>[k(u,{modelValue:o.username,"onUpdate:modelValue":t[9]||(t[9]=e=>o.username=e),placeholder:"请输入用户名（默认与学号相同）"},null,8,["modelValue"])]),_:1})]),_:1}),t[29]||(t[29]=D()),k(m,{span:12},{default:I(()=>[k(c,{label:"密码",prop:"password"},{default:I(()=>[k(u,{modelValue:o.password,"onUpdate:modelValue":t[10]||(t[10]=e=>o.password=e),type:"password",placeholder:"请输入密码","show-password":""},null,8,["modelValue"])]),_:1})]),_:1}),t[30]||(t[30]=D()),k(m,{span:12},{default:I(()=>[k(c,{label:"邮箱",prop:"email"},{default:I(()=>[k(u,{modelValue:o.email,"onUpdate:modelValue":t[11]||(t[11]=e=>o.email=e),placeholder:"请输入邮箱"},null,8,["modelValue"])]),_:1})]),_:1}),t[31]||(t[31]=D()),k(m,{span:12},{default:I(()=>[k(c,{label:"手机号码",prop:"phone"},{default:I(()=>[k(u,{modelValue:o.phone,"onUpdate:modelValue":t[12]||(t[12]=e=>o.phone=e),placeholder:"请输入手机号码"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t[36]||(t[36]=D()),x("div",ln,[k(i,{onClick:v},{default:I(()=>t[33]||(t[33]=[D("取消")])),_:1}),t[35]||(t[35]=D()),k(i,{type:"primary",onClick:f,loading:n.value},{default:I(()=>t[34]||(t[34]=[D("提交")])),_:1},8,["loading"])])]),_:1},8,["model"])]),_:1})])}}},[["__scopeId","data-v-934cb6bc"]]),on=Object.freeze(Object.defineProperty({__proto__:null,default:nn},Symbol.toStringTag,{value:"Module"})),rn={class:"student-container"},sn={key:0,class:"loading-container"},dn={class:"loading-content"},un={key:1,class:"error-container"},cn={class:"error-content"},pn={class:"error-message"},mn={class:"action-buttons"},hn={class:"empty-data-tip"},fn={key:0},vn={key:1},gn={class:"empty-data-tip"},_n={key:0},bn={key:1},yn={class:"empty-data-tip"},wn={key:0},Vn={key:1},xn={class:"card-header"},kn={class:"header-buttons"},In={key:0,class:"batch-actions"},Cn={class:"batch-buttons"},En={class:"pagination-container"},Dn={class:"statistics-header"},Pn={class:"dialog-footer"},Tn={class:"el-upload__tip"},On={class:"dialog-footer"},$n=ha({__name:"index",setup(e){we([Ve,xe,ke,Ie,Ce,Ee,De]);const t=_(),a=pa(),l=y(!0),n=y(!1),o=y(""),r=y(0);Z((e,t,a)=>(console.error("学生组件捕获到错误:",e),console.error("错误详情:",a),l.value=!1,n.value=!0,o.value=`${e.message||"未知错误"}`,!1));const s=()=>{r.value>=3?$e.warning("多次重试失败，请检查网络或联系管理员"):(r.value++,l.value=!0,n.value=!1,o.value="",console.log(`第${r.value}次尝试加载学生列表`),setTimeout(()=>{F()},500))},d=()=>{t.push("/dashboard")},i=y([]),u=y(0),m=y(!1),f=J({pageNum:1,pageSize:10,studentNo:"",name:"",classId:null,status:null,gender:null,majorId:null,departmentId:null,phone:"",email:"",startDate:"",endDate:""}),v=y([]),g=y([]),b=y([]),w=y([]),C=y([]),E=y([{prop:"studentNo",label:"学号",visible:!0},{prop:"name",label:"姓名",visible:!0},{prop:"gender",label:"性别",visible:!0},{prop:"class",label:"班级",visible:!0},{prop:"major",label:"专业",visible:!0},{prop:"department",label:"院系",visible:!0},{prop:"admissionDate",label:"入学日期",visible:!0},{prop:"graduationDate",label:"预计毕业",visible:!1},{prop:"statusDesc",label:"状态",visible:!0},{prop:"phone",label:"手机号码",visible:!0},{prop:"email",label:"邮箱",visible:!1}]),$=J({visible:!1}),A=y({}),R=J({visible:!1,fileList:[]}),j=y(!1),N=y(null),U=y(null);let z=null,B=null;const q=y(null),F=()=>{if(console.log("------初始化学生列表页面数据------"),console.log("当前用户信息:",a.name,"角色:",a.roles),!a.token)return console.error("未检测到有效的用户Token"),n.value=!0,o.value="登录已过期，请重新登录",void(l.value=!1);try{if(!a.roles.some(e=>["admin","teacher","student"].includes(e)))return console.error("用户无权访问学生列表"),n.value=!0,o.value="您没有权限访问此页面",void(l.value=!1);Promise.allSettled([W(),H(),G()]).then(e=>{const t=e.filter(e=>"rejected"===e.status);return t.length>0&&console.warn(`${t.length}个基础数据加载失败，但将继续加载学生列表`),Q()}).then(()=>{l.value=!1,console.log("学生列表页面数据加载完成"),ee()}).catch(e=>{console.error("加载学生数据时出错:",e),n.value=!0,o.value=e.message||"加载学生数据失败",l.value=!1})}catch(e){console.error("初始化页面时出错:",e),n.value=!0,o.value=e.message||"初始化页面失败",l.value=!1}},W=()=>(console.log("开始获取班级列表..."),Zl().then(e=>{console.log("班级列表获取成功:",e.data),b.value=e.data||[]}).catch(e=>(console.error("获取班级列表失败:",e),console.error("错误详情:",e.response||e.message||e),Promise.reject(new Error("获取班级列表失败"))))),H=()=>(console.log("开始获取专业列表..."),Rl().then(e=>{console.log("专业列表获取成功:",e.data),Array.isArray(e.data)?w.value=e.data:(console.warn("专业列表数据格式异常:",e.data),w.value=[])}).catch(e=>(console.error("获取专业列表失败:",e),$e.warning("获取专业列表失败，搜索功能可能受限"),w.value=[],Promise.resolve()))),G=()=>(console.log("开始获取院系列表..."),Al().then(e=>{console.log("院系列表获取成功:",e.data),Array.isArray(e.data)?C.value=e.data:(console.warn("院系列表数据格式异常:",e.data),C.value=[])}).catch(e=>(console.error("获取院系列表失败:",e),$e.warning("获取院系列表失败，搜索功能可能受限"),C.value=[],Promise.resolve()))),Q=()=>{return console.log("开始获取学生列表..."),m.value=!0,(e=f,console.log("调用学生列表API, 参数:",e),qt({url:"/student/page",method:"get",params:e}).then(e=>(console.log("获取学生列表成功, 返回数据:",e),e)).catch(e=>(console.error("获取学生列表失败, 错误:",e),Promise.reject(e)))).then(e=>{console.log("获取学生列表成功:",e),i.value=e.data.list,u.value=e.data.total,m.value=!1,j.value&&Ge()}).catch(e=>(console.error("获取学生列表失败:",e),console.error("错误详情:",e.response||e.message||e),m.value=!1,Promise.reject(new Error("获取学生列表失败"))));var e};c(()=>{console.log("------学生列表组件onMounted开始------"),console.log("学生列表组件已加载"),console.log("当前路由信息:",t.currentRoute.value),console.log("当前用户信息:",a.name,"角色:",a.roles,"Token是否存在:",!!a.token),F(),console.log("------学生列表组件onMounted结束------")}),K(()=>{console.log("学生列表组件已卸载"),z&&(z.dispose(),z=null),B&&(B.dispose(),B=null)});const ee=()=>{const e=localStorage.getItem("student_column_settings");if(e)try{JSON.parse(e).forEach(e=>{const t=E.value.find(t=>t.prop===e.prop);t&&(t.visible=e.visible)})}catch(t){console.error("恢复列设置失败:",t)}},te=()=>{f.pageNum=1,Q()},ie=()=>{f.studentNo="",f.name="",f.classId=null,f.gender=null,f.majorId=null,f.departmentId=null,f.phone="",f.status=null,f.startDate="",f.endDate="",v.value=[],te()},he=e=>{f.pageNum=e,Q()},fe=e=>{f.pageSize=e,Q()},ve=()=>{t.push("/student-add")},ge=e=>{try{console.log("编辑学生信息:",e.id),t.push(`/student-edit/${e.id}`)}catch(a){console.error("跳转到编辑页面失败:",a),$e.error("跳转失败，请刷新页面后重试")}},_e=()=>{Jl(f).then(e=>{const t=new Blob([e.data],{type:"application/vnd.ms-excel"}),a=document.createElement("a");a.href=URL.createObjectURL(t),a.download="学生信息.xlsx",a.click(),URL.revokeObjectURL(a.href),$e.success("导出成功")}).catch(e=>{console.error("导出学生信息失败:",e),$e.error("导出学生信息失败")})},be=()=>{R.fileList=[],R.visible=!0},ye=()=>{qt({url:"/student/template",method:"get",responseType:"blob"}).then(e=>{const t=new Blob([e.data],{type:"application/vnd.ms-excel"}),a=document.createElement("a");a.href=URL.createObjectURL(t),a.download="学生信息导入模板.xlsx",a.click(),URL.revokeObjectURL(a.href)}).catch(e=>{console.error("下载模板失败:",e),$e.error("下载模板失败")})},Te=e=>!("application/vnd.ms-excel"!==e.type&&"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"!==e.type)||($e.error("只能上传Excel文件!"),!1),Oe=(e,t)=>{R.fileList=t},Le=()=>{if(0===R.fileList.length)return void $e.warning("请选择要导入的文件");const e=new FormData,t=R.fileList[0].raw||R.fileList[0];var a;(console.log("准备导入文件:",{name:t.name,size:t.size,type:t.type}),t&&0!==t.size)?(e.append("file",t),(a=e,qt({url:"/student/import",method:"post",data:a,headers:{"Content-Type":"multipart/form-data"}})).then(e=>{console.log("导入结果:",e);const t=e.data||{},a=t.total||0,l=t.success||0,n=t.fail||0;0===a?$e.warning("Excel文件中没有数据"):0===n?$e.success(`导入成功！共导入${l}条数据`):($e.warning(`导入完成！成功${l}条，失败${n}条`),t.failList&&t.failList.length>0&&console.error("导入失败的数据:",t.failList)),R.visible=!1,R.fileList=[],Q()}).catch(e=>{console.error("导入学生信息失败:",e),$e.error(e.message||"导入学生信息失败")})):$e.error("文件为空，请选择有效的Excel文件")},Se=e=>{switch(e){case 0:return"success";case 1:return"";case 2:return"warning";case 3:return"danger";default:return"info"}},je=e=>{const t=E.value.find(t=>t.prop===e);return!t||t.visible},Ne=e=>{const t=E.value.find(t=>t.prop===e);t&&(t.visible=!t.visible,localStorage.setItem("student_column_settings",JSON.stringify(E.value)))},Be=()=>{0!==g.value.length?Ae.confirm(`确定要删除选中的 ${g.value.length} 条记录吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{const e=g.value.map(e=>e.id);Promise.all(e.map(e=>Gl(e))).then(()=>{$e.success("批量删除成功"),He(),Q()}).catch(e=>{console.error("批量删除失败:",e),$e.error("批量删除失败")})}).catch(()=>{}):$e.warning("请至少选择一条记录")},qe=e=>{if(0===g.value.length)return void $e.warning("请至少选择一条记录");const t=["在读","毕业","休学","退学"][e];Ae.confirm(`确定要将选中的 ${g.value.length} 条记录状态修改为【${t}】吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{(function(e,t){return qt({url:"/student/batch/status",method:"put",data:{ids:e,status:t}})})(g.value.map(e=>e.id),e).then(()=>{$e.success(`批量修改状态为【${t}】成功`),He(),Q()}).catch(e=>{console.error("批量修改状态失败:",e),$e.error("批量修改状态失败")})}).catch(()=>{})},Ye=()=>{if(0===g.value.length)return void $e.warning("请至少选择一条记录");const e=g.value.map(e=>e.id);Jl({ids:e.join(",")}).then(t=>{const a=new Blob([t.data],{type:"application/vnd.ms-excel"}),l=document.createElement("a");l.href=URL.createObjectURL(a),l.download=`学生信息_选中${e.length}条.xlsx`,l.click(),URL.revokeObjectURL(l.href),$e.success("导出选中记录成功")}).catch(e=>{console.error("导出选中记录失败:",e),$e.error("导出选中记录失败")})},Fe=e=>{g.value=e},We=()=>{v.value&&2===v.value.length?(f.startDate=v.value[0],f.endDate=v.value[1]):(f.startDate="",f.endDate="")},He=()=>{q.value&&q.value.clearSelection(),g.value=[]},Ge=()=>{qt({url:"/student/statistics",method:"get"}).then(e=>{const t=e.data;Y(()=>{Je(t.statusDistribution),Xe(t.departmentDistribution)})}).catch(e=>{console.error("获取统计数据失败:",e)})},Je=e=>{if(!N.value)return;z&&z.dispose(),z=Pe(N.value);const t=[];e&&(e.inSchool&&t.push({name:"在读",value:e.inSchool}),e.graduated&&t.push({name:"毕业",value:e.graduated}),e.leave&&t.push({name:"休学",value:e.leave}),e.dropout&&t.push({name:"退学",value:e.dropout}));const a={title:{text:"学生状态分布",left:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:t.map(e=>e.name)},series:[{name:"学生状态",type:"pie",radius:"55%",center:["50%","60%"],data:t,emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};z.setOption(a)},Xe=e=>{if(!U.value)return;B&&B.dispose(),B=Pe(U.value);const t={title:{text:"院系学生分布",left:"center"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},xAxis:{type:"category",data:e.map(e=>e.name),axisLabel:{interval:0,rotate:30}},yAxis:{type:"value"},series:[{name:"学生数量",type:"bar",data:e.map(e=>e.count),itemStyle:{color:function(e){const t=["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4"];return t[e.dataIndex%t.length]}}}]};B.setOption(t)},Ze=()=>{j.value=!j.value,j.value&&Ge()};return(e,t)=>{const a=Re,r=it,c=Qe,_=tt,y=at,z=ot,B=rt,Y=wt,F=ut,W=bt,H=Ue,G=ze,J=Me,Z=kt,K=mt,ee=ht,we=ft,Ve=vt,xe=lt,ke=st,Ie=It,Ce=Ct,Ee=ct,De=Et,Pe=pt,Ge=X("hasPerms"),Je=_t;return h(),V("div",rn,[l.value?(h(),V("div",sn,[k(c,{class:"loading-card"},{default:I(()=>[x("div",dn,[k(a,{class:"loading-icon"},{default:I(()=>[k(S(ue))]),_:1}),t[18]||(t[18]=D()),t[19]||(t[19]=x("div",null,"正在加载学生信息，请稍候...",-1)),t[20]||(t[20]=D()),k(r,{onClick:s,style:{"margin-top":"15px"}},{default:I(()=>t[17]||(t[17]=[D("重新加载")])),_:1})])]),_:1})])):n.value?(h(),V("div",un,[k(c,{class:"error-card"},{default:I(()=>[x("div",cn,[k(a,{class:"error-icon"},{default:I(()=>[k(S(ce))]),_:1}),t[24]||(t[24]=D()),t[25]||(t[25]=x("div",null,"加载学生信息时出错",-1)),t[26]||(t[26]=D()),x("div",pn,O(o.value),1),t[27]||(t[27]=D()),x("div",mn,[k(r,{onClick:d},{default:I(()=>t[21]||(t[21]=[D("返回首页")])),_:1}),t[23]||(t[23]=D()),k(r,{type:"primary",onClick:s},{default:I(()=>t[22]||(t[22]=[D("重试")])),_:1})])])]),_:1})])):(h(),V(P,{key:2},[k(c,{class:"search-card",shadow:"hover"},{default:I(()=>[k(F,{model:f,ref:"queryForm",inline:!0},{default:I(()=>[k(y,{label:"学号",prop:"studentNo"},{default:I(()=>[k(_,{modelValue:f.studentNo,"onUpdate:modelValue":t[0]||(t[0]=e=>f.studentNo=e),placeholder:"请输入学号",clearable:""},null,8,["modelValue"])]),_:1}),t[38]||(t[38]=D()),k(y,{label:"姓名",prop:"name"},{default:I(()=>[k(_,{modelValue:f.name,"onUpdate:modelValue":t[1]||(t[1]=e=>f.name=e),placeholder:"请输入姓名",clearable:""},null,8,["modelValue"])]),_:1}),t[39]||(t[39]=D()),k(y,{label:"班级",prop:"classId"},{default:I(()=>[k(B,{modelValue:f.classId,"onUpdate:modelValue":t[2]||(t[2]=e=>f.classId=e),placeholder:"请选择班级",clearable:"",style:{width:"100%"}},{empty:I(()=>[x("div",hn,[0===b.value.length?(h(),V("span",fn,"暂无班级数据")):(h(),V("span",vn,"加载班级数据中..."))])]),default:I(()=>[(h(!0),V(P,null,T(b.value,e=>(h(),p(z,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128)),t[28]||(t[28]=D())]),_:1},8,["modelValue"])]),_:1}),t[40]||(t[40]=D()),k(y,{label:"性别",prop:"gender"},{default:I(()=>[k(B,{modelValue:f.gender,"onUpdate:modelValue":t[3]||(t[3]=e=>f.gender=e),placeholder:"请选择性别",clearable:"",style:{width:"100%"}},{default:I(()=>[k(z,{label:"男",value:1}),t[29]||(t[29]=D()),k(z,{label:"女",value:2})]),_:1},8,["modelValue"])]),_:1}),t[41]||(t[41]=D()),k(y,{label:"专业",prop:"majorId"},{default:I(()=>[k(B,{modelValue:f.majorId,"onUpdate:modelValue":t[4]||(t[4]=e=>f.majorId=e),placeholder:"请选择专业",clearable:"",style:{width:"100%"}},{empty:I(()=>[x("div",gn,[0===w.value.length?(h(),V("span",_n,"暂无专业数据")):(h(),V("span",bn,"加载专业数据中..."))])]),default:I(()=>[(h(!0),V(P,null,T(w.value,e=>(h(),p(z,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128)),t[30]||(t[30]=D())]),_:1},8,["modelValue"])]),_:1}),t[42]||(t[42]=D()),k(y,{label:"院系",prop:"departmentId"},{default:I(()=>[k(B,{modelValue:f.departmentId,"onUpdate:modelValue":t[5]||(t[5]=e=>f.departmentId=e),placeholder:"请选择院系",clearable:"",style:{width:"100%"}},{empty:I(()=>[x("div",yn,[0===C.value.length?(h(),V("span",wn,"暂无院系数据")):(h(),V("span",Vn,"加载院系数据中..."))])]),default:I(()=>[(h(!0),V(P,null,T(C.value,e=>(h(),p(z,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128)),t[31]||(t[31]=D())]),_:1},8,["modelValue"])]),_:1}),t[43]||(t[43]=D()),k(y,{label:"手机号码",prop:"phone"},{default:I(()=>[k(_,{modelValue:f.phone,"onUpdate:modelValue":t[6]||(t[6]=e=>f.phone=e),placeholder:"请输入手机号码",clearable:""},null,8,["modelValue"])]),_:1}),t[44]||(t[44]=D()),k(y,{label:"状态",prop:"status"},{default:I(()=>[k(B,{modelValue:f.status,"onUpdate:modelValue":t[7]||(t[7]=e=>f.status=e),placeholder:"请选择状态",clearable:"",style:{width:"100%"}},{default:I(()=>[k(z,{label:"在读",value:0}),t[32]||(t[32]=D()),k(z,{label:"毕业",value:1}),t[33]||(t[33]=D()),k(z,{label:"休学",value:2}),t[34]||(t[34]=D()),k(z,{label:"退学",value:3})]),_:1},8,["modelValue"])]),_:1}),t[45]||(t[45]=D()),k(y,{label:"入学时间"},{default:I(()=>[k(Y,{modelValue:v.value,"onUpdate:modelValue":t[8]||(t[8]=e=>v.value=e),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"YYYY-MM-DD",onChange:We},null,8,["modelValue"])]),_:1}),t[46]||(t[46]=D()),k(y,null,{default:I(()=>[k(r,{type:"primary",onClick:te},{default:I(()=>[k(a,null,{default:I(()=>[k(S(ae))]),_:1}),t[35]||(t[35]=D("查询\n          "))]),_:1}),t[37]||(t[37]=D()),k(r,{onClick:ie},{default:I(()=>[k(a,null,{default:I(()=>[k(S(le))]),_:1}),t[36]||(t[36]=D("重置\n          "))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),t[135]||(t[135]=D()),k(c,{class:"table-card",shadow:"hover"},{header:I(()=>[x("div",xn,[t[56]||(t[56]=x("span",{class:"header-title"},"学生信息列表",-1)),t[57]||(t[57]=D()),x("div",kn,[M((h(),p(r,{type:"primary",onClick:ve},{default:I(()=>[k(a,null,{default:I(()=>[k(S(ne))]),_:1}),t[47]||(t[47]=D("新增\n            "))]),_:1})),[[Ge,["education:student:add"]]]),t[52]||(t[52]=D()),M((h(),p(r,{type:"success",onClick:be},{default:I(()=>[k(a,null,{default:I(()=>[k(S(oe))]),_:1}),t[48]||(t[48]=D("导入\n            "))]),_:1})),[[Ge,["education:student:import"]]]),t[53]||(t[53]=D()),M((h(),p(r,{onClick:_e},{default:I(()=>[k(a,null,{default:I(()=>[k(S(re))]),_:1}),t[49]||(t[49]=D("导出\n            "))]),_:1})),[[Ge,["education:student:export"]]]),t[54]||(t[54]=D()),M((h(),p(r,{type:"info",onClick:Ze},{default:I(()=>[k(a,null,{default:I(()=>[k(S(pe))]),_:1}),t[50]||(t[50]=D("统计\n            "))]),_:1})),[[Ge,["education:student:list"]]]),t[55]||(t[55]=D()),k(J,{onCommand:Ne,"split-button":"",type:"info"},{dropdown:I(()=>[k(G,null,{default:I(()=>[(h(!0),V(P,null,T(E.value,e=>(h(),p(H,{key:e.prop,command:e.prop},{default:I(()=>[k(W,{modelValue:e.visible,"onUpdate:modelValue":t=>e.visible=t},{default:I(()=>[D(O(e.label),1)]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["command"]))),128))]),_:1})]),default:I(()=>[k(a,null,{default:I(()=>[k(S(se))]),_:1}),t[51]||(t[51]=D(" 列设置\n              "))]),_:1})])])]),default:I(()=>[t[101]||(t[101]=D()),g.value.length>0?(h(),V("div",In,[k(Z,{title:"已选择",type:"info",closable:!1,"show-icon":""},{default:I(()=>[x("span",null,[t[58]||(t[58]=D("已选择 ")),x("b",null,O(g.value.length),1),t[59]||(t[59]=D(" 条记录"))]),t[61]||(t[61]=D()),k(r,{link:"",onClick:He},{default:I(()=>t[60]||(t[60]=[D("取消选择")])),_:1})]),_:1}),t[74]||(t[74]=D()),x("div",Cn,[M((h(),p(r,{type:"danger",onClick:Be},{default:I(()=>t[62]||(t[62]=[D("\n            批量删除\n          ")])),_:1})),[[Ge,["education:student:remove"]]]),t[72]||(t[72]=D()),k(J,{onCommand:qe,"split-button":"",type:"primary"},{dropdown:I(()=>[k(G,null,{default:I(()=>[k(H,{command:0},{default:I(()=>t[63]||(t[63]=[D("设为在读")])),_:1}),t[67]||(t[67]=D()),k(H,{command:1},{default:I(()=>t[64]||(t[64]=[D("设为毕业")])),_:1}),t[68]||(t[68]=D()),k(H,{command:2},{default:I(()=>t[65]||(t[65]=[D("设为休学")])),_:1}),t[69]||(t[69]=D()),k(H,{command:3},{default:I(()=>t[66]||(t[66]=[D("设为退学")])),_:1})]),_:1})]),default:I(()=>[t[70]||(t[70]=D("\n            批量修改状态\n            "))]),_:1}),t[73]||(t[73]=D()),k(r,{type:"success",onClick:Ye},{default:I(()=>t[71]||(t[71]=[D("导出选中记录")])),_:1})])])):L("",!0),t[102]||(t[102]=D()),M((h(),p(we,{data:i.value,stripe:"",border:"",style:{width:"100%"},"header-cell-style":{background:"#f5f7fa",color:"#606266"},onSelectionChange:Fe,ref_key:"studentTable",ref:q},{default:I(()=>[k(K,{type:"selection",width:"55",align:"center",fixed:"left"}),t[88]||(t[88]=D()),k(K,{type:"index",label:"序号",width:"60",align:"center",fixed:"left"}),t[89]||(t[89]=D()),je("studentNo")?(h(),p(K,{key:0,prop:"studentNo",label:"学号",width:"120",fixed:"left"})):L("",!0),t[90]||(t[90]=D()),je("name")?(h(),p(K,{key:1,prop:"name",label:"姓名",width:"100",fixed:"left"})):L("",!0),t[91]||(t[91]=D()),je("gender")?(h(),p(K,{key:2,prop:"genderDesc",label:"性别",width:"60",align:"center"})):L("",!0),t[92]||(t[92]=D()),je("class")?(h(),p(K,{key:3,prop:"className",label:"班级",width:"180"})):L("",!0),t[93]||(t[93]=D()),je("major")?(h(),p(K,{key:4,prop:"majorName",label:"专业",width:"180"})):L("",!0),t[94]||(t[94]=D()),je("department")?(h(),p(K,{key:5,prop:"departmentName",label:"院系",width:"150"})):L("",!0),t[95]||(t[95]=D()),je("admissionDate")?(h(),p(K,{key:6,prop:"admissionDate",label:"入学日期",width:"120",align:"center"})):L("",!0),t[96]||(t[96]=D()),je("graduationDate")?(h(),p(K,{key:7,prop:"graduationDate",label:"预计毕业",width:"120",align:"center"})):L("",!0),t[97]||(t[97]=D()),je("statusDesc")?(h(),p(K,{key:8,prop:"statusDesc",label:"状态",width:"80",align:"center"},{default:I(e=>[k(ee,{type:Se(e.row.status)},{default:I(()=>[D(O(e.row.statusDesc),1)]),_:2},1032,["type"])]),_:1})):L("",!0),t[98]||(t[98]=D()),je("phone")?(h(),p(K,{key:9,prop:"phone",label:"手机号码",width:"130"})):L("",!0),t[99]||(t[99]=D()),je("email")?(h(),p(K,{key:10,prop:"email",label:"邮箱",width:"180"})):L("",!0),t[100]||(t[100]=D()),k(K,{label:"操作","min-width":"170",fixed:"right"},{default:I(e=>[M((h(),p(r,{type:"primary",link:"",onClick:t=>ge(e.row)},{default:I(()=>t[75]||(t[75]=[D("\n              编辑\n            ")])),_:2},1032,["onClick"])),[[Ge,["education:student:edit"]]]),t[86]||(t[86]=D()),M((h(),p(r,{type:"primary",link:"",onClick:t=>{return a=e.row,$.visible=!0,void Hl(a.id).then(e=>{A.value=e.data}).catch(e=>{console.error("获取学生详情失败:",e),$e.error("获取学生详情失败")});var a}},{default:I(()=>t[76]||(t[76]=[D("\n              详情\n            ")])),_:2},1032,["onClick"])),[[Ge,["education:student:query"]]]),t[87]||(t[87]=D()),k(J,null,{dropdown:I(()=>[k(G,null,{default:I(()=>[k(H,{onClick:t=>{return a=e.row,$e.info(`将显示学生 ${a.name} 的课程信息`),void Ae.confirm(`是否查看学生 ${a.name} 的课程信息？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"info"}).then(()=>{$e({type:"success",message:"功能开发中，即将上线"})}).catch(()=>{});var a}},{default:I(()=>t[78]||(t[78]=[D("查看课程")])),_:2},1032,["onClick"]),t[82]||(t[82]=D()),k(H,{onClick:t=>{return a=e.row,$e.info(`将显示学生 ${a.name} 的成绩信息`),void Ae.confirm(`是否查看学生 ${a.name} 的成绩信息？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"info"}).then(()=>{$e({type:"success",message:"功能开发中，即将上线"})}).catch(()=>{});var a}},{default:I(()=>t[79]||(t[79]=[D("查看成绩")])),_:2},1032,["onClick"]),t[83]||(t[83]=D()),k(H,{onClick:t=>{return a=e.row,$e.info(`将显示学生 ${a.name} 的考勤信息`),void Ae.confirm(`是否查看学生 ${a.name} 的考勤信息？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"info"}).then(()=>{$e({type:"success",message:"功能开发中，即将上线"})}).catch(()=>{});var a}},{default:I(()=>t[80]||(t[80]=[D("查看考勤")])),_:2},1032,["onClick"]),t[84]||(t[84]=D()),k(H,{divided:"",onClick:t=>{return a=e.row,void Ae.confirm(`确定要删除学生 ${a.name} 吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{Gl(a.id).then(()=>{$e.success("删除成功"),Q()}).catch(e=>{console.error("删除学生失败:",e),$e.error("删除学生失败")})}).catch(()=>{});var a},class:"text-danger"},{default:I(()=>t[81]||(t[81]=[D("删除")])),_:2},1032,["onClick"])]),_:2},1024)]),default:I(()=>[k(r,{link:"",type:"primary"},{default:I(()=>[t[77]||(t[77]=D("\n                更多")),k(a,{class:"el-icon--right"},{default:I(()=>[k(S(de))]),_:1})]),_:1}),t[85]||(t[85]=D())]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[Je,m.value]]),t[103]||(t[103]=D()),x("div",En,[k(Ve,{"current-page":f.pageNum,"onUpdate:currentPage":t[9]||(t[9]=e=>f.pageNum=e),"page-size":f.pageSize,"onUpdate:pageSize":t[10]||(t[10]=e=>f.pageSize=e),"page-sizes":[10,20,50,100],background:!0,layout:"total, sizes, prev, pager, next, jumper",total:u.value,onSizeChange:fe,onCurrentChange:he},null,8,["current-page","page-size","total"])])]),_:1}),t[136]||(t[136]=D()),j.value?(h(),p(ke,{key:0,gutter:20,class:"statistics-row"},{default:I(()=>[k(xe,{span:24},{default:I(()=>[k(c,{class:"statistics-card",shadow:"hover"},{header:I(()=>[x("div",Dn,[t[105]||(t[105]=x("span",null,"学生数据统计",-1)),t[106]||(t[106]=D()),k(r,{onClick:t[11]||(t[11]=e=>j.value=!1),link:""},{default:I(()=>t[104]||(t[104]=[D("关闭")])),_:1})])]),default:I(()=>[t[108]||(t[108]=D()),k(ke,{gutter:20},{default:I(()=>[k(xe,{span:12},{default:I(()=>[x("div",{ref_key:"statusChartRef",ref:N,class:"chart-container"},null,512)]),_:1}),t[107]||(t[107]=D()),k(xe,{span:12},{default:I(()=>[x("div",{ref_key:"departmentChartRef",ref:U,class:"chart-container"},null,512)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):L("",!0),t[137]||(t[137]=D()),k(Ee,{title:"学生详情",modelValue:$.visible,"onUpdate:modelValue":t[14]||(t[14]=e=>$.visible=e),width:"700px","append-to-body":""},{footer:I(()=>[x("div",Pn,[k(r,{onClick:t[12]||(t[12]=e=>$.visible=!1)},{default:I(()=>t[122]||(t[122]=[D("关闭")])),_:1}),t[124]||(t[124]=D()),M((h(),p(r,{type:"primary",onClick:t[13]||(t[13]=e=>ge(A.value))},{default:I(()=>t[123]||(t[123]=[D("编辑")])),_:1})),[[Ge,["education:student:edit"]]])])]),default:I(()=>[k(Ce,{column:2,border:""},{default:I(()=>[k(Ie,{label:"学号"},{default:I(()=>[D(O(A.value.studentNo),1)]),_:1}),t[109]||(t[109]=D()),k(Ie,{label:"姓名"},{default:I(()=>[D(O(A.value.name),1)]),_:1}),t[110]||(t[110]=D()),k(Ie,{label:"性别"},{default:I(()=>[D(O(A.value.genderDesc),1)]),_:1}),t[111]||(t[111]=D()),k(Ie,{label:"班级"},{default:I(()=>[D(O(A.value.className),1)]),_:1}),t[112]||(t[112]=D()),k(Ie,{label:"专业"},{default:I(()=>[D(O(A.value.majorName),1)]),_:1}),t[113]||(t[113]=D()),k(Ie,{label:"院系"},{default:I(()=>[D(O(A.value.departmentName),1)]),_:1}),t[114]||(t[114]=D()),k(Ie,{label:"入学日期"},{default:I(()=>[D(O(A.value.admissionDate),1)]),_:1}),t[115]||(t[115]=D()),k(Ie,{label:"毕业日期"},{default:I(()=>[D(O(A.value.graduationDate),1)]),_:1}),t[116]||(t[116]=D()),k(Ie,{label:"身份证号"},{default:I(()=>[D(O(A.value.idCard),1)]),_:1}),t[117]||(t[117]=D()),k(Ie,{label:"出生日期"},{default:I(()=>[D(O(A.value.birthday),1)]),_:1}),t[118]||(t[118]=D()),k(Ie,{label:"手机号码"},{default:I(()=>[D(O(A.value.phone),1)]),_:1}),t[119]||(t[119]=D()),k(Ie,{label:"邮箱"},{default:I(()=>[D(O(A.value.email),1)]),_:1}),t[120]||(t[120]=D()),k(Ie,{label:"家庭住址",span:2},{default:I(()=>[D(O(A.value.address),1)]),_:1}),t[121]||(t[121]=D()),k(Ie,{label:"状态"},{default:I(()=>[k(ee,{type:Se(A.value.status)},{default:I(()=>[D(O(A.value.statusDesc),1)]),_:1},8,["type"])]),_:1})]),_:1}),t[125]||(t[125]=D())]),_:1},8,["modelValue"]),t[138]||(t[138]=D()),k(Ee,{title:"导入学生数据",modelValue:R.visible,"onUpdate:modelValue":t[16]||(t[16]=e=>R.visible=e),width:"500px","append-to-body":""},{footer:I(()=>[x("div",On,[k(r,{onClick:t[15]||(t[15]=e=>R.visible=!1)},{default:I(()=>t[131]||(t[131]=[D("取消")])),_:1}),t[133]||(t[133]=D()),k(r,{type:"primary",onClick:Le},{default:I(()=>t[132]||(t[132]=[D("确定")])),_:1})])]),default:I(()=>[k(Pe,{class:"upload-demo",drag:"",action:"#","auto-upload":!1,"on-change":Oe,"before-upload":Te,"file-list":R.fileList,multiple:!1},{tip:I(()=>[x("div",Tn,[t[127]||(t[127]=D("\n              只能上传Excel文件，且不超过10MB\n              ")),k(De,{type:"primary",onClick:ye},{default:I(()=>t[126]||(t[126]=[D("下载模板")])),_:1})])]),default:I(()=>[k(a,{class:"el-icon--upload"},{default:I(()=>[k(S(me))]),_:1}),t[128]||(t[128]=D()),t[129]||(t[129]=x("div",{class:"el-upload__text"},[D("\n            将文件拖到此处，或"),x("em",null,"点击上传")],-1)),t[130]||(t[130]=D())]),_:1},8,["file-list"]),t[134]||(t[134]=D())]),_:1},8,["modelValue"])],64))])}}},[["__scopeId","data-v-69348f87"]]),An=Object.freeze(Object.defineProperty({__proto__:null,default:$n},Symbol.toStringTag,{value:"Module"}));function Rn(e){return qt({url:`/teacher/${e}`,method:"get"})}function Ln(e){return qt({url:"/teacher",method:"post",data:e})}function Sn(e){return qt({url:"/teacher",method:"put",data:e})}function jn(e){return qt({url:`/teacher/${e}`,method:"delete"})}function Nn(e){return qt({url:`/teacher/resetPassword/${e}`,method:"put"})}function Un(e,t){return qt({url:`/teacher/courses/${e}`,method:"post",data:t})}function zn(e,t,a){const l=s({},a);return null!=e&&(l.teacherId=e),qt({url:`/teacher/courses/students/${t}`,method:"post",data:l})}function Mn(e,t,a){return qt({url:`/teacher/courses/${e}/grade/${t}`,method:"put",data:a})}function Bn(e,t,a){return qt(null==e?{url:`/teacher/courses/attendance/${t}`,method:"put",data:a}:{url:`/teacher/courses/${e}/attendance/${t}`,method:"put",data:a})}function qn(){return qt({url:"/teacher/list",method:"post",data:{pageNum:1,pageSize:1e3}})}const Yn={class:"teacher-add-container"},Fn={class:"card-header"},Wn={key:0,class:"loading-container"},Hn={class:"empty-data-tip"},Gn={key:0},Jn={key:1},Xn={class:"form-footer"},Zn=ha({__name:"add",setup(e){const t=_(),a=y(null),l=y("basic"),n=y(!1),o=y(!0),r=J({teacherNo:"",name:"",departmentId:null,title:"",gender:0,idCard:"",birthday:null,entryDate:null,status:0,username:"",password:"123456",email:"",phone:""}),s={teacherNo:[{required:!0,message:"请输入教师编号",trigger:"blur"},{pattern:/^[A-Za-z0-9]+$/,message:"教师编号只能包含字母和数字",trigger:"blur"}],name:[{required:!0,message:"请输入姓名",trigger:"blur"}],departmentId:[{required:!0,message:"请选择院系",trigger:"change"}],title:[{required:!0,message:"请选择职称",trigger:"blur"}],gender:[{required:!0,message:"请选择性别",trigger:"change"}],entryDate:[{required:!0,message:"请选择入职日期",trigger:"change"}],idCard:[{pattern:/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/,message:"身份证号格式不正确",trigger:"blur"}],username:[{required:!0,message:"请输入用户名",trigger:"blur"},{pattern:/^[a-zA-Z0-9]{4,16}$/,message:"用户名必须为4-16位字母或数字",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度不能少于6位",trigger:"blur"}],email:[{pattern:/^[\w.-]+@[\w.-]+\.\w+$/,message:"邮箱格式不正确",trigger:"blur"}],phone:[{pattern:/^1[3-9]\d{9}$/,message:"手机号格式不正确",trigger:"blur"}]},d=y([]),u=()=>{r.teacherNo&&!r.username&&(r.username=r.teacherNo)},m=()=>{const e=r.idCard;if(e&&(15===e.length||18===e.length))try{let t;t=15===e.length?`19${e.substring(6,12)}`:e.substring(6,14);const a=t.substring(0,4),l=t.substring(4,6),n=t.substring(6,8),o=parseInt(a),s=parseInt(l),d=parseInt(n);if(s<1||s>12)return void $e.warning("身份证号中的月份无效，请手动选择出生日期");if(d<1||d>[31,o%4==0&&o%100!=0||o%400==0?29:28,31,30,31,30,31,31,30,31,30,31][s-1])return void $e.warning("身份证号中的日期无效，请手动选择出生日期");const i=l.padStart(2,"0"),u=n.padStart(2,"0");r.birthday=`${a}-${i}-${u}`}catch(t){console.error("从身份证号提取出生日期失败:",t),$e.warning("无法从身份证号提取出生日期，请手动选择")}};c(()=>{console.log("教师新增页面组件已加载"),console.log("开始获取院系列表..."),o.value=!0,Al().then(e=>(console.log("院系列表获取成功:",e.data),Array.isArray(e.data)?d.value=e.data:(console.warn("院系列表数据格式不正确:",e.data),d.value=[],$e.warning("院系列表数据格式不正确")),Promise.resolve(e.data))).catch(e=>(console.error("获取院系列表失败:",e),d.value=[],$e.warning("获取院系列表失败，请刷新页面重试"),Promise.resolve([]))).finally(()=>{o.value=!1})});const f=()=>i(this,null,function*(){a.value&&(yield a.value.validate((e,o)=>i(this,null,function*(){var s,d;if(e)try{n.value=!0;try{yield Ae.confirm(`确定要添加教师 ${r.name} 吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"info"})}catch(i){return void(n.value=!1)}yield Ln(r);$e.success("教师添加成功");try{yield Ae.confirm("教师添加成功，是否继续添加？","操作成功",{confirmButtonText:"继续添加",cancelButtonText:"返回列表",type:"success"}),a.value&&a.value.resetFields(),r.teacherNo="",r.name="",r.username="",r.idCard="",r.birthday=null,r.email="",r.phone="",l.value="basic"}catch(i){t.push("/teacher-list")}}catch(i){console.error("添加教师失败:",i),$e.error((null==(d=null==(s=i.response)?void 0:s.data)?void 0:d.message)||"添加教师失败")}finally{n.value=!1}else console.log("表单验证不通过:",o),Object.keys(o).some(e=>["username","password","email","phone"].includes(e))?l.value="account":l.value="basic",$e.warning("请完善表单信息")})))}),v=()=>{t.push("/teacher-list")};return(e,t)=>{const i=Re,c=it,g=Dt,_=tt,b=at,y=lt,w=yt,C=Ge,E=ot,O=rt,$=wt,A=st,R=Vt,L=kt,j=xt,N=ut,U=Qe;return h(),V("div",Yn,[k(U,{class:"box-card"},{header:I(()=>[x("div",Fn,[t[15]||(t[15]=x("span",null,"新增教师",-1)),t[16]||(t[16]=D()),k(c,{onClick:v,link:""},{default:I(()=>[k(i,null,{default:I(()=>[k(S(ie))]),_:1}),t[14]||(t[14]=D("返回\n          "))]),_:1})])]),default:I(()=>[t[43]||(t[43]=D()),o.value?(h(),V("div",Wn,[k(g,{rows:10,animated:""})])):(h(),p(N,{key:1,ref_key:"teacherFormRef",ref:a,model:r,rules:s,"label-width":"100px",class:"teacher-form"},{default:I(()=>[k(j,{modelValue:l.value,"onUpdate:modelValue":t[13]||(t[13]=e=>l.value=e)},{default:I(()=>[k(R,{label:"基本信息",name:"basic"},{default:I(()=>[k(A,{gutter:20},{default:I(()=>[k(y,{span:12},{default:I(()=>[k(b,{label:"教师编号",prop:"teacherNo"},{default:I(()=>[k(_,{modelValue:r.teacherNo,"onUpdate:modelValue":t[0]||(t[0]=e=>r.teacherNo=e),placeholder:"请输入教师编号",onInput:u},null,8,["modelValue"])]),_:1})]),_:1}),t[26]||(t[26]=D()),k(y,{span:12},{default:I(()=>[k(b,{label:"姓名",prop:"name"},{default:I(()=>[k(_,{modelValue:r.name,"onUpdate:modelValue":t[1]||(t[1]=e=>r.name=e),placeholder:"请输入姓名"},null,8,["modelValue"])]),_:1})]),_:1}),t[27]||(t[27]=D()),k(y,{span:12},{default:I(()=>[k(b,{label:"性别",prop:"gender"},{default:I(()=>[k(C,{modelValue:r.gender,"onUpdate:modelValue":t[2]||(t[2]=e=>r.gender=e)},{default:I(()=>[k(w,{value:0},{default:I(()=>t[17]||(t[17]=[D("男")])),_:1}),t[19]||(t[19]=D()),k(w,{value:1},{default:I(()=>t[18]||(t[18]=[D("女")])),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),t[28]||(t[28]=D()),k(y,{span:12},{default:I(()=>[k(b,{label:"院系",prop:"departmentId"},{default:I(()=>[k(O,{modelValue:r.departmentId,"onUpdate:modelValue":t[3]||(t[3]=e=>r.departmentId=e),placeholder:"请选择院系",style:{width:"100%"}},{empty:I(()=>[x("div",Hn,[0===d.value.length?(h(),V("span",Gn,"暂无院系数据")):(h(),V("span",Jn,"加载院系数据中..."))])]),default:I(()=>[(h(!0),V(P,null,T(d.value,e=>(h(),p(E,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128)),t[20]||(t[20]=D())]),_:1},8,["modelValue"])]),_:1})]),_:1}),t[29]||(t[29]=D()),k(y,{span:12},{default:I(()=>[k(b,{label:"职称",prop:"title"},{default:I(()=>[k(O,{modelValue:r.title,"onUpdate:modelValue":t[4]||(t[4]=e=>r.title=e),placeholder:"请选择职称",style:{width:"100%"}},{default:I(()=>[k(E,{label:"教授",value:"教授"}),t[21]||(t[21]=D()),k(E,{label:"副教授",value:"副教授"}),t[22]||(t[22]=D()),k(E,{label:"讲师",value:"讲师"}),t[23]||(t[23]=D()),k(E,{label:"助教",value:"助教"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),t[30]||(t[30]=D()),k(y,{span:12},{default:I(()=>[k(b,{label:"入职日期",prop:"entryDate"},{default:I(()=>[k($,{modelValue:r.entryDate,"onUpdate:modelValue":t[5]||(t[5]=e=>r.entryDate=e),type:"date",placeholder:"选择入职日期","value-format":"YYYY-MM-DD",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),t[31]||(t[31]=D()),k(y,{span:12},{default:I(()=>[k(b,{label:"身份证号",prop:"idCard"},{default:I(()=>[k(_,{modelValue:r.idCard,"onUpdate:modelValue":t[6]||(t[6]=e=>r.idCard=e),placeholder:"请输入身份证号",onBlur:m},null,8,["modelValue"])]),_:1})]),_:1}),t[32]||(t[32]=D()),k(y,{span:12},{default:I(()=>[k(b,{label:"出生日期",prop:"birthday"},{default:I(()=>[k($,{modelValue:r.birthday,"onUpdate:modelValue":t[7]||(t[7]=e=>r.birthday=e),type:"date",placeholder:"选择出生日期","value-format":"YYYY-MM-DD",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),t[33]||(t[33]=D()),k(y,{span:12},{default:I(()=>[k(b,{label:"状态",prop:"status"},{default:I(()=>[k(O,{modelValue:r.status,"onUpdate:modelValue":t[8]||(t[8]=e=>r.status=e),placeholder:"请选择状态",style:{width:"100%"}},{default:I(()=>[k(E,{label:"在职",value:0}),t[24]||(t[24]=D()),k(E,{label:"离职",value:1}),t[25]||(t[25]=D()),k(E,{label:"退休",value:2})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),t[38]||(t[38]=D()),k(R,{label:"账号信息",name:"account"},{default:I(()=>[k(A,{gutter:20},{default:I(()=>[k(y,{span:12},{default:I(()=>[k(b,{label:"用户名",prop:"username"},{default:I(()=>[k(_,{modelValue:r.username,"onUpdate:modelValue":t[9]||(t[9]=e=>r.username=e),placeholder:"请输入用户名（默认与教师编号相同）"},null,8,["modelValue"])]),_:1})]),_:1}),t[34]||(t[34]=D()),k(y,{span:12},{default:I(()=>[k(b,{label:"密码",prop:"password"},{default:I(()=>[k(_,{modelValue:r.password,"onUpdate:modelValue":t[10]||(t[10]=e=>r.password=e),type:"password",placeholder:"请输入密码","show-password":""},null,8,["modelValue"])]),_:1})]),_:1}),t[35]||(t[35]=D()),k(y,{span:12},{default:I(()=>[k(b,{label:"邮箱",prop:"email"},{default:I(()=>[k(_,{modelValue:r.email,"onUpdate:modelValue":t[11]||(t[11]=e=>r.email=e),placeholder:"请输入邮箱"},null,8,["modelValue"])]),_:1})]),_:1}),t[36]||(t[36]=D()),k(y,{span:12},{default:I(()=>[k(b,{label:"手机号码",prop:"phone"},{default:I(()=>[k(_,{modelValue:r.phone,"onUpdate:modelValue":t[12]||(t[12]=e=>r.phone=e),placeholder:"请输入手机号码"},null,8,["modelValue"])]),_:1})]),_:1}),t[37]||(t[37]=D()),k(y,{span:24},{default:I(()=>[k(L,{title:"系统将自动为教师分配教师角色",type:"info","show-icon":"",closable:!1,style:{margin:"10px 0"}})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t[42]||(t[42]=D()),x("div",Xn,[k(c,{onClick:v},{default:I(()=>t[39]||(t[39]=[D("取消")])),_:1}),t[41]||(t[41]=D()),k(c,{type:"primary",onClick:f,loading:n.value},{default:I(()=>t[40]||(t[40]=[D("提交")])),_:1},8,["loading"])])]),_:1},8,["model"]))]),_:1})])}}},[["__scopeId","data-v-619eb264"]]),Kn=Object.freeze(Object.defineProperty({__proto__:null,default:Zn},Symbol.toStringTag,{value:"Module"})),Qn={class:"teacher-container"},eo={key:0,class:"more-search"},to={class:"card-header"},ao={class:"header-buttons"},lo={class:"pagination-container"},no={class:"dialog-footer"},oo={class:"dialog-footer"},ro={class:"dialog-footer"},so=ha({__name:"index",setup(e){_();const t=y([]),a=y(0),l=y(!1),n=y(!1),o=y(!1),r=J({pageNum:1,pageSize:10,teacherNo:"",name:"",departmentId:null,title:"",status:null}),u=y([]),m=()=>i(this,null,function*(){try{const e=yield Al();e&&e.data&&(u.value=e.data)}catch(e){console.error("获取院系列表失败:",e),$e.error("获取院系列表失败")}}),f=y("basic"),v=y(null),g=y(null),b=J({visible:!1,title:"",type:"add"}),w=J({id:void 0,teacherNo:"",name:"",departmentId:null,title:"",gender:0,idCard:"",birthday:"",entryDate:"",status:0,username:"",password:"123456",email:"",phone:""}),C={teacherNo:[{required:!0,message:"请输入教师编号",trigger:"blur"},{pattern:/^[A-Za-z0-9]+$/,message:"教师编号只能包含字母和数字",trigger:"blur"}],name:[{required:!0,message:"请输入姓名",trigger:"blur"}],departmentId:[{required:!0,message:"请选择院系",trigger:"change"}],title:[{required:!0,message:"请选择职称",trigger:"blur"}],gender:[{required:!0,message:"请选择性别",trigger:"change"}],entryDate:[{required:!0,message:"请选择入职日期",trigger:"change"}],idCard:[{pattern:/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/,message:"身份证号格式不正确",trigger:"blur"}],username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度不能少于6位",trigger:"blur"}],email:[{pattern:/^[\w.-]+@[\w.-]+\.\w+$/,message:"邮箱格式不正确",trigger:"blur"}],phone:[{pattern:/^1[3-9]\d{9}$/,message:"手机号格式不正确",trigger:"blur"}]},E=J({visible:!1}),$=y({}),A=e=>{if(!e)return"";try{const t=new Date(e);return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`}catch(t){return e}};c(()=>{j(),m(),Y(()=>{R()})});const R=()=>{document.querySelectorAll(".teacher-container .el-form-item").forEach(e=>{const t=e.querySelector(".el-form-item__label"),a=e.querySelector("input, select, textarea"),l=e.querySelector(".el-date-editor--daterange");t&&a&&a.id&&!l&&t.setAttribute("for",a.id)})},j=()=>i(this,null,function*(){l.value=!0;try{const l=yield(e=r,qt({url:"/teacher/list",method:"post",data:e}));t.value=l.data.list.map(e=>d(s({},e),{genderDesc:0===e.gender?"男":"女",statusDesc:["在职","离职","退休"][e.status]||"未知"})),a.value=l.data.total}catch(n){console.error("获取教师列表失败:",n),$e.error("获取教师列表失败")}finally{l.value=!1}var e}),N=()=>{r.pageNum=1,ce.value&&2===ce.value.length?(r.entryDateStart=ce.value[0],r.entryDateEnd=ce.value[1]):(r.entryDateStart=void 0,r.entryDateEnd=void 0),pe.value&&2===pe.value.length?(r.birthdayStart=pe.value[0],r.birthdayEnd=pe.value[1]):(r.birthdayStart=void 0,r.birthdayEnd=void 0),j()},U=()=>{var e;null==(e=g.value)||e.resetFields(),ce.value=[],pe.value=[],N()},z=e=>{r.pageNum=e,j()},B=e=>{r.pageSize=e,j()},q=()=>{G(),b.visible=!0,b.title="新增教师",b.type="add",Y(()=>{var e;null==(e=v.value)||e.clearValidate(),R()})},F=e=>{Ae.confirm(`确定要删除教师 ${e.name} 吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>i(this,null,function*(){try{yield jn(e.id),$e.success("删除成功"),j()}catch(t){console.error("删除教师失败:",t),$e.error("删除教师失败")}})).catch(()=>{})},W=e=>{Ae.confirm(`确定要重置教师 ${e.name} 的密码吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>i(this,null,function*(){try{yield Nn(e.id),$e.success("密码重置成功")}catch(t){console.error("密码重置失败:",t),$e.error("密码重置失败")}})).catch(()=>{})},H=()=>i(this,null,function*(){v.value&&(yield v.value.validate((e,t)=>i(this,null,function*(){var a,l;if(e)try{const e="add"===b.type?Ln:Sn;yield e(w),$e.success("add"===b.type?"新增成功":"修改成功"),b.visible=!1,j()}catch(n){console.error("add"===b.type?"新增失败":"修改失败",n),$e.error((null==(l=null==(a=n.response)?void 0:a.data)?void 0:l.message)||("add"===b.type?"新增失败":"修改失败"))}else console.log("表单校验不通过",t),Object.keys(t).some(e=>["username","password","email","phone"].includes(e))?f.value="account":f.value="basic"})))}),G=()=>{w.id=void 0,w.teacherNo="",w.name="",w.departmentId=null,w.title="",w.gender=0,w.idCard="",w.birthday="",w.entryDate="",w.status=0,w.username="",w.password="123456",w.email="",w.phone="",f.value="basic"},Z=e=>{switch(e){case 0:return"success";case 1:return"danger";case 2:return"info";default:return"warning"}},K=()=>{w.teacherNo&&!w.username&&(w.username=w.teacherNo)},Q=e=>(n.value=!0,function(e){const t=new FormData;return t.append("file",e),qt({url:"/teacher/import",method:"post",data:t,headers:{"Content-Type":"multipart/form-data"}})}(e).then(e=>{const t=e.data;t.failCount>0?Ae.alert(`导入完成！成功：${t.successCount}条，失败：${t.failCount}条<br/>失败原因：<br/>${t.failMessages.join("<br/>")}`,"导入结果",{dangerouslyUseHTMLString:!0,type:t.failCount>0?"warning":"success"}):$e.success(`导入成功！共导入${t.successCount}条数据`),j()}).catch(e=>{var t,a;console.error("导入失败",e),$e.error((null==(a=null==(t=e.response)?void 0:t.data)?void 0:a.message)||"导入失败")}).finally(()=>{n.value=!1}),!1),ee=()=>{var e;o.value=!0,(e=r,qt({url:"/teacher/export",method:"post",data:e,responseType:"blob"})).then(e=>{const t=new Blob([e.data],{type:"application/vnd.ms-excel"}),a=`教师列表_${(new Date).getTime()}.xlsx`;if(navigator.msSaveBlob)navigator.msSaveBlob(t,a);else{const e=document.createElement("a");e.href=URL.createObjectURL(t),e.download=a,e.click(),URL.revokeObjectURL(e.href)}$e.success("导出成功")}).catch(e=>{console.error("导出失败",e),$e.error("导出失败")}).finally(()=>{o.value=!1})},te=()=>{qt({url:"/teacher/template",method:"get",responseType:"blob"}).then(e=>{const t=new Blob([e.data],{type:"application/vnd.ms-excel"}),a="教师导入模板.xlsx";if(navigator.msSaveBlob)navigator.msSaveBlob(t,a);else{const e=document.createElement("a");e.href=URL.createObjectURL(t),e.download=a,e.click(),URL.revokeObjectURL(e.href)}$e.success("模板下载成功")}).catch(e=>{console.error("模板下载失败",e),$e.error("模板下载失败")})},ie=y([]),ue=y(!1),ce=y([]),pe=y([]),me=y(!1),fe=J({teacherNo:!0,name:!0,gender:!0,departmentName:!0,title:!0,phone:!0,email:!0,entryDate:!0,birthday:!0,status:!0}),ve=[{prop:"teacherNo",label:"教师编号"},{prop:"name",label:"姓名"},{prop:"gender",label:"性别"},{prop:"departmentName",label:"院系"},{prop:"title",label:"职称"},{prop:"phone",label:"手机号码"},{prop:"email",label:"邮箱"},{prop:"entryDate",label:"入职日期"},{prop:"birthday",label:"出生日期"},{prop:"status",label:"状态"}],ge=y(Object.keys(fe).filter(e=>fe[e])),_e=()=>{ue.value=!ue.value},be=e=>{ie.value=e},ye=()=>{0!==ie.value.length?Ae.confirm(`确定要删除选中的 ${ie.value.length} 名教师吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>i(this,null,function*(){try{const e=ie.value.map(e=>jn(e.id));yield Promise.all(e),$e.success("批量删除成功"),j()}catch(e){console.error("批量删除失败",e),$e.error("批量删除失败")}})).catch(()=>{}):$e.warning("请至少选择一条记录")},we=e=>i(this,null,function*(){if(0!==ie.value.length)try{switch(e){case"setStatusActive":yield Ve(0,"批量设置为在职");break;case"setStatusInactive":yield Ve(1,"批量设置为离职");break;case"setStatusRetired":yield Ve(2,"批量设置为退休");break;case"resetPwd":yield xe();break;default:console.warn("未知的批量操作命令:",e)}}catch(t){console.error("批量操作失败",t),$e.error("批量操作失败")}else $e.warning("请至少选择一条记录")}),Ve=(e,t)=>i(this,null,function*(){yield Ae.confirm(`确定要${t}吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});const a=ie.value.map(t=>function(e,t){return qt({url:`/teacher/status/${e}/${t}`,method:"put"})}(t.id,e));yield Promise.all(a),$e.success(t+"成功"),j()}),xe=()=>i(this,null,function*(){yield Ae.confirm(`确定要批量重置选中的 ${ie.value.length} 名教师的密码吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});const e=ie.value.map(e=>Nn(e.id));yield Promise.all(e),$e.success("批量重置密码成功")}),ke=()=>{for(const e in fe)fe[e]=ge.value.includes(e);me.value=!1},Ie=(e,t)=>{switch(t){case"viewCourses":(e=>{$e.info(`将显示教师 ${e.name} 的课程信息`),Ae.confirm(`是否查看教师 ${e.name} 的课程信息？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"info"}).then(()=>{$e({type:"success",message:"功能开发中，即将上线"})}).catch(()=>{})})(e);break;case"viewSchedule":(e=>{$e.info(`将显示教师 ${e.name} 的课表信息`),Ae.confirm(`是否查看教师 ${e.name} 的课程表？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"info"}).then(()=>{$e({type:"success",message:"功能开发中，即将上线"})}).catch(()=>{})})(e);break;case"viewEvaluations":(e=>{$e.info(`将显示教师 ${e.name} 的教学评价信息`),Ae.confirm(`是否查看教师 ${e.name} 的教学评价？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"info"}).then(()=>{$e({type:"success",message:"功能开发中，即将上线"})}).catch(()=>{})})(e);break;case"resetPassword":W(e);break;case"delete":F(e);break;default:console.warn("未知的命令:",t)}},Ce=e=>{const t=pa().permissions;return"string"==typeof e?t.includes(e):e instanceof Array&&e.length>0&&t.some(t=>e.includes(t))};return(e,d)=>{const i=tt,c=at,m=ot,_=rt,y=wt,j=Re,F=it,W=de,J=he,Ve=ut,xe=Qe,Ee=Ue,De=ze,Pe=Me,Te=pt,Oe=je,Ae=mt,Le=ht,Se=ft,Ne=vt,Be=lt,qe=yt,Ye=Ge,Fe=st,We=Vt,He=xt,Je=ct,Xe=bt,Ze=gt,Ke=It,et=Ct,nt=X("hasPerms"),dt=_t;return h(),V("div",Qn,[k(xe,{class:"search-card",shadow:"hover"},{default:I(()=>[k(Ve,{model:r,ref_key:"queryForm",ref:g,inline:!0},{default:I(()=>[k(c,{label:"教师编号",prop:"teacherNo"},{default:I(()=>[k(i,{id:"search-teacherNo",modelValue:r.teacherNo,"onUpdate:modelValue":d[0]||(d[0]=e=>r.teacherNo=e),placeholder:"请输入教师编号",clearable:""},null,8,["modelValue"])]),_:1}),d[42]||(d[42]=D()),k(c,{label:"姓名",prop:"name"},{default:I(()=>[k(i,{id:"search-name",modelValue:r.name,"onUpdate:modelValue":d[1]||(d[1]=e=>r.name=e),placeholder:"请输入姓名",clearable:""},null,8,["modelValue"])]),_:1}),d[43]||(d[43]=D()),k(c,{label:"院系",prop:"departmentId"},{default:I(()=>[k(_,{id:"search-departmentId",modelValue:r.departmentId,"onUpdate:modelValue":d[2]||(d[2]=e=>r.departmentId=e),placeholder:"请选择院系",clearable:""},{default:I(()=>[(h(!0),V(P,null,T(u.value,e=>(h(),p(m,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),d[44]||(d[44]=D()),k(c,{label:"职称",prop:"title"},{default:I(()=>[k(_,{id:"search-title",modelValue:r.title,"onUpdate:modelValue":d[3]||(d[3]=e=>r.title=e),placeholder:"请选择职称",clearable:""},{default:I(()=>[k(m,{label:"教授",value:"教授"}),d[33]||(d[33]=D()),k(m,{label:"副教授",value:"副教授"}),d[34]||(d[34]=D()),k(m,{label:"讲师",value:"讲师"}),d[35]||(d[35]=D()),k(m,{label:"助教",value:"助教"})]),_:1},8,["modelValue"])]),_:1}),d[45]||(d[45]=D()),k(c,{label:"状态",prop:"status"},{default:I(()=>[k(_,{id:"search-status",modelValue:r.status,"onUpdate:modelValue":d[4]||(d[4]=e=>r.status=e),placeholder:"请选择状态",clearable:""},{default:I(()=>[k(m,{label:"在职",value:0}),d[36]||(d[36]=D()),k(m,{label:"离职",value:1}),d[37]||(d[37]=D()),k(m,{label:"退休",value:2})]),_:1},8,["modelValue"])]),_:1}),d[46]||(d[46]=D()),k(c,{label:"入职日期",prop:"entryDateRange"},{default:I(()=>[k(y,{modelValue:ce.value,"onUpdate:modelValue":d[5]||(d[5]=e=>ce.value=e),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1}),d[47]||(d[47]=D()),k(c,null,{default:I(()=>[k(F,{type:"primary",onClick:N},{default:I(()=>[k(j,null,{default:I(()=>[k(S(ae))]),_:1}),d[38]||(d[38]=D("查询\n          "))]),_:1}),d[40]||(d[40]=D()),k(F,{onClick:U},{default:I(()=>[k(j,null,{default:I(()=>[k(S(le))]),_:1}),d[39]||(d[39]=D("重置\n          "))]),_:1}),d[41]||(d[41]=D()),k(F,{type:"primary",plain:"",onClick:_e},{default:I(()=>[D(O(ue.value?"收起":"展开")+" ",1),k(j,null,{default:I(()=>[ue.value?(h(),p(J,{key:1})):(h(),p(W,{key:0}))]),_:1})]),_:1})]),_:1})]),_:1},8,["model"]),d[50]||(d[50]=D()),ue.value?(h(),V("div",eo,[k(Ve,{model:r,inline:!0},{default:I(()=>[k(c,{label:"邮箱",prop:"email"},{default:I(()=>[k(i,{id:"search-email",modelValue:r.email,"onUpdate:modelValue":d[6]||(d[6]=e=>r.email=e),placeholder:"请输入邮箱",clearable:""},null,8,["modelValue"])]),_:1}),d[48]||(d[48]=D()),k(c,{label:"手机号",prop:"phone"},{default:I(()=>[k(i,{id:"search-phone",modelValue:r.phone,"onUpdate:modelValue":d[7]||(d[7]=e=>r.phone=e),placeholder:"请输入手机号",clearable:""},null,8,["modelValue"])]),_:1}),d[49]||(d[49]=D()),k(c,{label:"出生日期",prop:"birthdayRange"},{default:I(()=>[k(y,{modelValue:pe.value,"onUpdate:modelValue":d[8]||(d[8]=e=>pe.value=e),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])])):L("",!0)]),_:1}),d[144]||(d[144]=D()),k(xe,{class:"table-card",shadow:"hover"},{header:I(()=>[x("div",to,[d[71]||(d[71]=x("span",{class:"header-title"},"教师信息列表",-1)),d[72]||(d[72]=D()),x("div",ao,[M((h(),p(F,{type:"primary",onClick:q},{default:I(()=>[k(j,null,{default:I(()=>[k(S(ne))]),_:1}),d[51]||(d[51]=D("新增\n            "))]),_:1})),[[nt,["education:teacher:add"]]]),d[65]||(d[65]=D()),M((h(),p(F,{type:"danger",disabled:0===ie.value.length,onClick:ye},{default:I(()=>d[52]||(d[52]=[D("\n              批量删除\n            ")])),_:1},8,["disabled"])),[[nt,["education:teacher:delete"]]]),d[66]||(d[66]=D()),Ce("education:teacher:edit")?(h(),p(Pe,{key:0,onCommand:we},{dropdown:I(()=>[k(De,null,{default:I(()=>[k(Ee,{command:"setStatusActive"},{default:I(()=>d[54]||(d[54]=[D("设为在职")])),_:1}),d[58]||(d[58]=D()),k(Ee,{command:"setStatusInactive"},{default:I(()=>d[55]||(d[55]=[D("设为离职")])),_:1}),d[59]||(d[59]=D()),k(Ee,{command:"setStatusRetired"},{default:I(()=>d[56]||(d[56]=[D("设为退休")])),_:1}),d[60]||(d[60]=D()),k(Ee,{divided:"",command:"resetPwd"},{default:I(()=>d[57]||(d[57]=[D("重置密码")])),_:1})]),_:1})]),default:I(()=>[k(F,{type:"primary",plain:"",disabled:0===ie.value.length},{default:I(()=>[d[53]||(d[53]=D("\n                批量操作")),k(j,{class:"el-icon--right"},{default:I(()=>[k(S(de))]),_:1})]),_:1},8,["disabled"]),d[61]||(d[61]=D())]),_:1})):L("",!0),d[67]||(d[67]=D()),M((h(),p(Te,{class:"upload-demo","show-file-list":!1,"before-upload":Q},{default:I(()=>[k(F,{type:"primary",loading:n.value,plain:""},{default:I(()=>[k(j,null,{default:I(()=>[k(S(oe))]),_:1}),d[62]||(d[62]=D("导入\n              "))]),_:1},8,["loading"])]),_:1})),[[nt,["education:teacher:import"]]]),d[68]||(d[68]=D()),M((h(),p(F,{type:"primary",plain:"",onClick:ee,loading:o.value},{default:I(()=>[k(j,null,{default:I(()=>[k(S(re))]),_:1}),d[63]||(d[63]=D("导出\n            "))]),_:1},8,["loading"])),[[nt,["education:teacher:export"]]]),d[69]||(d[69]=D()),M((h(),p(F,{type:"primary",plain:"",onClick:te},{default:I(()=>d[64]||(d[64]=[D("\n              下载模板\n            ")])),_:1})),[[nt,["education:teacher:import"]]]),d[70]||(d[70]=D()),k(Oe,{content:"设置显示列"},{default:I(()=>[k(F,{type:"primary",plain:"",onClick:d[9]||(d[9]=e=>me.value=!0)},{default:I(()=>[k(j,null,{default:I(()=>[k(S(se))]),_:1})]),_:1})]),_:1})])])]),default:I(()=>[d[100]||(d[100]=D()),M((h(),p(Se,{data:t.value,stripe:"",border:"",onSelectionChange:be,style:{width:"100%"},"header-cell-style":{background:"#f5f7fa",color:"#606266"}},{default:I(()=>[k(Ae,{type:"selection",width:"55"}),d[88]||(d[88]=D()),k(Ae,{type:"index",label:"#",width:"60"}),d[89]||(d[89]=D()),fe.teacherNo?(h(),p(Ae,{key:0,prop:"teacherNo",label:"教师编号",width:"120"})):L("",!0),d[90]||(d[90]=D()),fe.name?(h(),p(Ae,{key:1,prop:"name",label:"姓名",width:"100"})):L("",!0),d[91]||(d[91]=D()),fe.gender?(h(),p(Ae,{key:2,prop:"genderDesc",label:"性别",width:"60",align:"center"})):L("",!0),d[92]||(d[92]=D()),fe.departmentName?(h(),p(Ae,{key:3,prop:"departmentName",label:"院系",width:"180"})):L("",!0),d[93]||(d[93]=D()),fe.title?(h(),p(Ae,{key:4,prop:"title",label:"职称",width:"100"})):L("",!0),d[94]||(d[94]=D()),fe.phone?(h(),p(Ae,{key:5,prop:"phone",label:"手机号码",width:"130"})):L("",!0),d[95]||(d[95]=D()),fe.email?(h(),p(Ae,{key:6,prop:"email",label:"邮箱",width:"180"})):L("",!0),d[96]||(d[96]=D()),fe.entryDate?(h(),p(Ae,{key:7,prop:"entryDate",label:"入职日期",width:"120",align:"center"})):L("",!0),d[97]||(d[97]=D()),fe.birthday?(h(),p(Ae,{key:8,prop:"birthday",label:"出生日期",width:"120",align:"center"})):L("",!0),d[98]||(d[98]=D()),fe.status?(h(),p(Ae,{key:9,prop:"statusDesc",label:"状态",width:"80",align:"center"},{default:I(e=>[k(Le,{type:Z(e.row.status)},{default:I(()=>[D(O(e.row.statusDesc),1)]),_:2},1032,["type"])]),_:1})):L("",!0),d[99]||(d[99]=D()),k(Ae,{label:"操作","min-width":"220",fixed:"right"},{default:I(e=>[M((h(),p(F,{type:"primary",link:"",onClick:t=>{return a=e.row,G(),b.visible=!0,b.title="编辑教师",b.type="update",E.visible=!1,Rn(a.id).then(e=>{const t=e.data;w.id=t.id,w.teacherNo=t.teacherNo,w.name=t.name,w.departmentId=t.departmentId,w.title=t.title,w.gender=t.gender,w.idCard=t.idCard,w.birthday=t.birthday?new Date(t.birthday):null,w.entryDate=t.entryDate?new Date(t.entryDate):null,w.status=t.status,w.username=t.username,w.email=t.email,w.phone=t.phone,Y(()=>{R()})}).catch(e=>{console.error("获取教师详情失败:",e),$e.error("获取教师详情失败")}),void Y(()=>{var e;null==(e=v.value)||e.clearValidate()});var a}},{default:I(()=>d[73]||(d[73]=[D("\n              编辑\n            ")])),_:2},1032,["onClick"])),[[nt,["education:teacher:edit"]]]),d[86]||(d[86]=D()),M((h(),p(F,{type:"primary",link:"",onClick:t=>{return a=e.row,E.visible=!0,void Rn(a.id).then(e=>{const t=s({},e.data);t.birthday=A(t.birthday),t.entryDate=A(t.entryDate),t.createTime=A(t.createTime),$.value=t}).catch(e=>{console.error("获取教师详情失败:",e),$e.error("获取教师详情失败")});var a}},{default:I(()=>d[74]||(d[74]=[D("\n              详情\n            ")])),_:2},1032,["onClick"])),[[nt,["education:teacher:query"]]]),d[87]||(d[87]=D()),k(Pe,{onCommand:t=>Ie(e.row,t)},{dropdown:I(()=>[k(De,null,{default:I(()=>[k(Ee,{command:"viewCourses"},{default:I(()=>d[76]||(d[76]=[D("查看课程")])),_:1}),d[81]||(d[81]=D()),k(Ee,{command:"viewSchedule"},{default:I(()=>d[77]||(d[77]=[D("查看课表")])),_:1}),d[82]||(d[82]=D()),k(Ee,{command:"viewEvaluations"},{default:I(()=>d[78]||(d[78]=[D("教学评价")])),_:1}),d[83]||(d[83]=D()),Ce("education:teacher:resetPwd")?(h(),p(Ee,{key:0,command:"resetPassword"},{default:I(()=>d[79]||(d[79]=[D("重置密码")])),_:1})):L("",!0),d[84]||(d[84]=D()),Ce("education:teacher:delete")?(h(),p(Ee,{key:1,divided:"",command:"delete",class:"text-danger"},{default:I(()=>d[80]||(d[80]=[D("删除")])),_:1})):L("",!0)]),_:1})]),default:I(()=>[k(F,{link:"",type:"primary"},{default:I(()=>[d[75]||(d[75]=D("\n                更多")),k(j,{class:"el-icon--right"},{default:I(()=>[k(S(de))]),_:1})]),_:1}),d[85]||(d[85]=D())]),_:2},1032,["onCommand"])]),_:1})]),_:1},8,["data"])),[[dt,l.value]]),d[101]||(d[101]=D()),x("div",lo,[k(Ne,{"current-page":r.pageNum,"onUpdate:currentPage":d[10]||(d[10]=e=>r.pageNum=e),"page-size":r.pageSize,"onUpdate:pageSize":d[11]||(d[11]=e=>r.pageSize=e),"page-sizes":[10,20,50,100],background:!0,layout:"total, sizes, prev, pager, next, jumper",total:a.value,onSizeChange:B,onCurrentChange:z},null,8,["current-page","page-size","total"])])]),_:1}),d[145]||(d[145]=D()),k(Je,{title:b.title,modelValue:b.visible,"onUpdate:modelValue":d[27]||(d[27]=e=>b.visible=e),width:"800px","append-to-body":"","destroy-on-close":""},{footer:I(()=>[x("div",no,[k(F,{onClick:d[26]||(d[26]=e=>b.visible=!1)},{default:I(()=>d[122]||(d[122]=[D("取消")])),_:1}),d[124]||(d[124]=D()),k(F,{type:"primary",onClick:H},{default:I(()=>d[123]||(d[123]=[D("确定")])),_:1})])]),default:I(()=>[k(Ve,{ref_key:"teacherFormRef",ref:v,model:w,rules:C,"label-width":"100px"},{default:I(()=>[k(He,{modelValue:f.value,"onUpdate:modelValue":d[25]||(d[25]=e=>f.value=e)},{default:I(()=>[k(We,{label:"基本信息",name:"basic"},{default:I(()=>[k(Fe,{gutter:24},{default:I(()=>[k(Be,{span:12},{default:I(()=>[k(c,{label:"教师编号",prop:"teacherNo"},{default:I(()=>[k(i,{id:"form-teacherNo",modelValue:w.teacherNo,"onUpdate:modelValue":d[12]||(d[12]=e=>w.teacherNo=e),placeholder:"请输入教师编号",disabled:"update"===b.type,onInput:K},null,8,["modelValue","disabled"])]),_:1})]),_:1}),d[110]||(d[110]=D()),k(Be,{span:12},{default:I(()=>[k(c,{label:"姓名",prop:"name"},{default:I(()=>[k(i,{id:"form-name",modelValue:w.name,"onUpdate:modelValue":d[13]||(d[13]=e=>w.name=e),placeholder:"请输入姓名"},null,8,["modelValue"])]),_:1})]),_:1}),d[111]||(d[111]=D()),k(Be,{span:12},{default:I(()=>[k(c,{label:"性别",prop:"gender"},{default:I(()=>[k(Ye,{id:"form-gender",modelValue:w.gender,"onUpdate:modelValue":d[14]||(d[14]=e=>w.gender=e)},{default:I(()=>[k(qe,{value:0},{default:I(()=>d[102]||(d[102]=[D("男")])),_:1}),d[104]||(d[104]=D()),k(qe,{value:1},{default:I(()=>d[103]||(d[103]=[D("女")])),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),d[112]||(d[112]=D()),k(Be,{span:12},{default:I(()=>[k(c,{label:"院系",prop:"departmentId"},{default:I(()=>[k(_,{id:"form-departmentId",modelValue:w.departmentId,"onUpdate:modelValue":d[15]||(d[15]=e=>w.departmentId=e),placeholder:"请选择院系",style:{width:"100%"}},{default:I(()=>[(h(!0),V(P,null,T(u.value,e=>(h(),p(m,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),d[113]||(d[113]=D()),k(Be,{span:12},{default:I(()=>[k(c,{label:"职称",prop:"title"},{default:I(()=>[k(_,{id:"form-title",modelValue:w.title,"onUpdate:modelValue":d[16]||(d[16]=e=>w.title=e),placeholder:"请选择职称",style:{width:"100%"}},{default:I(()=>[k(m,{label:"教授",value:"教授"}),d[105]||(d[105]=D()),k(m,{label:"副教授",value:"副教授"}),d[106]||(d[106]=D()),k(m,{label:"讲师",value:"讲师"}),d[107]||(d[107]=D()),k(m,{label:"助教",value:"助教"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),d[114]||(d[114]=D()),k(Be,{span:12},{default:I(()=>[k(c,{label:"入职日期",prop:"entryDate"},{default:I(()=>[k(y,{id:"form-entryDate",modelValue:w.entryDate,"onUpdate:modelValue":d[17]||(d[17]=e=>w.entryDate=e),type:"date",placeholder:"请选择入职日期","value-format":"YYYY-MM-DD",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),d[115]||(d[115]=D()),k(Be,{span:12},{default:I(()=>[k(c,{label:"身份证号",prop:"idCard"},{default:I(()=>[k(i,{id:"form-idCard",modelValue:w.idCard,"onUpdate:modelValue":d[18]||(d[18]=e=>w.idCard=e),placeholder:"请输入身份证号"},null,8,["modelValue"])]),_:1})]),_:1}),d[116]||(d[116]=D()),k(Be,{span:12},{default:I(()=>[k(c,{label:"出生日期",prop:"birthday"},{default:I(()=>[k(y,{id:"form-birthday",modelValue:w.birthday,"onUpdate:modelValue":d[19]||(d[19]=e=>w.birthday=e),type:"date",placeholder:"请选择出生日期","value-format":"YYYY-MM-DD",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),d[117]||(d[117]=D()),k(Be,{span:12},{default:I(()=>[k(c,{label:"状态",prop:"status"},{default:I(()=>[k(_,{id:"form-status",modelValue:w.status,"onUpdate:modelValue":d[20]||(d[20]=e=>w.status=e),placeholder:"请选择状态",style:{width:"100%"}},{default:I(()=>[k(m,{label:"在职",value:0}),d[108]||(d[108]=D()),k(m,{label:"离职",value:1}),d[109]||(d[109]=D()),k(m,{label:"退休",value:2})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),d[121]||(d[121]=D()),k(We,{label:"账号信息",name:"account"},{default:I(()=>[k(Fe,{gutter:24},{default:I(()=>[k(Be,{span:12},{default:I(()=>[k(c,{label:"用户名",prop:"username"},{default:I(()=>[k(i,{id:"form-username",modelValue:w.username,"onUpdate:modelValue":d[21]||(d[21]=e=>w.username=e),placeholder:"请输入用户名",disabled:"update"===b.type},null,8,["modelValue","disabled"])]),_:1})]),_:1}),d[118]||(d[118]=D()),k(Be,{span:12},{default:I(()=>["add"===b.type?(h(),p(c,{key:0,label:"密码",prop:"password"},{default:I(()=>[k(i,{id:"form-password",modelValue:w.password,"onUpdate:modelValue":d[22]||(d[22]=e=>w.password=e),type:"password",placeholder:"请输入密码","show-password":""},null,8,["modelValue"])]),_:1})):L("",!0)]),_:1}),d[119]||(d[119]=D()),k(Be,{span:12},{default:I(()=>[k(c,{label:"邮箱",prop:"email"},{default:I(()=>[k(i,{id:"form-email",modelValue:w.email,"onUpdate:modelValue":d[23]||(d[23]=e=>w.email=e),placeholder:"请输入邮箱"},null,8,["modelValue"])]),_:1})]),_:1}),d[120]||(d[120]=D()),k(Be,{span:12},{default:I(()=>[k(c,{label:"手机号",prop:"phone"},{default:I(()=>[k(i,{id:"form-phone",modelValue:w.phone,"onUpdate:modelValue":d[24]||(d[24]=e=>w.phone=e),placeholder:"请输入手机号"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["model"]),d[125]||(d[125]=D())]),_:1},8,["title","modelValue"]),d[146]||(d[146]=D()),k(Je,{title:"表格列设置",modelValue:me.value,"onUpdate:modelValue":d[30]||(d[30]=e=>me.value=e),width:"400px","append-to-body":""},{footer:I(()=>[x("div",oo,[k(F,{onClick:d[29]||(d[29]=e=>me.value=!1)},{default:I(()=>d[126]||(d[126]=[D("取消")])),_:1}),d[128]||(d[128]=D()),k(F,{type:"primary",onClick:ke},{default:I(()=>d[127]||(d[127]=[D("确定")])),_:1})])]),default:I(()=>[k(Ze,{modelValue:ge.value,"onUpdate:modelValue":d[28]||(d[28]=e=>ge.value=e)},{default:I(()=>[k(Fe,{gutter:20},{default:I(()=>[(h(),V(P,null,T(ve,e=>k(Be,{span:12,key:e.prop},{default:I(()=>[k(Xe,{label:e.prop},{default:I(()=>[D(O(e.label),1)]),_:2},1032,["label"])]),_:2},1024)),64))]),_:1})]),_:1},8,["modelValue"]),d[129]||(d[129]=D())]),_:1},8,["modelValue"]),d[147]||(d[147]=D()),k(Je,{title:"教师详情",modelValue:E.visible,"onUpdate:modelValue":d[32]||(d[32]=e=>E.visible=e),width:"700px","append-to-body":"","destroy-on-close":""},{footer:I(()=>[x("div",ro,[k(F,{onClick:d[31]||(d[31]=e=>E.visible=!1)},{default:I(()=>d[142]||(d[142]=[D("关闭")])),_:1})])]),default:I(()=>[k(et,{column:2,border:""},{default:I(()=>[k(Ke,{label:"教师编号"},{default:I(()=>[D(O($.value.teacherNo),1)]),_:1}),d[130]||(d[130]=D()),k(Ke,{label:"姓名"},{default:I(()=>[D(O($.value.name),1)]),_:1}),d[131]||(d[131]=D()),k(Ke,{label:"性别"},{default:I(()=>[D(O(0===$.value.gender?"男":"女"),1)]),_:1}),d[132]||(d[132]=D()),k(Ke,{label:"院系"},{default:I(()=>[D(O($.value.departmentName),1)]),_:1}),d[133]||(d[133]=D()),k(Ke,{label:"职称"},{default:I(()=>[D(O($.value.title),1)]),_:1}),d[134]||(d[134]=D()),k(Ke,{label:"入职日期"},{default:I(()=>[D(O($.value.entryDate),1)]),_:1}),d[135]||(d[135]=D()),k(Ke,{label:"身份证号"},{default:I(()=>[D(O($.value.idCard),1)]),_:1}),d[136]||(d[136]=D()),k(Ke,{label:"出生日期"},{default:I(()=>[D(O($.value.birthday),1)]),_:1}),d[137]||(d[137]=D()),k(Ke,{label:"状态"},{default:I(()=>[k(Le,{type:Z($.value.status)},{default:I(()=>[D(O(["在职","离职","退休"][$.value.status]||"未知"),1)]),_:1},8,["type"])]),_:1}),d[138]||(d[138]=D()),k(Ke,{label:"创建时间"},{default:I(()=>[D(O($.value.createTime),1)]),_:1}),d[139]||(d[139]=D()),k(Ke,{label:"邮箱"},{default:I(()=>[D(O($.value.email),1)]),_:1}),d[140]||(d[140]=D()),k(Ke,{label:"手机号"},{default:I(()=>[D(O($.value.phone),1)]),_:1}),d[141]||(d[141]=D()),k(Ke,{label:"用户名",span:2},{default:I(()=>[D(O($.value.username),1)]),_:1})]),_:1}),d[143]||(d[143]=D())]),_:1},8,["modelValue"])])}}},[["__scopeId","data-v-a4b3d125"]]),io=Object.freeze(Object.defineProperty({__proto__:null,default:so},Symbol.toStringTag,{value:"Module"}));const uo={class:"dashboard-container"},co={class:"welcome-section"},po={class:"welcome-info"},mo={class:"welcome-text"},ho={class:"current-time"},fo={class:"date"},vo={class:"time"},go={class:"stat-info"},_o={class:"stat-title"},bo={class:"stat-value"},yo={class:"stat-trend"},wo={key:0,class:"refresh-action"},Vo={class:"card-header"},xo={key:0},ko={key:1},Io={class:"card-header"},Co={key:0},Eo={key:1},Do={class:"card-header"},Po={class:"notice-list"},To={class:"notice-content"},Oo={class:"notice-title"},$o={class:"notice-time"},Ao={class:"card-header"},Ro={class:"todo-list"},Lo={class:"todo-content"},So={class:"todo-title"},jo={class:"todo-time"},No=ha({__name:"index",setup(e){const t=y("今年"),a=y("近半年");we([Ee,Te,Ce,xe,ke,Ie,Ve,Oe,De]);const l=pa(),n=y(""),o=y(""),r=b(()=>{const e=l.avatar||ma;return e.startsWith("/src/")||e.startsWith("/assets/")?e:ca(e)}),s=b(()=>{const e=(new Date).getHours(),t=l.name;return e<6?`晚上好，${t}`:e<12?`早上好，${t}`:e<14?`中午好，${t}`:e<18?`下午好，${t}`:`晚上好，${t}`});let d=null;const u=()=>{const e=new Date;n.value=e.toLocaleDateString("zh-CN",{year:"numeric",month:"long",day:"numeric",weekday:"long"}),o.value=e.toLocaleTimeString("zh-CN",{hour12:!1})},f=y([{title:"总学生数",value:"0",icon:"User",color:"#409EFF",increase:!0,compare:"0%"},{title:"总课程数",value:"0",icon:"Notebook",color:"#67C23A",increase:!0,compare:"0%"},{title:"教师数量",value:"0",icon:"UserFilled",color:"#E6A23C",increase:!1,compare:"0%"},{title:"本周考勤率",value:"0.0%",icon:"Calendar",color:"#F56C6C",increase:!0,compare:"0%"}]),v=y(null),g=y(null);y(null),y(null);let w=null,$=null;const A=b(()=>l.roles&&l.roles.includes("student")),R={primary:"Bell",success:"Document",warning:"Warning",danger:"CircleClose"},S=y([]),j=y([]),N=_(),z=e=>{switch(e){case"高":return"danger";case"中":return"warning";default:return"info"}},M=()=>i(this,null,function*(){try{const{data:e}=yield qt({url:"/dashboard/statistics",method:"get"});e&&(f.value[0].value=e.totalStudents.toString(),f.value[1].value=e.totalCourses.toString(),f.value[2].value=e.totalTeachers.toString(),f.value[3].value=e.weeklyAttendanceRate,f.value[0].compare="+5%",f.value[1].compare="+2%",f.value[2].compare="-1%",f.value[3].compare="+3%",f.value[0].increase=!0,f.value[1].increase=!0,f.value[2].increase=!1,f.value[3].increase=!0)}catch(e){console.error("获取统计数据失败:",e)}}),B=()=>i(this,null,function*(){if(v.value)if(A.value)try{const{data:e}=yield qt({url:"/dashboard/student/department/distribution",method:"get"});if(!e)return void $e.warning("获取个人学习统计数据失败");w||(w=Pe(v.value));const t={title:{text:"个人学习统计",left:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:e.labels||[]},series:[{name:"课程数量",type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:2},label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:"18",fontWeight:"bold"}},labelLine:{show:!1},data:e.labels&&e.seriesData?e.labels.map((t,a)=>{var l;return{value:(null==(l=e.seriesData[Object.keys(e.seriesData||{})[0]||"data"])?void 0:l[a])||0,name:t}}):[{value:0,name:"暂无数据"}]}]};w.setOption(t),window.addEventListener("resize",()=>w.resize())}catch(e){console.error("获取个人学习统计数据失败:",e)}else try{const{data:e}=yield function(e="今年"){return qt({url:"/dashboard/department/distribution",method:"get",params:{year:e}})}(t.value);if(!e)return void $e.warning("获取院系分布数据失败");w||(w=Pe(v.value));const a={title:{text:"院系学生分布",left:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:e.labels||[]},series:[{name:"院系分布",type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:2},label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:"18",fontWeight:"bold"}},labelLine:{show:!1},data:e.labels&&e.data?e.labels.map((t,a)=>({value:e.data[a],name:t})):[{value:0,name:"暂无数据"}]}]};w.setOption(a),window.addEventListener("resize",()=>w.resize())}catch(e){console.error("获取院系分布数据失败:",e)}}),Y=()=>i(this,null,function*(){if(g.value)if(A.value)try{const{data:e}=yield qt({url:"/dashboard/student/grade/distribution",method:"get"});if(!e)return void $e.warning("获取成绩分布数据失败");$||($=Pe(g.value));let t=null;e.seriesDataDouble&&e.seriesDataDouble["平均分"]&&e.seriesDataDouble["平均分"].length>0&&(t=e.seriesDataDouble["平均分"][0]);const a={title:{text:"成绩分布统计"+(t?` (平均分: ${t})`:""),left:"center"},tooltip:{trigger:"item"},legend:{bottom:"0%",left:"center",data:e.labels||[]},series:[{name:"成绩分布",type:"pie",radius:"50%",data:e.labels&&e.seriesData?e.labels.map((t,a)=>{var l;return{value:(null==(l=e.seriesData[Object.keys(e.seriesData||{})[0]||"data"])?void 0:l[a])||0,name:t}}):[{value:0,name:"暂无数据"}],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};$.setOption(a),window.addEventListener("resize",()=>$.resize())}catch(e){console.error("获取成绩分布数据失败:",e)}else try{const{data:e}=yield function(e="近半年"){return qt({url:"/dashboard/student/semester",method:"get",params:{timeRange:e}})}(a.value);if(!e)return void $e.warning("获取学期数据失败");$||($=Pe(g.value));const t={title:{text:"学期课程统计",left:"center"},tooltip:{trigger:"axis"},legend:{data:e.seriesData?Object.keys(e.seriesData):["暂无数据"],bottom:"0%"},grid:{left:"3%",right:"4%",bottom:"10%",top:"15%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:e.labels||["暂无数据"]},yAxis:{type:"value",axisLabel:{formatter:`{value} ${e.unit||""}`}},series:e.seriesData?Object.keys(e.seriesData).map(t=>({name:t,type:"line",data:e.seriesData[t]})):[{name:"暂无数据",type:"line",data:[0]}]};$.setOption(t),window.addEventListener("resize",()=>$.resize())}catch(e){console.error("获取学期数据失败:",e)}}),F=()=>{B()},W=()=>{Y()},H=()=>i(this,null,function*(){try{u(),yield M();const e=yield qt({url:"/dashboard/todo",method:"get"});j.value=e.data||[];const t=yield qt({url:"/dashboard/notice",method:"get"});S.value=t.data||[],yield B(),yield Y()}catch(e){console.error("初始化数据失败:",e)}});c(()=>{u(),d=setInterval(u,1e3),H(),ll()}),U(()=>{d&&clearInterval(d),w&&w.dispose(),$&&$.dispose(),window.removeEventListener("resize",()=>w&&w.resize()),window.removeEventListener("resize",()=>$&&$.resize())});const G=()=>{N.push("/notice")},J=()=>{N.push("/todo")};return(e,l)=>{const d=Ne,i=Re,u=m("Refresh"),c=it,_=Qe,b=lt,y=st,w=ot,$=rt,N=Pt,U=ht;return h(),V("div",uo,[x("div",co,[x("div",po,[k(d,{size:64,src:r.value,class:"user-avatar"},null,8,["src"]),l[4]||(l[4]=D()),x("div",mo,[x("h1",null,O(s.value),1),l[2]||(l[2]=D()),l[3]||(l[3]=x("p",null,"欢迎回到EduSmart 高校智能管理平台",-1))])]),l[6]||(l[6]=D()),x("div",ho,[x("div",fo,O(n.value),1),l[5]||(l[5]=D()),x("div",vo,O(o.value),1)])]),l[35]||(l[35]=D()),k(y,{gutter:20,class:"stats-row"},{default:I(()=>[(h(!0),V(P,null,T(f.value,(e,t)=>(h(),p(b,{sm:12,md:6,key:t,class:"card-col"},{default:I(()=>[k(_,{class:"stats-card",shadow:"hover"},{default:I(()=>[x("div",{class:"stat-icon",style:q({background:e.color})},[k(i,null,{default:I(()=>[(h(),p(C(e.icon)))]),_:2},1024)],4),l[10]||(l[10]=D()),x("div",go,[x("div",_o,O(e.title),1),l[8]||(l[8]=D()),x("div",bo,O(e.value),1),l[9]||(l[9]=D()),x("div",yo,[x("span",{class:E({"trend-up":e.increase,"trend-down":!e.increase})},O(e.increase?"↑":"↓")+" "+O(e.compare),3),l[7]||(l[7]=D()),3===t&&"0.0%"===e.value?(h(),V("span",wo,[k(c,{size:"small",link:"",onClick:M},{default:I(()=>[k(i,null,{default:I(()=>[k(u)]),_:1})]),_:1})])):L("",!0)])])]),_:2},1024)]),_:2},1024))),128))]),_:1}),l[36]||(l[36]=D()),k(y,{gutter:20,class:"chart-row"},{default:I(()=>[k(b,{sm:24,md:12},{default:I(()=>[k(_,{class:"chart-card"},{header:I(()=>[x("div",Vo,[A.value?(h(),V("span",xo,"个人学习统计")):(h(),V("span",ko,"学生院系分布")),l[13]||(l[13]=D()),A.value?L("",!0):(h(),p($,{key:2,modelValue:t.value,"onUpdate:modelValue":l[0]||(l[0]=e=>t.value=e),class:"filter-select",onChange:F},{default:I(()=>[k(w,{label:"今年",value:"今年"}),l[11]||(l[11]=D()),k(w,{label:"去年",value:"去年"}),l[12]||(l[12]=D()),k(w,{label:"全部",value:"全部"})]),_:1},8,["modelValue"]))])]),default:I(()=>[l[14]||(l[14]=D()),x("div",{ref_key:"pieChartRef",ref:v,class:"chart"},null,512)]),_:1})]),_:1}),l[19]||(l[19]=D()),k(b,{sm:24,md:12},{default:I(()=>[k(_,{class:"chart-card"},{header:I(()=>[x("div",Io,[A.value?(h(),V("span",Co,"成绩分布统计")):(h(),V("span",Eo,"月度课程数量")),l[17]||(l[17]=D()),A.value?L("",!0):(h(),p($,{key:2,modelValue:a.value,"onUpdate:modelValue":l[1]||(l[1]=e=>a.value=e),class:"filter-select",onChange:W},{default:I(()=>[k(w,{label:"近半年",value:"近半年"}),l[15]||(l[15]=D()),k(w,{label:"近一年",value:"近一年"}),l[16]||(l[16]=D()),k(w,{label:"全部",value:"全部"})]),_:1},8,["modelValue"]))])]),default:I(()=>[l[18]||(l[18]=D()),x("div",{ref_key:"lineChartRef",ref:g,class:"chart"},null,512)]),_:1})]),_:1})]),_:1}),l[37]||(l[37]=D()),k(y,{gutter:20,class:"notice-row"},{default:I(()=>[k(b,{sm:24,md:12},{default:I(()=>[k(_,{class:"recent-card"},{header:I(()=>[x("div",Do,[l[21]||(l[21]=x("span",null,"最近通知",-1)),l[22]||(l[22]=D()),k(c,{class:"button",link:!0,onClick:G},{default:I(()=>l[20]||(l[20]=[D("查看更多")])),_:1})])]),default:I(()=>[l[26]||(l[26]=D()),x("div",Po,[(h(!0),V(P,null,T(S.value,(e,t)=>(h(),V("div",{key:t,class:"notice-item"},[x("div",{class:E(["notice-icon",e.type])},[k(i,null,{default:I(()=>[(h(),p(C(R[e.type])))]),_:2},1024)],2),l[24]||(l[24]=D()),x("div",To,[x("div",Oo,O(e.title),1),l[23]||(l[23]=D()),x("div",$o,O(e.time),1)])]))),128)),l[25]||(l[25]=D()),0===S.value.length?(h(),p(N,{key:0,description:"暂无通知"})):L("",!0)])]),_:1})]),_:1}),l[34]||(l[34]=D()),k(b,{sm:24,md:12},{default:I(()=>[k(_,{class:"recent-card"},{header:I(()=>[x("div",Ao,[l[28]||(l[28]=x("span",null,"待办事项",-1)),l[29]||(l[29]=D()),k(c,{class:"button",link:!0,onClick:J},{default:I(()=>l[27]||(l[27]=[D("查看更多")])),_:1})])]),default:I(()=>[l[33]||(l[33]=D()),x("div",Ro,[(h(!0),V(P,null,T(j.value,(e,t)=>(h(),V("div",{key:t,class:"todo-item"},[k(U,{size:"small",type:z(e.priority),class:"todo-priority"},{default:I(()=>[D(O(e.priority),1)]),_:2},1032,["type"]),l[31]||(l[31]=D()),x("div",Lo,[x("div",So,O(e.title),1),l[30]||(l[30]=D()),x("div",jo,O(e.deadline),1)])]))),128)),l[32]||(l[32]=D()),0===j.value.length?(h(),p(N,{key:0,description:"暂无待办事项"})):L("",!0)])]),_:1})]),_:1})]),_:1})])}}},[["__scopeId","data-v-4fc4229a"]]),Uo=Object.freeze(Object.defineProperty({__proto__:null,default:No},Symbol.toStringTag,{value:"Module"})),zo={dashboard:No,"dashboard/index":No,"course/add":jl,"course/add/index":jl,"course/add.vue":jl,"course/index":Fl,"student/add":nn,"student/add/index":nn,"student/add.vue":nn,"student/index":$n,"teacher/add":Zn,"teacher/add/index":Zn,"teacher/add.vue":Zn,"teacher/index":so};function Mo(e){return e<10?`0${e}`:`${e}`}const Bo={class:"attendance-container"},qo={class:"card-header"},Yo={class:"header-left"},Fo={key:0,class:"course-info"},Wo={key:0},Ho={key:1},Go={key:0,class:"error-container"},Jo={key:1},Xo={key:0,class:"course-details"},Zo={class:"details-item"},Ko={class:"value"},Qo={class:"details-item"},er={class:"value"},tr={class:"details-item"},ar={class:"value"},lr={class:"details-item"},nr={class:"value"},or={class:"details-item"},rr={class:"value"},sr={key:2,class:"operation-container"},dr={class:"attendance-history"},ir={key:0,class:"no-records"},ur={key:3,class:"pagination-container"},cr={class:"dialog-footer"},pr=ha({__name:"index",setup(e){const t=_(),a=g(),l=y(null),n=y(null),o=y(null),r=pa(),s=y(null),d=y(null),u=y(!1),m=y([]),f=y(0),v=y(!1),b=y(!1),w=y(!1),C=J({courseId:void 0,courseOfferingId:void 0,studentId:void 0,attendanceDate:(new Date).toISOString().split("T")[0],studentNo:"",studentName:"",pageNum:1,pageSize:10}),E=J({visible:!1,title:"记录考勤"}),$=J({id:null,studentId:null,studentName:"",studentNo:"",date:(new Date).toISOString().split("T")[0],status:"0",remark:""}),A={date:[{required:!0,message:"请选择考勤日期",trigger:"change"}],status:[{required:!0,message:"请选择考勤状态",trigger:"change"}]},R=y(null),j=y(!1);function N(){if(function(){C.courseId=l.value,C.courseOfferingId=n.value,console.log("初始化查询参数前:",{courseId:l.value,courseOfferingId:n.value}),!C.courseId&&C.courseOfferingId?(C.courseId=C.courseOfferingId,console.log("使用courseOfferingId作为courseId:",C.courseId)):!C.courseOfferingId&&C.courseId&&(C.courseOfferingId=C.courseId,console.log("使用courseId作为courseOfferingId:",C.courseOfferingId));console.log("初始化查询参数后:",JSON.stringify(C)),b.value&&(C.studentId=o.value)}(),!C.courseId&&!C.courseOfferingId)return console.error("缺少必要参数: courseId和courseOfferingId都为空"),$e.warning("请从课程列表或课程开设页面进入考勤管理"),w.value=!0,void(u.value=!1);console.log("API请求参数:",{teacherId:s.value,courseId:C.courseId,queryParams:C}),u.value=!0,zn(s.value,C.courseId,C).then(e=>{var t,a;if(console.log("获取学生列表成功:",e),w.value=!1,b.value&&C.studentId){console.log("处理单个学生视图数据:",e.data);const l=(null==(t=e.data.rows)?void 0:t[0])||(null==(a=e.data.list)?void 0:a[0])||{};console.log("获取到的学生数据:",l);const n={studentId:l.studentId,studentNo:l.studentNo,name:l.name,className:l.className,majorName:l.majorName,gender:l.gender,genderDesc:l.genderDesc,attendanceRate:l.attendanceRate||0};console.log("学生基本信息:",n),l.attendanceRecords&&l.attendanceRecords.length>0?(console.log("学生考勤记录:",l.attendanceRecords),m.value=l.attendanceRecords.map(e=>({id:e.id,date:e.date,status:e.status,remark:e.remark,courseOfferingId:e.courseOfferingId,studentId:e.studentId,studentNo:l.studentNo,name:l.name,className:l.className,majorName:l.majorName,gender:l.gender,genderDesc:l.genderDesc,attendanceRate:l.attendanceRate||0})),console.log("设置学生列表为考勤记录:",m.value)):(console.warn("未找到学生考勤记录或记录为空"),m.value=[],$e.info("该学生暂无考勤记录"))}else m.value=e.data.list||[],f.value=e.data.total||0;e.data.courseInfo&&(d.value=e.data.courseInfo)}).catch(e=>{console.error("获取学生列表失败:",e),$e.error("获取数据失败: "+(e.message||"未知错误"))}).finally(()=>{u.value=!1})}function U(){C.pageNum=1,N()}function z(){C.attendanceDate=(new Date).toISOString().split("T")[0],C.studentNo="",C.studentName="",U()}function B(e){C.pageSize=e,N()}function q(e){C.pageNum=e,N()}function Y(){t.go(-1)}function F(){o.value=null,b.value=!1,C.studentId=void 0,N()}function W(e){return function(e,t="YYYY-MM-DD"){if(!e)return"";let a=e;if("string"==typeof e)if(e.includes("T"))a=new Date(e);else{const t=e.split(/[-/]/);a=t.length>=3?new Date(t[0],t[1]-1,t[2]):new Date(e)}if(!(a instanceof Date)||isNaN(a.getTime()))return console.warn("无效的日期:",e),"";const l=a.getFullYear(),n=Mo(a.getMonth()+1),o=Mo(a.getDate()),r=Mo(a.getHours()),s=Mo(a.getMinutes()),d=Mo(a.getSeconds());return t.replace("YYYY",l).replace("MM",n).replace("DD",o).replace("HH",r).replace("mm",s).replace("ss",d)}(e,"YYYY-MM-DD")}function H(e){return{0:"success",1:"danger",2:"warning",3:"info",4:"info",present:"success",late:"warning",absent:"danger",leave:"info"}[e]||"info"}function G(e){return{0:"出勤",1:"缺勤",2:"迟到",3:"早退",4:"请假",present:"出勤",late:"迟到",absent:"缺勤",leave:"请假"}[e]||"未知"}function X(){C.attendanceDate?Ae.confirm(`确定要开始 ${C.attendanceDate} 的考勤记录吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{v.value=!0,m.value.forEach(e=>{e.attendanceStatus="0",e.remark=""}),$e.success("已进入考勤记录模式")}).catch(()=>{}):$e.warning("请先选择考勤日期")}function Z(){0!==m.value.length?Ae.confirm("确定要保存当前的考勤记录吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{j.value=!0;const e={date:C.attendanceDate,records:m.value.map(e=>({studentId:e.studentId,status:parseInt(e.attendanceStatus),remark:e.remark||""}))},t=s.value;console.log("提交考勤记录，参数:",{teacherId:t,courseId:C.courseId,attendanceData:e}),Bn(t,C.courseId,e).then(()=>{$e.success("考勤记录保存成功"),v.value=!1,N()}).catch(e=>{console.error("考勤记录保存失败:",e),$e.error("考勤记录保存失败: "+(e.message||"未知错误"))}).finally(()=>{j.value=!1})}).catch(()=>{}):$e.warning("没有学生可记录考勤")}function K(){Ae.confirm("确定要取消当前的考勤记录吗？所有未保存的数据将丢失。","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{v.value=!1,N(),$e.info("已取消考勤记录")}).catch(()=>{})}function Q(){$e.info("导出考勤记录功能待实现")}function ee(){var e;null==(e=R.value)||e.validate(e=>{if(!e)return;j.value=!0;let t=$.status;"present"===$.status?t=0:"absent"===$.status?t=1:"late"===$.status?t=2:"leave"===$.status&&(t=4);const a={date:$.date,records:[{studentId:$.studentId,status:t,remark:$.remark}]},l=s.value;console.log("提交单独考勤记录，参数:",{teacherId:l,courseId:C.courseId,submitData:a}),Bn(l,C.courseId,a).then(()=>{$e.success("考勤记录提交成功"),E.visible=!1,N()}).catch(e=>{console.error("考勤记录提交失败:",e),$e.error("考勤记录提交失败: "+(e.message||"未知错误"))}).finally(()=>{j.value=!1})})}return c(()=>i(this,null,function*(){console.log("路由参数:",a.query),l.value=Number(a.query.courseId)||null,n.value=Number(a.query.courseOfferingId)||null,o.value=Number(a.query.studentId)||null,b.value=!!o.value,console.log("考勤记录页面初始化参数:",{courseId:l.value,courseOfferingId:n.value,studentId:o.value,isSingleStudentView:b.value}),l.value||n.value||(console.warn("访问考勤记录页面缺少必要参数: courseId和courseOfferingId都为空"),w.value=!0,$e.warning("参数不完整，请从课程列表或课程开设页面进入考勤管理")),yield function(){return i(this,null,function*(){try{const e=r.userInfo;console.log("当前用户信息:",e);const t=e&&e.roles&&e.roles.some(e=>"admin"===e),a=e&&e.roles&&e.roles.some(e=>"teacher"===e);if(e&&e.teacherId)s.value=e.teacherId,console.log("教师用户访问考勤页面，teacherId:",s.value);else if(a&&1===e.userType){console.warn("教师用户缺少teacherId，请刷新页面或联系管理员。用户信息:",e),$e.warning("用户信息不完整，请刷新页面后重试"),yield r.getInfo();const t=r.userInfo;t&&t.teacherId?(s.value=t.teacherId,console.log("重新获取到teacherId:",s.value)):(console.error("重新获取用户信息后仍然缺少teacherId"),$e.error("无法获取教师信息，请联系管理员检查数据"))}else t?(console.log("管理员用户访问考勤页面"),l.value||n.value||(console.warn("警告：访问考勤页面但缺少courseId和courseOfferingId参数"),$e.warning("请从课程列表或课程开设页面进入考勤管理")),s.value=null):(console.warn("未知用户类型，缺少必要的角色和ID信息:",e),$e.warning("您可能没有权限访问此页面，请联系管理员"))}catch(e){console.error("获取用户信息失败:",e),$e.error("获取用户信息失败")}})}(),w.value||N()})),(e,t)=>{const a=Re,l=it,n=Pt,r=wt,s=at,i=tt,c=ut,g=mt,_=He,y=Ge,J=Tt,te=ht,ne=ft,oe=vt,se=Qe,de=yt,ue=ct,ce=_t;return h(),V("div",Bo,[k(se,{class:"box-card",shadow:"hover"},{header:I(()=>[x("div",qo,[x("div",Yo,[t[12]||(t[12]=x("span",{class:"header-title"},"考勤记录管理",-1)),t[13]||(t[13]=D()),d.value?(h(),V("span",Fo,O(d.value.courseName)+" - "+O(d.value.semester),1)):L("",!0)]),t[16]||(t[16]=D()),b.value?(h(),V("div",Ho,[k(l,{onClick:F,link:""},{default:I(()=>[k(a,null,{default:I(()=>[k(S(ie))]),_:1}),t[15]||(t[15]=D("返回列表\n            "))]),_:1})])):(h(),V("div",Wo,[k(l,{onClick:Y,link:""},{default:I(()=>[k(a,null,{default:I(()=>[k(S(ie))]),_:1}),t[14]||(t[14]=D("返回\n            "))]),_:1})]))])]),default:I(()=>[t[73]||(t[73]=D()),w.value?(h(),V("div",Go,[k(n,{image:"error",description:"参数不完整，无法加载考勤记录","image-size":200},{default:I(()=>[t[18]||(t[18]=x("div",{class:"error-message"},[x("p",null,"请从课程列表或课程开设页面进入考勤管理系统")],-1)),t[19]||(t[19]=D()),k(l,{type:"primary",onClick:Y},{default:I(()=>t[17]||(t[17]=[D("返回上一页")])),_:1})]),_:1})])):(h(),V("div",Jo,[d.value?(h(),V("div",Xo,[x("div",Zo,[t[20]||(t[20]=x("span",{class:"label"},"课程编码:",-1)),t[21]||(t[21]=D()),x("span",Ko,O(d.value.courseCode||"-"),1)]),t[30]||(t[30]=D()),x("div",Qo,[t[22]||(t[22]=x("span",{class:"label"},"学分:",-1)),t[23]||(t[23]=D()),x("span",er,O(d.value.credit||"-"),1)]),t[31]||(t[31]=D()),x("div",tr,[t[24]||(t[24]=x("span",{class:"label"},"授课教师:",-1)),t[25]||(t[25]=D()),x("span",ar,O(d.value.teacherName||"-"),1)]),t[32]||(t[32]=D()),x("div",lr,[t[26]||(t[26]=x("span",{class:"label"},"上课时间:",-1)),t[27]||(t[27]=D()),x("span",nr,O(d.value.classTime||"-"),1)]),t[33]||(t[33]=D()),x("div",or,[t[28]||(t[28]=x("span",{class:"label"},"上课地点:",-1)),t[29]||(t[29]=D()),x("span",rr,O(d.value.location||"-"),1)])])):L("",!0),t[69]||(t[69]=D()),b.value?L("",!0):(h(),p(c,{key:1,model:C,ref:"queryForm",inline:!0,class:"search-form"},{default:I(()=>[k(s,{label:"日期",prop:"attendanceDate"},{default:I(()=>[k(r,{modelValue:C.attendanceDate,"onUpdate:modelValue":t[0]||(t[0]=e=>C.attendanceDate=e),type:"date",placeholder:"选择日期",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",disabled:v.value},null,8,["modelValue","disabled"])]),_:1}),t[37]||(t[37]=D()),k(s,{label:"学号",prop:"studentNo"},{default:I(()=>[k(i,{modelValue:C.studentNo,"onUpdate:modelValue":t[1]||(t[1]=e=>C.studentNo=e),placeholder:"请输入学号",clearable:"",disabled:v.value},null,8,["modelValue","disabled"])]),_:1}),t[38]||(t[38]=D()),k(s,{label:"姓名",prop:"studentName"},{default:I(()=>[k(i,{modelValue:C.studentName,"onUpdate:modelValue":t[2]||(t[2]=e=>C.studentName=e),placeholder:"请输入姓名",clearable:"",disabled:v.value},null,8,["modelValue","disabled"])]),_:1}),t[39]||(t[39]=D()),k(s,null,{default:I(()=>[k(l,{type:"primary",onClick:U,disabled:v.value},{default:I(()=>[k(a,null,{default:I(()=>[k(S(ae))]),_:1}),t[34]||(t[34]=D("查询\n            "))]),_:1},8,["disabled"]),t[36]||(t[36]=D()),k(l,{onClick:z,disabled:v.value},{default:I(()=>[k(a,null,{default:I(()=>[k(S(le))]),_:1}),t[35]||(t[35]=D("重置\n            "))]),_:1},8,["disabled"])]),_:1})]),_:1},8,["model"])),t[70]||(t[70]=D()),b.value?L("",!0):(h(),V("div",sr,[v.value?L("",!0):(h(),p(l,{key:0,type:"primary",onClick:X},{default:I(()=>[k(a,null,{default:I(()=>[k(S(fe))]),_:1}),t[40]||(t[40]=D("开始考勤\n          "))]),_:1})),t[44]||(t[44]=D()),v.value?(h(),p(l,{key:1,type:"success",onClick:Z},{default:I(()=>[k(a,null,{default:I(()=>[k(S(ve))]),_:1}),t[41]||(t[41]=D("保存考勤\n          "))]),_:1})):L("",!0),t[45]||(t[45]=D()),v.value?(h(),p(l,{key:2,type:"danger",onClick:K},{default:I(()=>[k(a,null,{default:I(()=>[k(S(ge))]),_:1}),t[42]||(t[42]=D("取消考勤\n          "))]),_:1})):L("",!0),t[46]||(t[46]=D()),k(l,{type:"primary",onClick:Q,disabled:v.value||!m.value.length},{default:I(()=>[k(a,null,{default:I(()=>[k(S(re))]),_:1}),t[43]||(t[43]=D("导出考勤记录\n        "))]),_:1},8,["disabled"])])),t[71]||(t[71]=D()),M((h(),p(ne,{data:m.value,stripe:"",border:"",style:{width:"100%"},"header-cell-style":{background:"#f5f7fa",color:"#606266"}},{default:I(()=>[k(g,{type:"index",label:"#",width:"50",align:"center"}),t[60]||(t[60]=D()),k(g,{prop:"studentNo",label:"学号",width:"120",align:"center"}),t[61]||(t[61]=D()),k(g,{prop:"name",label:"姓名",width:"100",align:"center"}),t[62]||(t[62]=D()),k(g,{prop:"gender",label:"性别",width:"60",align:"center"},{default:I(e=>[D(O(0===e.row.gender?"男":"女"),1)]),_:1}),t[63]||(t[63]=D()),k(g,{prop:"className",label:"班级",width:"150",align:"center","show-overflow-tooltip":""}),t[64]||(t[64]=D()),v.value?(h(),p(g,{key:0,label:"考勤状态",width:"200",align:"center"},{default:I(e=>[k(y,{modelValue:e.row.attendanceStatus,"onUpdate:modelValue":t=>e.row.attendanceStatus=t},{default:I(()=>[k(_,{label:"0"},{default:I(()=>t[47]||(t[47]=[D("出勤")])),_:1}),t[51]||(t[51]=D()),k(_,{label:"2"},{default:I(()=>t[48]||(t[48]=[D("迟到")])),_:1}),t[52]||(t[52]=D()),k(_,{label:"1"},{default:I(()=>t[49]||(t[49]=[D("缺勤")])),_:1}),t[53]||(t[53]=D()),k(_,{label:"4"},{default:I(()=>t[50]||(t[50]=[D("请假")])),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:1})):(h(),p(g,{key:1,label:"出勤率",width:"100",align:"center"},{default:I(e=>{return[k(J,{percentage:e.row.attendanceRate||0,color:(t=e.row.attendanceRate,null==t?"#909399":t>=90?"#67C23A":t>=80?"#E6A23C":"#F56C6C"),format:e=>`${e}%`,"stroke-width":10},null,8,["percentage","color","format"])];var t}),_:1})),t[65]||(t[65]=D()),v.value||b.value?L("",!0):(h(),p(g,{key:2,label:"历史考勤","min-width":"250",align:"center"},{default:I(e=>[x("div",dr,[(h(!0),V(P,null,T(e.row.attendanceRecords,(e,t)=>(h(),p(te,{key:t,type:H(e.status.toString()),class:"attendance-tag",onClick:t=>{return a=e,void $e.info(`${W(a.date)}: ${G(a.status.toString())}${a.remark?", 备注: "+a.remark:""}`);var a}},{default:I(()=>[D(O(W(e.date))+": "+O(G(e.status.toString())),1)]),_:2},1032,["type","onClick"]))),128)),t[54]||(t[54]=D()),e.row.attendanceRecords&&0!==e.row.attendanceRecords.length?L("",!0):(h(),V("span",ir,"\n                  暂无记录\n                "))])]),_:1})),t[66]||(t[66]=D()),b.value?(h(),V(P,{key:3},[k(g,{label:"考勤日期",width:"120",align:"center"},{default:I(e=>[D(O(W(e.row.date)),1)]),_:1}),t[55]||(t[55]=D()),k(g,{label:"考勤状态",width:"100",align:"center"},{default:I(e=>[k(te,{type:H(e.row.status.toString())},{default:I(()=>[D(O(G(e.row.status.toString())),1)]),_:2},1032,["type"])]),_:1}),t[56]||(t[56]=D()),k(g,{label:"备注","min-width":"180",align:"center"},{default:I(e=>[D(O(e.row.remark||"-"),1)]),_:1})],64)):L("",!0),t[67]||(t[67]=D()),v.value?(h(),p(g,{key:4,label:"备注","min-width":"200",align:"center"},{default:I(e=>[k(i,{modelValue:e.row.remark,"onUpdate:modelValue":t=>e.row.remark=t,placeholder:"填写备注信息",clearable:""},null,8,["modelValue","onUpdate:modelValue"])]),_:1})):L("",!0),t[68]||(t[68]=D()),v.value||b.value?L("",!0):(h(),p(g,{key:5,label:"操作",width:"150",align:"center",fixed:"right"},{default:I(e=>[k(l,{type:"primary",link:"",onClick:t=>{return a=e.row,console.log("查看学生考勤详情:",a),o.value=a.studentId,b.value=!0,C.studentId=a.studentId,console.log("更新查询参数:",{studentId:o.value,isSingleStudentView:b.value,queryParams:C}),void N();var a}},{default:I(()=>t[57]||(t[57]=[D("\n                考勤详情\n              ")])),_:2},1032,["onClick"]),t[59]||(t[59]=D()),k(l,{type:"primary",link:"",onClick:t=>{return a=e.row,E.title="记录考勤",E.visible=!0,$.id=a.id,$.studentId=a.studentId,$.studentName=a.name,$.studentNo=a.studentNo,$.date=C.attendanceDate,$.status="0",void($.remark="");var a}},{default:I(()=>t[58]||(t[58]=[D("\n                单独考勤\n              ")])),_:2},1032,["onClick"])]),_:1}))]),_:1},8,["data"])),[[ce,u.value]]),t[72]||(t[72]=D()),b.value?L("",!0):(h(),V("div",ur,[k(oe,{"current-page":C.pageNum,"onUpdate:currentPage":t[3]||(t[3]=e=>C.pageNum=e),"page-size":C.pageSize,"onUpdate:pageSize":t[4]||(t[4]=e=>C.pageSize=e),"page-sizes":[10,20,50,100],background:!0,layout:"total, sizes, prev, pager, next, jumper",total:f.value,onSizeChange:B,onCurrentChange:q},null,8,["current-page","page-size","total"])]))]))]),_:1}),t[89]||(t[89]=D()),k(ue,{modelValue:E.visible,"onUpdate:modelValue":t[11]||(t[11]=e=>E.visible=e),title:E.title,width:"500px","append-to-body":""},{footer:I(()=>[x("div",cr,[k(l,{onClick:t[10]||(t[10]=e=>E.visible=!1)},{default:I(()=>t[85]||(t[85]=[D("取消")])),_:1}),t[87]||(t[87]=D()),k(l,{type:"primary",onClick:ee,loading:j.value},{default:I(()=>t[86]||(t[86]=[D("确定")])),_:1},8,["loading"])])]),default:I(()=>[k(c,{ref_key:"attendanceFormRef",ref:R,model:$,rules:A,"label-width":"100px"},{default:I(()=>[k(s,{label:"学生",prop:"studentName"},{default:I(()=>[k(i,{modelValue:$.studentName,"onUpdate:modelValue":t[5]||(t[5]=e=>$.studentName=e),disabled:""},null,8,["modelValue"])]),_:1}),t[81]||(t[81]=D()),k(s,{label:"学号",prop:"studentNo"},{default:I(()=>[k(i,{modelValue:$.studentNo,"onUpdate:modelValue":t[6]||(t[6]=e=>$.studentNo=e),disabled:""},null,8,["modelValue"])]),_:1}),t[82]||(t[82]=D()),k(s,{label:"考勤日期",prop:"date"},{default:I(()=>[k(r,{modelValue:$.date,"onUpdate:modelValue":t[7]||(t[7]=e=>$.date=e),type:"date",placeholder:"选择日期",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),t[83]||(t[83]=D()),k(s,{label:"考勤状态",prop:"status"},{default:I(()=>[k(y,{modelValue:$.status,"onUpdate:modelValue":t[8]||(t[8]=e=>$.status=e)},{default:I(()=>[k(de,{label:"0"},{default:I(()=>t[74]||(t[74]=[D("出勤")])),_:1}),t[78]||(t[78]=D()),k(de,{label:"1"},{default:I(()=>t[75]||(t[75]=[D("缺勤")])),_:1}),t[79]||(t[79]=D()),k(de,{label:"2"},{default:I(()=>t[76]||(t[76]=[D("迟到")])),_:1}),t[80]||(t[80]=D()),k(de,{label:"4"},{default:I(()=>t[77]||(t[77]=[D("请假")])),_:1})]),_:1},8,["modelValue"])]),_:1}),t[84]||(t[84]=D()),k(s,{label:"备注",prop:"remark"},{default:I(()=>[k(i,{modelValue:$.remark,"onUpdate:modelValue":t[9]||(t[9]=e=>$.remark=e),type:"textarea",rows:"3",placeholder:"请输入备注"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),t[88]||(t[88]=D())]),_:1},8,["modelValue","title"])])}}},[["__scopeId","data-v-86b522c4"]]),mr=Object.freeze(Object.defineProperty({__proto__:null,default:pr},Symbol.toStringTag,{value:"Module"}));function hr(e){return qt({url:`/student/${e}/grade-stats`,method:"get"})}function fr(e){return qt({url:`/student/${e}/info`,method:"get"})}function vr(e,t){return qt({url:`/student/${e}/course-selections`,method:"get",params:t})}const gr={class:"app-container"},_r={class:"card-header"},br={class:"mb-2 operation-container"},yr={key:1,class:"no-grade"},wr={class:"pagination-container"},Vr={class:"import-container"},xr={class:"dialog-footer"},kr={class:"dialog-footer"},Ir=ha({__name:"index",setup(e){const t=_(),a=g(),l=b(()=>a.query.courseId&&a.query.courseOfferingId),n=pa(),o=y(null),r=J({courseId:void 0,courseOfferingId:void 0,semester:void 0,classId:void 0,studentName:void 0,pageNum:1,pageSize:10}),u=y(!1),m=y(0),f=y([]),v=y([]),w=y([]),C=y([]),E=y(null),$=y({}),A=y([]),R=J({visible:!1,fileList:[],loading:!1}),j=J({visible:!1,loading:!1}),N=J({id:null,studentId:null,studentName:"",studentNo:"",courseName:"",courseId:null,score:null,comment:""}),U={score:[{required:!0,message:"请输入成绩",trigger:"blur"}]},z=y(null),B=b(()=>r.courseId&&r.semester),q=b(()=>r.courseId&&C.value.length>0);c(()=>i(this,null,function*(){if(yield function(){return i(this,null,function*(){try{const e=n.userInfo,t=e&&e.roles&&e.roles.includes("admin"),a=e&&e.roles&&e.roles.includes("teacher");e&&e.teacherId?o.value=e.teacherId:a&&e.userId?(console.log("教师用户但缺少teacherId，使用userId替代:",e.userId),o.value=e.userId):t?(console.log("管理员用户访问成绩录入页面"),o.value=null):(console.warn("未知用户类型或缺少必要信息:",e),$e.warning("获取教师信息失败，请重新登录"))}catch(e){console.error("获取教师ID失败:",e),$e.error("获取教师信息失败")}})}(),yield Y(),l.value){r.courseId=Number(a.query.courseId),r.courseOfferingId=Number(a.query.courseOfferingId);const e=f.value.find(e=>e.value===r.courseId);e&&e.semester&&(r.semester=e.semester,F())}}));const Y=()=>i(this,null,function*(){try{const e=yield qt({url:"/grade/course-options",method:"get"});e.data&&Array.isArray(e.data)?(f.value=e.data.map(e=>({label:e.label,value:Number(e.value),semester:e.semester})),console.log("处理后的课程选项:",f.value)):(f.value=[],console.warn("课程选项API返回格式异常:",e));const t=yield qt({url:"/grade/class-options",method:"get"});t.data&&Array.isArray(t.data)?v.value=t.data.map(e=>({label:e.label,value:Number(e.value)})):v.value=[];const a=yield qt({url:"/grade/semester-list",method:"get"});a.data&&Array.isArray(a.data)?w.value=a.data:w.value=["2023-2024-1","2023-2024-2","2024-2025-1"]}catch(e){console.error("初始化选项时出错:",e),$e.error("获取下拉选项失败，请刷新页面重试")}}),F=()=>i(this,null,function*(){if(B.value){u.value=!0;try{const e=s({},r);null!==o.value&&(e.teacherId=o.value),console.log("查询成绩列表参数:",e);const t=yield function(e){return console.log("API函数 getStudentGradesList 被调用，参数:",e),qt({url:"/grade/student-list",method:"get",params:e})}(e);console.log("查询成绩列表结果:",t),t.data?(C.value=t.data.list||[],m.value=t.data.total||0,$.value={}):(C.value=[],m.value=0)}catch(e){console.error("查询成绩列表失败:",e),$e.error("查询成绩列表失败"),C.value=[],m.value=0}finally{u.value=!1}}else $e.warning("请选择课程和学期")}),W=()=>{l.value?(r.classId=void 0,r.studentName=void 0):(r.courseId=void 0,r.semester=void 0,r.classId=void 0,r.studentName=void 0),r.pageNum=1,r.courseId&&r.semester?F():(C.value=[],m.value=0)},H=e=>{r.pageSize=e,F()},G=e=>{r.pageNum=e,F()};function X(){t.go(-1)}const Z=e=>null==e?null:e>=95?"A+":e>=90?"A":e>=85?"B+":e>=80?"B":e>=75?"C+":e>=70?"C":e>=60?"D":"F";const K=e=>{A.value=e},Q=()=>{if(0===A.value.length)return void $e.warning("请先选择要保存的学生成绩");const e=A.value.map(e=>({selectionId:e.selectionId,id:e.id,studentId:e.studentId,courseId:e.courseId,score:e.score,isPassed:e.score>=60?1:0,grade:Z(e.score)}));Ae.confirm(`确定要保存${e.length}条学生成绩吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{var t;u.value=!0,(t=e,qt({url:"/grade/submit-grades",method:"post",data:t})).then(e=>{$e.success("成绩保存成功"),F(),$.value={}}).catch(e=>{console.error("保存成绩失败:",e),$e.error("保存成绩失败")}).finally(()=>{u.value=!1})}).catch(()=>{})},ee=()=>{0!==A.value.length?Ae.confirm(`确定要重置${A.value.length}条学生成绩吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{A.value.forEach(e=>{e.score=null,e.grade=null,e.isPassed=null,e.isPassedDesc="-",$.value[e.id]=d(s({},e),{score:null,modified:!0})}),$e.success("已重置选中学生的成绩")}).catch(()=>{}):$e.warning("请先选择要重置的学生成绩")},te=()=>{var e;null==(e=z.value)||e.validate(e=>{if(!e)return;j.loading=!0;const t=C.value.findIndex(e=>e.id===N.id);if(-1!==t){const e=C.value[t];e.score=N.score,e.comment=N.comment,e.grade=Z(N.score),e.isPassed=N.score>=60?1:0,e.isPassedDesc=N.score>=60?"通过":"不通过",$.value[e.id]=d(s({},e),{modified:!0}),j.visible=!1,j.loading=!1,$e.success("成绩已更新，请点击保存按钮提交到服务器")}else j.loading=!1,$e.error("找不到对应的学生记录")})},ne=()=>{R.visible=!0,R.fileList=[]},se=(e,t)=>{R.fileList=t.slice(-1)},de=()=>i(this,null,function*(){if(0===R.fileList.length)return void $e.warning("请先选择要导入的文件");const e=R.fileList[0].raw;if(e)if(/\.(xlsx|xls)$/.test(e.name)){R.loading=!0;try{const t=new FormData;t.append("file",e);const a=yield function(e){return qt({url:"/grade/import",method:"post",data:e,headers:{"Content-Type":"multipart/form-data"}})}(t),l=a.data||{},n=l.total||0,o=l.success||0,r=l.fail||0;0===n?$e.warning("Excel文件中没有数据"):0===r?$e.success(`导入成功！共导入${o}条数据`):($e.warning(`导入完成！成功${o}条，失败${r}条`),l.failList&&l.failList.length>0&&console.error("导入失败的数据:",l.failList)),R.visible=!1,R.fileList=[],F()}catch(t){console.error("导入成绩失败:",t),$e.error(t.message||"导入成绩失败")}finally{R.loading=!1}}else $e.warning("只能上传Excel文件");else $e.warning("文件不存在")}),ue=()=>i(this,null,function*(){if(r.courseId&&r.semester)if(0!==C.value.length)try{const e={courseId:r.courseId,semester:r.semester,classId:r.classId,studentName:r.studentName},t=yield function(e){return qt({url:"/grade/export",method:"get",params:e,responseType:"blob"})}(e),a=t.data||t,l=window.URL.createObjectURL(a),n=document.createElement("a");n.href=l,n.download=`成绩数据_${(new Date).getTime()}.xlsx`,document.body.appendChild(n),n.click(),document.body.removeChild(n),window.URL.revokeObjectURL(l),$e.success("导出成功")}catch(e){console.error("导出成绩失败:",e),$e.error("导出成绩失败")}else $e.warning("没有可导出的数据");else $e.warning("请先选择课程和学期")}),ce=()=>i(this,null,function*(){try{const e=yield qt({url:"/grade/template",method:"get",responseType:"blob"}),t=e.data||e,a=window.URL.createObjectURL(t),l=document.createElement("a");l.href=a,l.download="成绩导入模板.xlsx",document.body.appendChild(l),l.click(),document.body.removeChild(l),window.URL.revokeObjectURL(a),$e.success("模板下载成功")}catch(e){console.error("下载模板失败:",e),$e.error("下载模板失败")}});return(e,t)=>{const a=Re,n=it,o=ot,i=rt,c=at,g=tt,_=ut,b=mt,y=nt,B=ht,Y=ft,J=vt,pe=Qe,me=pt,he=ct,fe=_t;return h(),V("div",gr,[k(pe,{class:"box-card"},{header:I(()=>[x("div",_r,[t[14]||(t[14]=x("span",{class:"header-title"},"成绩录入",-1)),t[15]||(t[15]=D()),l.value?(h(),p(n,{key:0,onClick:X,link:""},{default:I(()=>[k(a,null,{default:I(()=>[k(S(ie))]),_:1}),t[13]||(t[13]=D("返回\n          "))]),_:1})):L("",!0)])]),default:I(()=>[t[47]||(t[47]=D()),k(_,{model:r,ref_key:"queryForm",ref:E,inline:!0,"label-width":"80px"},{default:I(()=>[k(c,{label:"课程",prop:"courseId",required:""},{default:I(()=>[k(i,{modelValue:r.courseId,"onUpdate:modelValue":t[0]||(t[0]=e=>r.courseId=e),placeholder:"请选择课程",clearable:"",style:{width:"240px"},disabled:l.value},{default:I(()=>[(h(!0),V(P,null,T(f.value,e=>(h(),p(o,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1}),t[19]||(t[19]=D()),k(c,{label:"学期",prop:"semester",required:""},{default:I(()=>[k(i,{modelValue:r.semester,"onUpdate:modelValue":t[1]||(t[1]=e=>r.semester=e),placeholder:"请选择学期",clearable:"",style:{width:"180px"},disabled:l.value},{default:I(()=>[(h(!0),V(P,null,T(w.value,e=>(h(),p(o,{key:e,label:e,value:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1}),t[20]||(t[20]=D()),k(c,{label:"班级",prop:"classId"},{default:I(()=>[k(i,{modelValue:r.classId,"onUpdate:modelValue":t[2]||(t[2]=e=>r.classId=e),placeholder:"请选择班级",clearable:"",style:{width:"240px"}},{default:I(()=>[(h(!0),V(P,null,T(v.value,e=>(h(),p(o,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t[21]||(t[21]=D()),k(c,{label:"学生姓名",prop:"studentName"},{default:I(()=>[k(g,{modelValue:r.studentName,"onUpdate:modelValue":t[3]||(t[3]=e=>r.studentName=e),placeholder:"请输入学生姓名",clearable:"",style:{width:"200px"}},null,8,["modelValue"])]),_:1}),t[22]||(t[22]=D()),k(c,null,{default:I(()=>[k(n,{type:"primary",onClick:F},{default:I(()=>[k(a,null,{default:I(()=>[k(S(ae))]),_:1}),t[16]||(t[16]=D("查询\n          "))]),_:1}),t[18]||(t[18]=D()),k(n,{onClick:W},{default:I(()=>[k(a,null,{default:I(()=>[k(S(le))]),_:1}),t[17]||(t[17]=D("重置\n          "))]),_:1})]),_:1})]),_:1},8,["model"]),t[48]||(t[48]=D()),x("div",br,[k(n,{type:"success",disabled:!C.value.length||!A.value.length,onClick:Q},{default:I(()=>[k(a,null,{default:I(()=>[k(S(ve))]),_:1}),t[23]||(t[23]=D("保存成绩\n        "))]),_:1},8,["disabled"]),t[28]||(t[28]=D()),k(n,{type:"info",disabled:!C.value.length||!A.value.length,onClick:ee},{default:I(()=>[k(a,null,{default:I(()=>[k(S(ge))]),_:1}),t[24]||(t[24]=D("重置选中成绩\n        "))]),_:1},8,["disabled"]),t[29]||(t[29]=D()),k(n,{type:"primary",disabled:!q.value,onClick:ne},{default:I(()=>[k(a,null,{default:I(()=>[k(S(oe))]),_:1}),t[25]||(t[25]=D("导入成绩\n        "))]),_:1},8,["disabled"]),t[30]||(t[30]=D()),k(n,{type:"primary",disabled:!C.value.length,onClick:ue},{default:I(()=>[k(a,null,{default:I(()=>[k(S(re))]),_:1}),t[26]||(t[26]=D("导出成绩\n        "))]),_:1},8,["disabled"]),t[31]||(t[31]=D()),k(n,{type:"primary",onClick:ce},{default:I(()=>[k(a,null,{default:I(()=>[k(S(_e))]),_:1}),t[27]||(t[27]=D("下载导入模板\n        "))]),_:1})]),t[49]||(t[49]=D()),M((h(),p(Y,{data:C.value,border:"",style:{width:"100%"},"header-cell-style":{background:"#f5f7fa",color:"#606266"},onSelectionChange:K},{default:I(()=>[k(b,{type:"selection",width:"55",align:"center"}),t[35]||(t[35]=D()),k(b,{type:"index",label:"#",width:"60",align:"center"}),t[36]||(t[36]=D()),k(b,{prop:"studentNo",label:"学号",width:"120",align:"center"}),t[37]||(t[37]=D()),k(b,{prop:"studentName",label:"姓名",width:"100",align:"center"}),t[38]||(t[38]=D()),k(b,{prop:"gender",label:"性别",width:"60",align:"center"},{default:I(e=>[D(O(0===e.row.gender?"男":"女"),1)]),_:1}),t[39]||(t[39]=D()),k(b,{prop:"className",label:"班级",width:"180",align:"center"}),t[40]||(t[40]=D()),k(b,{prop:"majorName",label:"专业",width:"180",align:"center"}),t[41]||(t[41]=D()),k(b,{prop:"courseName",label:"课程","min-width":"180",align:"center"}),t[42]||(t[42]=D()),k(b,{prop:"courseTypeDesc",label:"课程类型",width:"100",align:"center"}),t[43]||(t[43]=D()),k(b,{prop:"score",label:"成绩",width:"120",align:"center"},{default:I(e=>[k(y,{modelValue:e.row.score,"onUpdate:modelValue":t=>e.row.score=t,min:0,max:100,precision:1,step:.5,size:"small",placeholder:"输入成绩",onChange:t=>{return a=e.row,l=t,$.value[a.id]=d(s({},a),{score:l,modified:!0}),a.grade=Z(l),a.isPassed=l>=60?1:0,void(a.isPassedDesc=l>=60?"通过":"不通过");var a,l}},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),t[44]||(t[44]=D()),k(b,{prop:"grade",label:"等级",width:"80",align:"center"},{default:I(e=>{return[e.row.grade?(h(),p(B,{key:0,type:(t=e.row.grade,{"A+":"success",A:"success","B+":"success",B:"warning","C+":"warning",C:"warning",D:"info",F:"danger"}[t]||"info")},{default:I(()=>[D(O(e.row.grade),1)]),_:2},1032,["type"])):(h(),V("span",yr,"-"))];var t}),_:1}),t[45]||(t[45]=D()),k(b,{prop:"isPassedDesc",label:"是否通过",width:"100",align:"center"},{default:I(e=>[k(B,{type:1===e.row.isPassed?"success":0===e.row.isPassed?"danger":"info"},{default:I(()=>[D(O(e.row.isPassedDesc),1)]),_:2},1032,["type"])]),_:1}),t[46]||(t[46]=D()),k(b,{label:"操作",width:"120",align:"center",fixed:"right"},{default:I(e=>[k(n,{type:"primary",link:"",onClick:t=>{return a=e.row,j.visible=!0,N.id=a.id,N.studentId=a.studentId,N.studentName=a.studentName,N.studentNo=a.studentNo,N.courseName=a.courseName,N.courseId=a.courseId,N.score=a.score,void(N.comment=a.comment||"");var a}},{default:I(()=>t[32]||(t[32]=[D("\n              编辑\n            ")])),_:2},1032,["onClick"]),t[34]||(t[34]=D()),k(n,{type:"danger",link:"",onClick:t=>{return a=e.row,void Ae.confirm(`确定要清空 ${a.studentName} 的成绩吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{a.score=null,a.grade=null,a.isPassed=null,a.isPassedDesc="-",$.value[a.id]=d(s({},a),{score:null,modified:!0}),$e.success("已清空该学生的成绩，请点击保存按钮提交到服务器")}).catch(()=>{});var a}},{default:I(()=>t[33]||(t[33]=[D("\n              清空\n            ")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[fe,u.value]]),t[50]||(t[50]=D()),x("div",wr,[m.value>0?(h(),p(J,{key:0,"current-page":r.pageNum,"page-sizes":[10,20,30,50],"page-size":r.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:m.value,onSizeChange:H,onCurrentChange:G},null,8,["current-page","page-size","total"])):L("",!0)])]),_:1}),t[69]||(t[69]=D()),k(he,{modelValue:R.visible,"onUpdate:modelValue":t[5]||(t[5]=e=>R.visible=e),title:"导入成绩",width:"500px","append-to-body":""},{footer:I(()=>[x("div",xr,[k(n,{onClick:t[4]||(t[4]=e=>R.visible=!1)},{default:I(()=>t[57]||(t[57]=[D("取消")])),_:1}),t[59]||(t[59]=D()),k(n,{type:"primary",onClick:de,loading:R.loading,disabled:!R.fileList.length},{default:I(()=>t[58]||(t[58]=[D("\n            确定导入\n          ")])),_:1},8,["loading","disabled"])])]),default:I(()=>[x("div",Vr,[k(me,{class:"upload-demo",drag:"",action:"#","auto-upload":!1,"file-list":R.fileList,"on-change":se,limit:1,accept:".xlsx,.xls"},{tip:I(()=>t[51]||(t[51]=[x("div",{class:"el-upload__tip"},"\n              只能上传Excel文件(.xlsx, .xls)，且文件大小不超过2MB\n            ",-1)])),default:I(()=>[k(a,{class:"el-icon--upload"},{default:I(()=>[k(S(oe))]),_:1}),t[52]||(t[52]=D()),t[53]||(t[53]=x("div",{class:"el-upload__text"},[D("拖拽文件到此处或 "),x("em",null,"点击上传")],-1)),t[54]||(t[54]=D())]),_:1},8,["file-list"]),t[55]||(t[55]=D()),t[56]||(t[56]=x("div",{class:"import-tips"},[x("h4",null,"导入说明："),D(),x("ol",null,[x("li",null,"请先下载成绩导入模板"),D(),x("li",null,"按照模板格式填写学生成绩"),D(),x("li",null,"成绩取值范围：0-100分"),D(),x("li",null,"Excel表格中的学号必须与系统中的学生学号一致"),D(),x("li",null,"导入成功后，请检查成绩是否正确")])],-1))]),t[60]||(t[60]=D())]),_:1},8,["modelValue"]),t[70]||(t[70]=D()),k(he,{modelValue:j.visible,"onUpdate:modelValue":t[12]||(t[12]=e=>j.visible=e),title:"编辑成绩",width:"500px","append-to-body":""},{footer:I(()=>[x("div",kr,[k(n,{onClick:t[11]||(t[11]=e=>j.visible=!1)},{default:I(()=>t[65]||(t[65]=[D("取消")])),_:1}),t[67]||(t[67]=D()),k(n,{type:"primary",onClick:te,loading:j.loading},{default:I(()=>t[66]||(t[66]=[D("\n            确定\n          ")])),_:1},8,["loading"])])]),default:I(()=>[k(_,{ref_key:"editFormRef",ref:z,model:N,rules:U,"label-width":"100px"},{default:I(()=>[k(c,{label:"学生",prop:"studentName"},{default:I(()=>[k(g,{modelValue:N.studentName,"onUpdate:modelValue":t[6]||(t[6]=e=>N.studentName=e),disabled:""},null,8,["modelValue"])]),_:1}),t[61]||(t[61]=D()),k(c,{label:"学号",prop:"studentNo"},{default:I(()=>[k(g,{modelValue:N.studentNo,"onUpdate:modelValue":t[7]||(t[7]=e=>N.studentNo=e),disabled:""},null,8,["modelValue"])]),_:1}),t[62]||(t[62]=D()),k(c,{label:"课程",prop:"courseName"},{default:I(()=>[k(g,{modelValue:N.courseName,"onUpdate:modelValue":t[8]||(t[8]=e=>N.courseName=e),disabled:""},null,8,["modelValue"])]),_:1}),t[63]||(t[63]=D()),k(c,{label:"成绩",prop:"score"},{default:I(()=>[k(y,{modelValue:N.score,"onUpdate:modelValue":t[9]||(t[9]=e=>N.score=e),min:0,max:100,precision:1,step:.5,style:{width:"100%"}},null,8,["modelValue"])]),_:1}),t[64]||(t[64]=D()),k(c,{label:"备注",prop:"comment"},{default:I(()=>[k(g,{modelValue:N.comment,"onUpdate:modelValue":t[10]||(t[10]=e=>N.comment=e),type:"textarea",rows:"3",placeholder:"请输入备注"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),t[68]||(t[68]=D())]),_:1},8,["modelValue"])])}}},[["__scopeId","data-v-c44ba246"]]),Cr=Object.freeze(Object.defineProperty({__proto__:null,default:Ir},Symbol.toStringTag,{value:"Module"})),Er={class:"student-edit-container"},Dr={class:"card-header"},Pr={class:"empty-data-tip"},Tr={key:0},Or={key:1},$r={class:"form-footer"},Ar=ha({__name:"edit",setup(e){const t=_(),a=g(),l=y(Number(a.params.id)),n=y(null),o=y("basic"),r=y(!0),d=y(!1),u=J({id:null,studentNo:"",name:"",gender:0,classId:null,admissionDate:null,graduationDate:null,idCard:"",birthday:null,address:"",email:"",phone:"",status:0}),m={name:[{required:!0,message:"请输入姓名",trigger:"blur"}],gender:[{required:!0,message:"请选择性别",trigger:"change"}],classId:[{required:!0,message:"请选择班级",trigger:"change"}],admissionDate:[{required:!0,message:"请选择入学日期",trigger:"change"}],idCard:[{pattern:/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/,message:"身份证号格式不正确",trigger:"blur"}],email:[{pattern:/^[\w.-]+@[\w.-]+\.\w+$/,message:"邮箱格式不正确",trigger:"blur"}],phone:[{pattern:/^1[3-9]\d{9}$/,message:"手机号格式不正确",trigger:"blur"}]},f=y([]),v=y([]),b=y([]),w=()=>{r.value=!0,Hl(l.value).then(e=>{if(console.log("获取学生详情成功:",e.data),e.data){const t=s({},e.data);t.classId&&(t.classId=Number(t.classId)),void 0!==t.gender&&(t.gender=Number(t.gender)),void 0!==t.status&&(t.status=Number(t.status)),Object.assign(u,t)}else $e.warning("获取的学生数据为空");r.value=!1}).catch(e=>{console.error("获取学生详情失败:",e),$e.error("获取学生详情失败"),r.value=!1})};c(()=>{Promise.all([(console.log("开始获取班级列表..."),Zl().then(e=>(console.log("班级列表获取成功:",e.data),Array.isArray(e.data)?f.value=e.data:(console.warn("班级列表数据格式不正确:",e.data),f.value=[],$e.warning("班级列表数据格式不正确")),Promise.resolve(e.data))).catch(e=>(console.error("获取班级列表失败:",e),f.value=[],$e.warning("获取班级列表失败，请刷新页面重试"),Promise.resolve([])))),(console.log("开始获取专业列表..."),Rl().then(e=>(console.log("专业列表获取成功:",e.data),Array.isArray(e.data)?v.value=e.data:(console.warn("专业列表数据格式不正确:",e.data),v.value=[],$e.warning("专业列表数据格式不正确")),Promise.resolve(e.data))).catch(e=>(console.error("获取专业列表失败:",e),v.value=[],$e.warning("获取专业列表失败，请刷新页面重试"),Promise.resolve([])))),(console.log("开始获取院系列表..."),Al().then(e=>(console.log("院系列表获取成功:",e.data),Array.isArray(e.data)?b.value=e.data:(console.warn("院系列表数据格式不正确:",e.data),b.value=[],$e.warning("院系列表数据格式不正确")),Promise.resolve(e.data))).catch(e=>(console.error("获取院系列表失败:",e),b.value=[],$e.warning("获取院系列表失败，请刷新页面重试"),Promise.resolve([]))))]).then(()=>{console.log("所有基础数据加载完成"),w()}).catch(e=>{console.error("加载基础数据时出错:",e),w()})});const C=()=>i(this,null,function*(){n.value&&(0!==f.value.length?(null!==u.classId&&(u.classId=Number(u.classId)),null!==u.gender&&(u.gender=Number(u.gender)),null!==u.status&&(u.status=Number(u.status)),yield n.value.validate((e,a)=>i(this,null,function*(){var l,n,r;if(e)try{d.value=!0,console.log("表单数据:",u);const e=yield(r=u,qt({url:"/student",method:"put",data:r}));console.log("更新学生成功:",e),$e.success("学生信息更新成功"),t.push("/student-list")}catch(s){console.error("更新学生失败:",s),$e.error((null==(n=null==(l=s.response)?void 0:l.data)?void 0:n.message)||"更新学生失败")}finally{d.value=!1}else{console.error("表单验证失败:",JSON.stringify(a,null,2));const e=Object.keys(a);console.log("验证失败的字段:",e);const t=["studentNo","name","gender","classId","admissionDate","graduationDate","idCard","birthday","address","status"],l=["email","phone"];e.some(e=>t.includes(e))?(o.value="basic",console.log("切换到基本信息标签页")):e.some(e=>l.includes(e))&&(o.value="account",console.log("切换到账号信息标签页"));let n="表单填写有误，请检查以下字段：";for(const o in a)a[o]&&a[o][0]&&a[o][0].message&&(n+=`\n- ${a[o][0].message}`);$e.error(n),d.value=!1}}))):$e.warning("班级数据未加载，无法提交表单。请刷新页面重试"))}),E=()=>{t.go(-1)};return(e,t)=>{const a=Re,l=it,s=tt,i=at,c=lt,v=yt,g=Ge,_=ot,b=rt,y=wt,w=st,O=Vt,$=xt,A=ut,R=Qe,L=_t;return h(),V("div",Er,[k(R,{class:"box-card"},{header:I(()=>[x("div",Dr,[t[14]||(t[14]=x("span",null,"编辑学生",-1)),t[15]||(t[15]=D()),k(l,{onClick:E,link:""},{default:I(()=>[k(a,null,{default:I(()=>[k(S(ie))]),_:1}),t[13]||(t[13]=D("返回\n          "))]),_:1})])]),default:I(()=>[t[38]||(t[38]=D()),M((h(),p(A,{ref_key:"studentFormRef",ref:n,model:u,rules:m,"label-width":"100px",class:"student-form"},{default:I(()=>[k($,{modelValue:o.value,"onUpdate:modelValue":t[12]||(t[12]=e=>o.value=e)},{default:I(()=>[k(O,{label:"基本信息",name:"basic"},{default:I(()=>[k(w,{gutter:20},{default:I(()=>[k(c,{span:12},{default:I(()=>[k(i,{label:"学号",prop:"studentNo"},{default:I(()=>[k(s,{modelValue:u.studentNo,"onUpdate:modelValue":t[0]||(t[0]=e=>u.studentNo=e),placeholder:"请输入学号",disabled:""},null,8,["modelValue"])]),_:1})]),_:1}),t[23]||(t[23]=D()),k(c,{span:12},{default:I(()=>[k(i,{label:"姓名",prop:"name"},{default:I(()=>[k(s,{modelValue:u.name,"onUpdate:modelValue":t[1]||(t[1]=e=>u.name=e),placeholder:"请输入姓名"},null,8,["modelValue"])]),_:1})]),_:1}),t[24]||(t[24]=D()),k(c,{span:12},{default:I(()=>[k(i,{label:"性别",prop:"gender"},{default:I(()=>[k(g,{modelValue:u.gender,"onUpdate:modelValue":t[2]||(t[2]=e=>u.gender=e)},{default:I(()=>[k(v,{label:0},{default:I(()=>t[16]||(t[16]=[D("男")])),_:1}),t[18]||(t[18]=D()),k(v,{label:1},{default:I(()=>t[17]||(t[17]=[D("女")])),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),t[25]||(t[25]=D()),k(c,{span:12},{default:I(()=>[k(i,{label:"班级",prop:"classId"},{default:I(()=>[k(b,{modelValue:u.classId,"onUpdate:modelValue":t[3]||(t[3]=e=>u.classId=e),placeholder:"请选择班级",style:{width:"100%"}},{empty:I(()=>[x("div",Pr,[0===f.value.length?(h(),V("span",Tr,"暂无班级数据")):(h(),V("span",Or,"加载班级数据中..."))])]),default:I(()=>[(h(!0),V(P,null,T(f.value,e=>(h(),p(_,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128)),t[19]||(t[19]=D())]),_:1},8,["modelValue"])]),_:1})]),_:1}),t[26]||(t[26]=D()),k(c,{span:12},{default:I(()=>[k(i,{label:"入学日期",prop:"admissionDate"},{default:I(()=>[k(y,{modelValue:u.admissionDate,"onUpdate:modelValue":t[4]||(t[4]=e=>u.admissionDate=e),type:"date",placeholder:"选择入学日期","value-format":"YYYY-MM-DD",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),t[27]||(t[27]=D()),k(c,{span:12},{default:I(()=>[k(i,{label:"预计毕业",prop:"graduationDate"},{default:I(()=>[k(y,{modelValue:u.graduationDate,"onUpdate:modelValue":t[5]||(t[5]=e=>u.graduationDate=e),type:"date",placeholder:"选择毕业日期","value-format":"YYYY-MM-DD",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),t[28]||(t[28]=D()),k(c,{span:12},{default:I(()=>[k(i,{label:"身份证号",prop:"idCard"},{default:I(()=>[k(s,{modelValue:u.idCard,"onUpdate:modelValue":t[6]||(t[6]=e=>u.idCard=e),placeholder:"请输入身份证号"},null,8,["modelValue"])]),_:1})]),_:1}),t[29]||(t[29]=D()),k(c,{span:12},{default:I(()=>[k(i,{label:"出生日期",prop:"birthday"},{default:I(()=>[k(y,{modelValue:u.birthday,"onUpdate:modelValue":t[7]||(t[7]=e=>u.birthday=e),type:"date",placeholder:"选择出生日期","value-format":"YYYY-MM-DD",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),t[30]||(t[30]=D()),k(c,{span:24},{default:I(()=>[k(i,{label:"家庭住址",prop:"address"},{default:I(()=>[k(s,{modelValue:u.address,"onUpdate:modelValue":t[8]||(t[8]=e=>u.address=e),placeholder:"请输入家庭住址"},null,8,["modelValue"])]),_:1})]),_:1}),t[31]||(t[31]=D()),k(c,{span:12},{default:I(()=>[k(i,{label:"状态",prop:"status"},{default:I(()=>[k(b,{modelValue:u.status,"onUpdate:modelValue":t[9]||(t[9]=e=>u.status=e),placeholder:"请选择状态",style:{width:"100%"}},{default:I(()=>[k(_,{label:"在读",value:0}),t[20]||(t[20]=D()),k(_,{label:"毕业",value:1}),t[21]||(t[21]=D()),k(_,{label:"休学",value:2}),t[22]||(t[22]=D()),k(_,{label:"退学",value:3})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),t[33]||(t[33]=D()),k(O,{label:"账号信息",name:"account"},{default:I(()=>[k(w,{gutter:20},{default:I(()=>[k(c,{span:12},{default:I(()=>[k(i,{label:"邮箱",prop:"email"},{default:I(()=>[k(s,{modelValue:u.email,"onUpdate:modelValue":t[10]||(t[10]=e=>u.email=e),placeholder:"请输入邮箱"},null,8,["modelValue"])]),_:1})]),_:1}),t[32]||(t[32]=D()),k(c,{span:12},{default:I(()=>[k(i,{label:"手机号码",prop:"phone"},{default:I(()=>[k(s,{modelValue:u.phone,"onUpdate:modelValue":t[11]||(t[11]=e=>u.phone=e),placeholder:"请输入手机号码"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t[37]||(t[37]=D()),x("div",$r,[k(l,{onClick:E},{default:I(()=>t[34]||(t[34]=[D("取消")])),_:1}),t[36]||(t[36]=D()),k(l,{type:"primary",onClick:C,loading:d.value},{default:I(()=>t[35]||(t[35]=[D("提交")])),_:1},8,["loading"])])]),_:1},8,["model"])),[[L,r.value]])]),_:1})])}}},[["__scopeId","data-v-b76c62ee"]]),Rr=Object.freeze(Object.defineProperty({__proto__:null,default:Ar},Symbol.toStringTag,{value:"Module"})),Lr={dashboard:No,"dashboard/index":No,"course/add":jl,"course/add.vue":jl,"course/index":Fl,"course/index.vue":Fl,"course/list":Fl,"/course/list":Fl,"./course/list":Fl,"teacher/add":Zn,"teacher/add.vue":Zn,"teacher/add/index":Zn,"teacher/index":so,"teacher/index.vue":so,"teacher/list":so,"student/add":nn,"student/add.vue":nn,"student/index":$n,"student/index.vue":$n,"student/edit":Ar,"student/edit.vue":Ar,"student/edit/:id":Ar,"attendance/record/index":pr,"attendance/record":pr,"grade/input":Ir,"grade/input/index":Ir};const Sr=Q(Ut);for(const[Ur,zr]of Object.entries(be))Sr.component(Ur,zr);const jr=ee();var Nr;jr.use(Lt),Sr.use(jr),Sr.use(el),Sr.use(Ot,{locale:{name:"zh-cn",el:{breadcrumb:{label:"面包屑"},colorpicker:{confirm:"确定",clear:"清空",defaultLabel:"颜色选择器",description:"当前颜色 {color}，按 Enter 键选择新颜色",alphaLabel:"选择透明度的值"},datepicker:{now:"此刻",today:"今天",cancel:"取消",clear:"清空",confirm:"确定",dateTablePrompt:"使用方向键与 Enter 键可选择日期",monthTablePrompt:"使用方向键与 Enter 键可选择月份",yearTablePrompt:"使用方向键与 Enter 键可选择年份",selectedDate:"已选日期",selectDate:"选择日期",selectTime:"选择时间",startDate:"开始日期",startTime:"开始时间",endDate:"结束日期",endTime:"结束时间",prevYear:"前一年",nextYear:"后一年",prevMonth:"上个月",nextMonth:"下个月",year:"年",month1:"1 月",month2:"2 月",month3:"3 月",month4:"4 月",month5:"5 月",month6:"6 月",month7:"7 月",month8:"8 月",month9:"9 月",month10:"10 月",month11:"11 月",month12:"12 月",weeks:{sun:"日",mon:"一",tue:"二",wed:"三",thu:"四",fri:"五",sat:"六"},weeksFull:{sun:"星期日",mon:"星期一",tue:"星期二",wed:"星期三",thu:"星期四",fri:"星期五",sat:"星期六"},months:{jan:"一月",feb:"二月",mar:"三月",apr:"四月",may:"五月",jun:"六月",jul:"七月",aug:"八月",sep:"九月",oct:"十月",nov:"十一月",dec:"十二月"}},inputNumber:{decrease:"减少数值",increase:"增加数值"},select:{loading:"加载中",noMatch:"无匹配数据",noData:"无数据",placeholder:"请选择"},dropdown:{toggleDropdown:"切换下拉选项"},mention:{loading:"加载中"},cascader:{noMatch:"无匹配数据",loading:"加载中",placeholder:"请选择",noData:"暂无数据"},pagination:{goto:"前往",pagesize:"条/页",total:"共 {total} 条",pageClassifier:"页",page:"页",prev:"上一页",next:"下一页",currentPage:"第 {pager} 页",prevPages:"向前 {pager} 页",nextPages:"向后 {pager} 页",deprecationWarning:"你使用了一些已被废弃的用法，请参考 el-pagination 的官方文档"},dialog:{close:"关闭此对话框"},drawer:{close:"关闭此对话框"},messagebox:{title:"提示",confirm:"确定",cancel:"取消",error:"输入的数据不合法!",close:"关闭此对话框"},upload:{deleteTip:"按 Delete 键可删除",delete:"删除",preview:"查看图片",continue:"继续上传"},slider:{defaultLabel:"滑块介于 {min} 至 {max}",defaultRangeStartLabel:"选择起始值",defaultRangeEndLabel:"选择结束值"},table:{emptyText:"暂无数据",confirmFilter:"筛选",resetFilter:"重置",clearFilter:"全部",sumText:"合计"},tour:{next:"下一步",previous:"上一步",finish:"结束导览"},tree:{emptyText:"暂无数据"},transfer:{noMatch:"无匹配数据",noData:"无数据",titles:["列表 1","列表 2"],filterPlaceholder:"请输入搜索内容",noCheckedFormat:"共 {total} 项",hasCheckedFormat:"已选 {checked}/{total} 项"},image:{error:"加载失败"},pageHeader:{title:"返回"},popconfirm:{confirmButtonText:"确定",cancelButtonText:"取消"},carousel:{leftArrow:"上一张幻灯片",rightArrow:"下一张幻灯片",indicator:"幻灯片切换至索引 {index}"}}},size:"default"}),Sr.use(hl),Nr=Sr,Object.entries(zo).forEach(([e,t])=>{Nr.component(`Global${e.replace(/\//g,"")}`,t)}),console.log("全局组件注册完成"),window.__app_loadComponent=ra,Sr.config.errorHandler=(e,t,a)=>{if(console.error("全局错误捕获:"),console.error("错误信息:",e),console.error("错误位置:",a),e.message&&e.message.includes("Failed to fetch dynamically imported module")){console.error("组件动态导入失败，路径可能不正确:",e.message);const t=e.message.match(/http:\/\/.*\/src\/views\/(.+)\?import/);if(t&&t[1]){const e=t[1];console.error(`问题组件路径: ${e}`);const a=["student/add/index.vue","course/add/index.vue","teacher/add/index.vue"];console.log(`如果这是${a.join("或")}，请检查全局组件注册或使用特殊处理`);const n=e.replace(/\.vue$/,""),o=function(e){if(!e)return null;const t=e.replace(/\.vue$/,"");return"dashboard"===t||"dashboard/index"===t?(console.log(`全局组件查找 - 特殊处理: ${t}`),zo.dashboard||null):t.includes("course/add")?(console.log(`全局组件查找 - 特殊处理: ${t}`),zo["course/add"]||null):t.includes("student/add")?(console.log(`全局组件查找 - 特殊处理: ${t}`),zo["student/add"]||null):t.includes("teacher/add")?(console.log(`全局组件查找 - 特殊处理: ${t}`),zo["teacher/add"]||null):zo[t]||null}(n);o&&console.log(`找到全局组件注册: ${n}`);const r=function(e){if(!e)return null;const t=e.replace(/\.vue$/,"").replace(/^\//,"");if(console.log(`[手动映射] 请求路径: ${e}, 标准化路径: ${t}`),"dashboard"===t||"dashboard/index"===t)return console.log("[手动映射] 特殊处理 dashboard 路径"),Lr.dashboard||null;if("teacher/add/index"===t||"teacher/add"===t)return console.log("[手动映射] 特殊处理 teacher/add 路径"),Lr["teacher/add"]||null;if("course/list"===t)return console.log("[手动映射] 特殊处理 course/list 路径"),Lr["course/list"]||Lr["course/index"]||null;if(t.startsWith("student/edit/"))return console.log("[手动映射] 特殊处理 student/edit 路径"),Lr["student/edit"]||null;const a=[t,t.replace(/^\//,""),t+".vue",t+"/index"];for(const l of a)if(Lr[l])return console.log(`[手动映射] 找到匹配路径: ${l}`),Lr[l];return console.log(`[手动映射] 未找到匹配组件: ${e}`),null}(n);r&&console.log(`找到手动映射组件: ${n}`),console.log("尝试使用统一加载器重新加载...");const s=n.replace(/\/index$/,"");try{ra(s);console.log("统一加载器创建成功，可在路由配置中使用")}catch(l){console.error("统一加载器创建失败:",l)}}}},el.beforeEach((e,t,a)=>{console.log("===全局路由守卫==="),console.log("从:",t.path),console.log("到:",e.path),console.log("完整路由信息:",e);try{a()}catch(l){console.error("路由守卫错误:",l),a(!1)}}),Sr.mount("#app");export{Yt as A,ua as B,ca as C,ea as D,Qt as E,Kt as F,Ft as G,Wt as H,Jt as I,Zt as J,Xt as K,Ht as L,Gt as M,Rn as N,Sn as O,ha as _,Xl as a,wl as b,fl as c,yl as d,qn as e,Vl as f,bl as g,xl as h,Cl as i,kl as j,Il as k,El as l,Un as m,zn as n,Mn as o,Dl as p,Pl as q,Ol as r,qt as s,Tl as t,pa as u,$l as v,Al as w,vr as x,hr as y,fr as z};
