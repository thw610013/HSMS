var e=(e,a,l)=>new Promise((d,t)=>{var u=e=>{try{r(l.next(e))}catch(a){t(a)}},o=e=>{try{r(l.throw(e))}catch(a){t(a)}},r=e=>e.done?d(e.value):Promise.resolve(e.value).then(u,o);r((l=l.apply(e,a)).next())});import{_ as a,N as l,w as d,O as t}from"./index-c00447c9.js";import{r as u,X as o,k as r,z as s,P as n,H as p,ax as m,ay as c,y as i,A as f,L as _,I as h,G as b,O as V,a4 as v}from"./vue-core-ad22061d.js";import{E as g,u as y,F as U,w as x,x as D,y as Y,Q as k,p as I,A as j,B as w,C as N,S,R as C,T as M,G as O,O as q}from"./element-plus-7067fc91.js";import"./icons-3f8828dd.js";import"./utils-ebe9136b.js";const P={class:"teacher-edit-container"},A={class:"card-header"},F={class:"operations"},G={class:"form-footer"},R=a({__name:"edit",setup(a){const R=m(),z=c(),B=R.params.id,E=u(!1),H=u("basic"),L=u(),Q=u([]),T=o({id:"",teacherNo:"",name:"",gender:0,departmentId:"",title:"",status:0,phone:"",email:"",address:"",education:"",graduateSchool:"",birthday:"",entryDate:""}),X={name:[{required:!0,message:"请输入姓名",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}],departmentId:[{required:!0,message:"请选择院系",trigger:"change"}],title:[{required:!0,message:"请选择职称",trigger:"change"}],phone:[{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号码",trigger:"blur"}],email:[{type:"email",message:"请输入正确的邮箱地址",trigger:"blur"}]},$=()=>e(this,null,function*(){try{E.value=!0;const e=yield l(B);200===e.code?Object.assign(T,e.data):g.error(e.msg||"获取教师详情失败"),E.value=!1}catch(e){g.error("获取教师详情失败"),E.value=!1}}),J=()=>e(this,null,function*(){try{const e=yield d();Q.value=e.data}catch(e){g.error("获取院系列表失败")}}),K=()=>{L.value.validate(a=>e(this,null,function*(){if(a)try{E.value=!0;const e=yield t(T);200===e.code?(g.success("修改成功"),W()):g.error(e.msg||"修改失败"),E.value=!1}catch(e){g.error("提交数据失败"),E.value=!1}}))},W=()=>{z.back()};return r(()=>{$(),J()}),(e,a)=>{const l=U,d=x,t=D,u=Y,o=k,r=I,m=j,c=w,g=N,R=S,z=C,B=M,$=O,J=y,Z=q;return i(),s("div",P,[n(J,{class:"box-card",shadow:"hover"},{header:p(()=>[f("div",A,[a[15]||(a[15]=f("span",null,"编辑教师",-1)),a[16]||(a[16]=_()),f("div",F,[n(l,{type:"primary",onClick:W},{default:p(()=>a[14]||(a[14]=[_("返回")])),_:1})])])]),default:p(()=>[a[43]||(a[43]=_()),h((i(),b($,{ref_key:"teacherFormRef",ref:L,model:T,rules:X,"label-width":"100px"},{default:p(()=>[n(B,{modelValue:H.value,"onUpdate:modelValue":a[13]||(a[13]=e=>H.value=e)},{default:p(()=>[n(R,{label:"基本信息",name:"basic"},{default:p(()=>[n(g,{gutter:24},{default:p(()=>[n(u,{span:12},{default:p(()=>[n(t,{label:"教师编号",prop:"teacherNo"},{default:p(()=>[n(d,{modelValue:T.teacherNo,"onUpdate:modelValue":a[0]||(a[0]=e=>T.teacherNo=e),placeholder:"请输入教师编号",disabled:""},null,8,["modelValue"])]),_:1})]),_:1}),a[25]||(a[25]=_()),n(u,{span:12},{default:p(()=>[n(t,{label:"姓名",prop:"name"},{default:p(()=>[n(d,{modelValue:T.name,"onUpdate:modelValue":a[1]||(a[1]=e=>T.name=e),placeholder:"请输入姓名"},null,8,["modelValue"])]),_:1})]),_:1}),a[26]||(a[26]=_()),n(u,{span:12},{default:p(()=>[n(t,{label:"性别",prop:"gender"},{default:p(()=>[n(r,{modelValue:T.gender,"onUpdate:modelValue":a[2]||(a[2]=e=>T.gender=e)},{default:p(()=>[n(o,{label:0},{default:p(()=>a[17]||(a[17]=[_("男")])),_:1}),a[19]||(a[19]=_()),n(o,{label:1},{default:p(()=>a[18]||(a[18]=[_("女")])),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),a[27]||(a[27]=_()),n(u,{span:12},{default:p(()=>[n(t,{label:"院系",prop:"departmentId"},{default:p(()=>[n(c,{modelValue:T.departmentId,"onUpdate:modelValue":a[3]||(a[3]=e=>T.departmentId=e),placeholder:"请选择院系"},{default:p(()=>[(i(!0),s(V,null,v(Q.value,e=>(i(),b(m,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),a[28]||(a[28]=_()),n(u,{span:12},{default:p(()=>[n(t,{label:"职称",prop:"title"},{default:p(()=>[n(c,{modelValue:T.title,"onUpdate:modelValue":a[4]||(a[4]=e=>T.title=e),placeholder:"请选择职称"},{default:p(()=>[n(m,{label:"教授",value:"教授"}),a[20]||(a[20]=_()),n(m,{label:"副教授",value:"副教授"}),a[21]||(a[21]=_()),n(m,{label:"讲师",value:"讲师"}),a[22]||(a[22]=_()),n(m,{label:"助教",value:"助教"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),a[29]||(a[29]=_()),n(u,{span:12},{default:p(()=>[n(t,{label:"状态",prop:"status"},{default:p(()=>[n(c,{modelValue:T.status,"onUpdate:modelValue":a[5]||(a[5]=e=>T.status=e),placeholder:"请选择状态"},{default:p(()=>[n(m,{label:"在职",value:0}),a[23]||(a[23]=_()),n(m,{label:"离职",value:1}),a[24]||(a[24]=_()),n(m,{label:"退休",value:2})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),a[37]||(a[37]=_()),n(R,{label:"联系信息",name:"contact"},{default:p(()=>[n(g,{gutter:24},{default:p(()=>[n(u,{span:12},{default:p(()=>[n(t,{label:"手机号码",prop:"phone"},{default:p(()=>[n(d,{modelValue:T.phone,"onUpdate:modelValue":a[6]||(a[6]=e=>T.phone=e),placeholder:"请输入手机号码"},null,8,["modelValue"])]),_:1})]),_:1}),a[30]||(a[30]=_()),n(u,{span:12},{default:p(()=>[n(t,{label:"邮箱",prop:"email"},{default:p(()=>[n(d,{modelValue:T.email,"onUpdate:modelValue":a[7]||(a[7]=e=>T.email=e),placeholder:"请输入邮箱"},null,8,["modelValue"])]),_:1})]),_:1}),a[31]||(a[31]=_()),n(u,{span:12},{default:p(()=>[n(t,{label:"地址",prop:"address"},{default:p(()=>[n(d,{modelValue:T.address,"onUpdate:modelValue":a[8]||(a[8]=e=>T.address=e),placeholder:"请输入地址"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),a[38]||(a[38]=_()),n(R,{label:"教育背景",name:"education"},{default:p(()=>[n(g,{gutter:24},{default:p(()=>[n(u,{span:12},{default:p(()=>[n(t,{label:"学历",prop:"education"},{default:p(()=>[n(c,{modelValue:T.education,"onUpdate:modelValue":a[9]||(a[9]=e=>T.education=e),placeholder:"请选择学历"},{default:p(()=>[n(m,{label:"博士",value:"博士"}),a[32]||(a[32]=_()),n(m,{label:"硕士",value:"硕士"}),a[33]||(a[33]=_()),n(m,{label:"本科",value:"本科"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),a[34]||(a[34]=_()),n(u,{span:12},{default:p(()=>[n(t,{label:"毕业院校",prop:"graduateSchool"},{default:p(()=>[n(d,{modelValue:T.graduateSchool,"onUpdate:modelValue":a[10]||(a[10]=e=>T.graduateSchool=e),placeholder:"请输入毕业院校"},null,8,["modelValue"])]),_:1})]),_:1}),a[35]||(a[35]=_()),n(u,{span:12},{default:p(()=>[n(t,{label:"出生日期",prop:"birthday"},{default:p(()=>[n(z,{modelValue:T.birthday,"onUpdate:modelValue":a[11]||(a[11]=e=>T.birthday=e),type:"date",placeholder:"请选择出生日期","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1})]),_:1}),a[36]||(a[36]=_()),n(u,{span:12},{default:p(()=>[n(t,{label:"入职日期",prop:"entryDate"},{default:p(()=>[n(z,{modelValue:T.entryDate,"onUpdate:modelValue":a[12]||(a[12]=e=>T.entryDate=e),type:"date",placeholder:"请选择入职日期","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),a[42]||(a[42]=_()),f("div",G,[n(l,{type:"primary",onClick:K},{default:p(()=>a[39]||(a[39]=[_("确 定")])),_:1}),a[41]||(a[41]=_()),n(l,{onClick:W},{default:p(()=>a[40]||(a[40]=[_("取 消")])),_:1})])]),_:1},8,["model"])),[[Z,E.value]])]),_:1})])}}},[["__scopeId","data-v-dca84470"]]);export{R as default};
