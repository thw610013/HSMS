import{s as e,_ as l}from"./index-c00447c9.js";import{r as a,X as t,ad as u,k as s,z as o,P as n,H as i,L as d,ag as r,aq as p,y as c,A as m,u as v,a5 as f,O as y,a4 as h,I as g,G as b,M as _,K as w}from"./vue-core-ad22061d.js";import{u as V,H as k,E as x,a as C,w as z,x as U,B as T,b as N,F as S,G as q,J as B,K as $,L as j,M as P,p as F,O as K,A,Q as G}from"./element-plus-7067fc91.js";import"./icons-3f8828dd.js";import"./utils-ebe9136b.js";function H(l){return e({url:`/notice/${l}`,method:"get"})}const I={class:"app-container"},L={class:"card-header"},M={class:"right-container"},O={class:"dialog-footer"},R={class:"notice-detail"},E={class:"notice-title"},J={class:"notice-info"},Q={class:"notice-content"},X=l({__name:"index",setup(l){const X=[{label:"普通公告",value:0},{label:"重要公告",value:1},{label:"紧急公告",value:2}],D=[{label:"草稿",value:0},{label:"已发布",value:1},{label:"已下线",value:2}],W=a(),Y=a(!1),Z=a(!1),ee=a(!1),le=a(""),ae=a([]),te=a(0),ue=e=>({0:"普通公告",1:"重要公告",2:"紧急公告"}[e]||""),se=e=>({0:"草稿",1:"已发布",2:"已下线"}[e]||""),oe=t({queryParams:{pageNum:1,pageSize:10,title:void 0,type:void 0,status:void 0},form:{id:void 0,title:"",type:0,status:0,content:""},viewForm:{id:void 0,title:"",type:0,status:0,content:"",publisherName:"",publishTime:""},rules:{title:[{required:!0,message:"公告标题不能为空",trigger:"blur"},{max:100,message:"公告标题长度不能超过100个字符",trigger:"blur"}],type:[{required:!0,message:"公告类型不能为空",trigger:"change"}],content:[{required:!0,message:"公告内容不能为空",trigger:"blur"}]}}),{queryParams:ne,form:ie,viewForm:de,rules:re}=u(oe),pe=()=>{var l;Y.value=!0,(l=ne.value,e({url:"/notice/list",method:"get",params:l})).then(e=>{ae.value=e.data||[],te.value=e.total||0,Y.value=!1}).catch(()=>{Y.value=!1})},ce=()=>{ne.value={pageNum:1,pageSize:10,title:void 0,type:void 0,status:void 0},me()},me=()=>{ne.value.pageNum=1,pe()},ve=e=>{ne.value.pageSize=e,pe()},fe=e=>{ne.value.pageNum=e,pe()},ye=()=>{var e;null==(e=W.value)||e.resetFields(),ie.value={id:void 0,title:"",type:0,status:0,content:""}},he=()=>{Z.value=!1,ye()},ge=()=>{ye(),le.value="添加公告",Z.value=!0},be=()=>{var l;null==(l=W.value)||l.validate(l=>{l&&(ie.value.id?function(l){return e({url:"/notice",method:"put",data:l})}(ie.value).then(e=>{x.success("修改成功"),Z.value=!1,pe()}):function(l){return e({url:"/notice",method:"post",data:l})}(ie.value).then(e=>{x.success("新增成功"),Z.value=!1,pe()}))})},_e=l=>{C.confirm(`是否确认删除标题为"${l.title}"的公告?`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{var a;(a=l.id,e({url:`/notice/${a}`,method:"delete"})).then(()=>{x.success("删除成功"),pe()})}).catch(()=>{})},we=l=>{C.confirm(`是否确认发布标题为"${l.title}"的公告?`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{var a;(a=l.id,e({url:`/notice/publish/${a}`,method:"put"})).then(()=>{x.success("发布成功"),pe()})}).catch(()=>{})},Ve=l=>{C.confirm(`是否确认下线标题为"${l.title}"的公告?`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{var a;(a=l.id,e({url:`/notice/offline/${a}`,method:"put"})).then(()=>{x.success("下线成功"),pe()})}).catch(()=>{})};return s(()=>{pe()}),(e,l)=>{const a=z,t=U,u=A,s=T,x=r("Search"),C=N,oe=S,pe=r("Refresh"),ke=q,xe=r("Plus"),Ce=B,ze=$,Ue=j,Te=P,Ne=V,Se=G,qe=F,Be=k,$e=p("hasPermi"),je=K;return c(),o("div",I,[n(Ne,null,{header:i(()=>[m("div",L,[l[19]||(l[19]=m("span",{class:"card-title"},"公告管理",-1)),l[20]||(l[20]=d()),m("div",M,[n(ke,{inline:!0,model:v(ne),class:"search-form"},{default:i(()=>[n(t,{label:"标题"},{default:i(()=>[n(a,{modelValue:v(ne).title,"onUpdate:modelValue":l[0]||(l[0]=e=>v(ne).title=e),placeholder:"请输入公告标题",clearable:"",onKeyup:f(me,["enter"])},null,8,["modelValue"])]),_:1}),l[14]||(l[14]=d()),n(t,{label:"类型"},{default:i(()=>[n(s,{modelValue:v(ne).type,"onUpdate:modelValue":l[1]||(l[1]=e=>v(ne).type=e),placeholder:"公告类型",clearable:""},{default:i(()=>[(c(),o(y,null,h(X,e=>n(u,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),l[15]||(l[15]=d()),n(t,{label:"状态"},{default:i(()=>[n(s,{modelValue:v(ne).status,"onUpdate:modelValue":l[2]||(l[2]=e=>v(ne).status=e),placeholder:"公告状态",clearable:""},{default:i(()=>[(c(),o(y,null,h(D,e=>n(u,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),l[16]||(l[16]=d()),n(t,null,{default:i(()=>[n(oe,{type:"primary",onClick:me},{default:i(()=>[n(C,null,{default:i(()=>[n(x)]),_:1}),l[11]||(l[11]=d(" 搜索\n                "))]),_:1}),l[13]||(l[13]=d()),n(oe,{onClick:ce},{default:i(()=>[n(C,null,{default:i(()=>[n(pe)]),_:1}),l[12]||(l[12]=d(" 重置\n                "))]),_:1})]),_:1})]),_:1},8,["model"]),l[18]||(l[18]=d()),g((c(),b(oe,{type:"primary",plain:"",onClick:ge},{default:i(()=>[n(C,null,{default:i(()=>[n(xe)]),_:1}),l[17]||(l[17]=d(" 新增\n            "))]),_:1})),[[$e,["system:notice:add"]]])])])]),default:i(()=>[l[37]||(l[37]=d()),g((c(),b(Ue,{data:ae.value,border:"",stripe:""},{default:i(()=>[n(Ce,{type:"selection",width:"55",align:"center"}),l[30]||(l[30]=d()),n(Ce,{label:"序号",width:"55",align:"center",type:"index"}),l[31]||(l[31]=d()),n(Ce,{label:"标题",prop:"title","show-overflow-tooltip":!0}),l[32]||(l[32]=d()),n(Ce,{label:"类型",prop:"type",width:"100",align:"center"},{default:i(e=>[n(ze,{type:0===e.row.type?"info":1===e.row.type?"warning":"danger"},{default:i(()=>[d(_(ue(e.row.type)),1)]),_:2},1032,["type"])]),_:1}),l[33]||(l[33]=d()),n(Ce,{label:"状态",prop:"status",width:"100",align:"center"},{default:i(e=>[n(ze,{type:0===e.row.status?"info":1===e.row.status?"success":""},{default:i(()=>[d(_(se(e.row.status)),1)]),_:2},1032,["type"])]),_:1}),l[34]||(l[34]=d()),n(Ce,{label:"发布人",prop:"publisherName",width:"100",align:"center"}),l[35]||(l[35]=d()),n(Ce,{label:"发布时间",prop:"publishTime",width:"160",align:"center"},{default:i(e=>[m("span",null,_(e.row.publishTime||"-"),1)]),_:1}),l[36]||(l[36]=d()),n(Ce,{label:"操作",align:"center",width:"200"},{default:i(e=>[g((c(),b(oe,{size:"small",type:"primary",text:"",onClick:l=>{H(e.row.id).then(e=>{de.value=e.data,ee.value=!0})}},{default:i(()=>l[21]||(l[21]=[d("查看")])),_:2},1032,["onClick"])),[[$e,["system:notice:query"]]]),l[26]||(l[26]=d()),1!==e.row.status?g((c(),b(oe,{key:0,size:"small",type:"success",text:"",onClick:l=>{return a=e.row,ye(),void H(a.id).then(e=>{ie.value=e.data,le.value="修改公告",Z.value=!0});var a}},{default:i(()=>l[22]||(l[22]=[d("修改")])),_:2},1032,["onClick"])),[[$e,["system:notice:edit"]]]):w("",!0),l[27]||(l[27]=d()),0===e.row.status?g((c(),b(oe,{key:1,size:"small",type:"success",text:"",onClick:l=>we(e.row)},{default:i(()=>l[23]||(l[23]=[d("发布")])),_:2},1032,["onClick"])),[[$e,["system:notice:edit"]]]):w("",!0),l[28]||(l[28]=d()),1===e.row.status?g((c(),b(oe,{key:2,size:"small",type:"warning",text:"",onClick:l=>Ve(e.row)},{default:i(()=>l[24]||(l[24]=[d("下线")])),_:2},1032,["onClick"])),[[$e,["system:notice:edit"]]]):w("",!0),l[29]||(l[29]=d()),g((c(),b(oe,{size:"small",type:"danger",text:"",onClick:l=>_e(e.row)},{default:i(()=>l[25]||(l[25]=[d("删除")])),_:2},1032,["onClick"])),[[$e,["system:notice:remove"]]])]),_:1})]),_:1},8,["data"])),[[je,Y.value]]),l[38]||(l[38]=d()),n(Te,{"current-page":v(ne).pageNum,"onUpdate:currentPage":l[3]||(l[3]=e=>v(ne).pageNum=e),"page-size":v(ne).pageSize,"onUpdate:pageSize":l[4]||(l[4]=e=>v(ne).pageSize=e),"page-sizes":[10,20,50,100],total:te.value,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:ve,onCurrentChange:fe},null,8,["current-page","page-size","total"])]),_:1}),l[51]||(l[51]=d()),n(Be,{title:le.value,modelValue:Z.value,"onUpdate:modelValue":l[9]||(l[9]=e=>Z.value=e),width:"60%","append-to-body":"","close-on-click-modal":!1},{footer:i(()=>[m("div",O,[n(oe,{type:"primary",onClick:be},{default:i(()=>l[42]||(l[42]=[d("确 定")])),_:1}),l[44]||(l[44]=d()),n(oe,{onClick:he},{default:i(()=>l[43]||(l[43]=[d("取 消")])),_:1})])]),default:i(()=>[n(ke,{ref_key:"noticeFormRef",ref:W,model:v(ie),rules:v(re),"label-width":"100px"},{default:i(()=>[n(t,{label:"公告标题",prop:"title"},{default:i(()=>[n(a,{modelValue:v(ie).title,"onUpdate:modelValue":l[5]||(l[5]=e=>v(ie).title=e),placeholder:"请输入公告标题"},null,8,["modelValue"])]),_:1}),l[39]||(l[39]=d()),n(t,{label:"公告类型",prop:"type"},{default:i(()=>[n(s,{modelValue:v(ie).type,"onUpdate:modelValue":l[6]||(l[6]=e=>v(ie).type=e),placeholder:"请选择公告类型",style:{width:"100%"}},{default:i(()=>[(c(),o(y,null,h(X,e=>n(u,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),l[40]||(l[40]=d()),n(t,{label:"公告内容",prop:"content"},{default:i(()=>[n(a,{modelValue:v(ie).content,"onUpdate:modelValue":l[7]||(l[7]=e=>v(ie).content=e),type:"textarea",rows:10,placeholder:"请输入公告内容"},null,8,["modelValue"])]),_:1}),l[41]||(l[41]=d()),n(t,{label:"公告状态",prop:"status"},{default:i(()=>[n(qe,{modelValue:v(ie).status,"onUpdate:modelValue":l[8]||(l[8]=e=>v(ie).status=e)},{default:i(()=>[(c(),o(y,null,h(D,e=>n(Se,{key:e.value,label:e.value},{default:i(()=>[d(_(e.label),1)]),_:2},1032,["label"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"]),l[45]||(l[45]=d())]),_:1},8,["title","modelValue"]),l[52]||(l[52]=d()),n(Be,{title:"公告详情",modelValue:ee.value,"onUpdate:modelValue":l[10]||(l[10]=e=>ee.value=e),width:"60%","append-to-body":""},{default:i(()=>[m("div",R,[m("div",E,_(v(de).title),1),l[49]||(l[49]=d()),m("div",J,[m("span",null,"\n            类型："+_(ue(v(de).type)),1),l[46]||(l[46]=d()),m("span",null,"\n            发布人："+_(v(de).publisherName),1),l[47]||(l[47]=d()),m("span",null,"\n            发布时间："+_(v(de).publishTime||"-"),1),l[48]||(l[48]=d()),m("span",null,"\n            状态："+_(se(v(de).status)),1)]),l[50]||(l[50]=d()),m("div",Q,_(v(de).content),1)])]),_:1},8,["modelValue"])])}}},[["__scopeId","data-v-a84b3889"]]);export{X as default};
