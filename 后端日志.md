2025-10-09 19:11:52.576 [http-nio-8080-exec-2] INFO  c.example.student.filter.JwtAuthenticationFilter - 处理请求: PUT /api/teacher/courses/attendance/1
2025-10-09 19:11:52.576 [http-nio-8080-exec-2] INFO  c.example.student.filter.JwtAuthenticationFilter - 找到令牌: eyJhbGciOi...
2025-10-09 19:11:52.577 [http-nio-8080-exec-2] INFO  c.example.student.filter.JwtAuthenticationFilter - 从令牌中提取用户名: teacher001
2025-10-09 19:11:52.577 [http-nio-8080-exec-2] INFO  c.example.student.security.UserDetailsServiceImpl - 加载用户信息: teacher001
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13b1afe1] was not registered for synchronization because synchronization is not active
JDBC Connection [HikariProxyConnection@1120808829 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e2c9e24] will not be managed by Spring
==>  Preparing: SELECT * FROM sys_user WHERE username = ? AND status = 0
==> Parameters: teacher001(String)
<==    Columns: id, username, password, name, avatar, email, phone, status, user_type, create_time, update_time
<==        Row: 3, teacher001, $2a$10$jSsRPHkV3OX5V0g6RkMetO8X/S/gj9rjdsAa0PGczXQLsLeK/ad3u, 张教授1, null, zhang@example.com, 13800138001, 0, 1, 2025-05-15 03:17:12, 2025-05-15 03:19:02
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13b1afe1]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fac1a00] was not registered for synchronization because synchronization is not active
JDBC Connection [HikariProxyConnection@1107060915 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e2c9e24] will not be managed by Spring
==>  Preparing: SELECT DISTINCT m.perms FROM sys_menu m LEFT JOIN sys_role_menu rm ON m.id = rm.menu_id LEFT JOIN sys_user_role ur ON rm.role_id = ur.role_id LEFT JOIN sys_role r ON r.id = ur.role_id WHERE ur.user_id = ? AND m.status = 0 AND r.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
==> Parameters: 3(Long)
<==    Columns: perms
<==        Row: education:department:list
<==        Row: education:student:list
<==        Row: education:teacher:list
<==        Row: course:course:list
<==        Row: course:offering:list
<==        Row: course:selection:list
<==        Row: course:teaching:list
<==        Row: attendance:record:list
<==        Row: attendance:stats:list
<==        Row: grade:input
<==        Row: grade:query
<==        Row: grade:stats
<==        Row: system:notice:list
<==        Row: system:todo:list
<==        Row: system:user:profile
<==        Row: education:department:query
<==        Row: course:course:query
<==        Row: course:selection:query
<==        Row: attendance:record:add
<==        Row: attendance:record:edit
<==        Row: dashboard:basic
<==        Row: dashboard:charts
<==        Row: system:user:profile:query
<==        Row: system:user:profile:edit
<==        Row: system:user:profile:avatar
<==      Total: 25
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fac1a00]
2025-10-09 19:11:52.581 [http-nio-8080-exec-2] INFO  c.example.student.security.UserDetailsServiceImpl - 用户 teacher001 的权限列表: [education:department:list, education:student:list, education:teacher:list, course:course:list, course:offering:list, course:selection:list, course:teaching:list, attendance:record:list, attendance:stats:list, grade:input, grade:query, grade:stats, system:notice:list, system:todo:list, system:user:profile, education:department:query, course:course:query, course:selection:query, attendance:record:add, attendance:record:edit, dashboard:basic, dashboard:charts, system:user:profile:query, system:user:profile:edit, system:user:profile:avatar]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d7ee1a4] was not registered for synchronization because synchronization is not active
JDBC Connection [HikariProxyConnection@851281425 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e2c9e24] will not be managed by Spring
==>  Preparing: SELECT DISTINCT r.role_key FROM sys_role r LEFT JOIN sys_user_role ur ON ur.role_id = r.id WHERE ur.user_id = ? AND r.status = 0
==> Parameters: 3(Long)
<==    Columns: role_key
<==        Row: teacher
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d7ee1a4]
2025-10-09 19:11:52.583 [http-nio-8080-exec-2] INFO  c.example.student.security.UserDetailsServiceImpl - 用户 teacher001 的角色列表: [teacher]
2025-10-09 19:11:52.583 [http-nio-8080-exec-2] DEBUG com.example.student.security.LoginUser - 添加权限: education:department:list
2025-10-09 19:11:52.583 [http-nio-8080-exec-2] DEBUG com.example.student.security.LoginUser - 添加权限: education:student:list
2025-10-09 19:11:52.583 [http-nio-8080-exec-2] DEBUG com.example.student.security.LoginUser - 添加权限: education:teacher:list
2025-10-09 19:11:52.583 [http-nio-8080-exec-2] DEBUG com.example.student.security.LoginUser - 添加权限: course:course:list
2025-10-09 19:11:52.583 [http-nio-8080-exec-2] DEBUG com.example.student.security.LoginUser - 添加权限: course:offering:list
2025-10-09 19:11:52.583 [http-nio-8080-exec-2] DEBUG com.example.student.security.LoginUser - 添加权限: course:selection:list
2025-10-09 19:11:52.583 [http-nio-8080-exec-2] DEBUG com.example.student.security.LoginUser - 添加权限: course:teaching:list
2025-10-09 19:11:52.583 [http-nio-8080-exec-2] DEBUG com.example.student.security.LoginUser - 添加权限: attendance:record:list
2025-10-09 19:11:52.583 [http-nio-8080-exec-2] DEBUG com.example.student.security.LoginUser - 添加权限: attendance:stats:list
2025-10-09 19:11:52.583 [http-nio-8080-exec-2] DEBUG com.example.student.security.LoginUser - 添加权限: grade:input
2025-10-09 19:11:52.583 [http-nio-8080-exec-2] DEBUG com.example.student.security.LoginUser - 添加权限: grade:query
2025-10-09 19:11:52.583 [http-nio-8080-exec-2] DEBUG com.example.student.security.LoginUser - 添加权限: grade:stats
2025-10-09 19:11:52.583 [http-nio-8080-exec-2] DEBUG com.example.student.security.LoginUser - 添加权限: system:notice:list
2025-10-09 19:11:52.583 [http-nio-8080-exec-2] DEBUG com.example.student.security.LoginUser - 添加权限: system:todo:list
2025-10-09 19:11:52.583 [http-nio-8080-exec-2] DEBUG com.example.student.security.LoginUser - 添加权限: system:user:profile
2025-10-09 19:11:52.583 [http-nio-8080-exec-2] DEBUG com.example.student.security.LoginUser - 添加权限: education:department:query
2025-10-09 19:11:52.583 [http-nio-8080-exec-2] DEBUG com.example.student.security.LoginUser - 添加权限: course:course:query
2025-10-09 19:11:52.583 [http-nio-8080-exec-2] DEBUG com.example.student.security.LoginUser - 添加权限: course:selection:query
2025-10-09 19:11:52.583 [http-nio-8080-exec-2] DEBUG com.example.student.security.LoginUser - 添加权限: attendance:record:add
2025-10-09 19:11:52.584 [http-nio-8080-exec-2] DEBUG com.example.student.security.LoginUser - 添加权限: attendance:record:edit
2025-10-09 19:11:52.584 [http-nio-8080-exec-2] DEBUG com.example.student.security.LoginUser - 添加权限: dashboard:basic
2025-10-09 19:11:52.584 [http-nio-8080-exec-2] DEBUG com.example.student.security.LoginUser - 添加权限: dashboard:charts
2025-10-09 19:11:52.584 [http-nio-8080-exec-2] DEBUG com.example.student.security.LoginUser - 添加权限: system:user:profile:query
2025-10-09 19:11:52.584 [http-nio-8080-exec-2] DEBUG com.example.student.security.LoginUser - 添加权限: system:user:profile:edit
2025-10-09 19:11:52.584 [http-nio-8080-exec-2] DEBUG com.example.student.security.LoginUser - 添加权限: system:user:profile:avatar
2025-10-09 19:11:52.584 [http-nio-8080-exec-2] DEBUG com.example.student.security.LoginUser - 添加角色: teacher
2025-10-09 19:11:52.584 [http-nio-8080-exec-2] INFO  com.example.student.security.LoginUser - 用户 teacher001 的权限列表: [education:department:list, education:student:list, education:teacher:list, course:course:list, course:offering:list, course:selection:list, course:teaching:list, attendance:record:list, attendance:stats:list, grade:input, grade:query, grade:stats, system:notice:list, system:todo:list, system:user:profile, education:department:query, course:course:query, course:selection:query, attendance:record:add, attendance:record:edit, dashboard:basic, dashboard:charts, system:user:profile:query, system:user:profile:edit, system:user:profile:avatar, teacher]
2025-10-09 19:11:52.584 [http-nio-8080-exec-2] INFO  c.example.student.filter.JwtAuthenticationFilter - 加载用户详情: teacher001, 权限: education:department:list, education:student:list, education:teacher:list, course:course:list, course:offering:list, course:selection:list, course:teaching:list, attendance:record:list, attendance:stats:list, grade:input, grade:query, grade:stats, system:notice:list, system:todo:list, system:user:profile, education:department:query, course:course:query, course:selection:query, attendance:record:add, attendance:record:edit, dashboard:basic, dashboard:charts, system:user:profile:query, system:user:profile:edit, system:user:profile:avatar, teacher
2025-10-09 19:11:52.587 [http-nio-8080-exec-2] DEBUG com.example.student.security.LoginUser - 添加权限: education:department:list
2025-10-09 19:11:52.587 [http-nio-8080-exec-2] DEBUG com.example.student.security.LoginUser - 添加权限: education:student:list
2025-10-09 19:11:52.587 [http-nio-8080-exec-2] DEBUG com.example.student.security.LoginUser - 添加权限: education:teacher:list
2025-10-09 19:11:52.587 [http-nio-8080-exec-2] DEBUG com.example.student.security.LoginUser - 添加权限: course:course:list
2025-10-09 19:11:52.587 [http-nio-8080-exec-2] DEBUG com.example.student.security.LoginUser - 添加权限: course:offering:list
2025-10-09 19:11:52.587 [http-nio-8080-exec-2] DEBUG com.example.student.security.LoginUser - 添加权限: course:selection:list
2025-10-09 19:11:52.587 [http-nio-8080-exec-2] DEBUG com.example.student.security.LoginUser - 添加权限: course:teaching:list
2025-10-09 19:11:52.587 [http-nio-8080-exec-2] DEBUG com.example.student.security.LoginUser - 添加权限: attendance:record:list
2025-10-09 19:11:52.587 [http-nio-8080-exec-2] DEBUG com.example.student.security.LoginUser - 添加权限: attendance:stats:list
2025-10-09 19:11:52.587 [http-nio-8080-exec-2] DEBUG com.example.student.security.LoginUser - 添加权限: grade:input
2025-10-09 19:11:52.587 [http-nio-8080-exec-2] DEBUG com.example.student.security.LoginUser - 添加权限: grade:query
2025-10-09 19:11:52.587 [http-nio-8080-exec-2] DEBUG com.example.student.security.LoginUser - 添加权限: grade:stats
2025-10-09 19:11:52.587 [http-nio-8080-exec-2] DEBUG com.example.student.security.LoginUser - 添加权限: system:notice:list
2025-10-09 19:11:52.587 [http-nio-8080-exec-2] DEBUG com.example.student.security.LoginUser - 添加权限: system:todo:list
2025-10-09 19:11:52.587 [http-nio-8080-exec-2] DEBUG com.example.student.security.LoginUser - 添加权限: system:user:profile
2025-10-09 19:11:52.587 [http-nio-8080-exec-2] DEBUG com.example.student.security.LoginUser - 添加权限: education:department:query
2025-10-09 19:11:52.587 [http-nio-8080-exec-2] DEBUG com.example.student.security.LoginUser - 添加权限: course:course:query
2025-10-09 19:11:52.587 [http-nio-8080-exec-2] DEBUG com.example.student.security.LoginUser - 添加权限: course:selection:query
2025-10-09 19:11:52.587 [http-nio-8080-exec-2] DEBUG com.example.student.security.LoginUser - 添加权限: attendance:record:add
2025-10-09 19:11:52.587 [http-nio-8080-exec-2] DEBUG com.example.student.security.LoginUser - 添加权限: attendance:record:edit
2025-10-09 19:11:52.587 [http-nio-8080-exec-2] DEBUG com.example.student.security.LoginUser - 添加权限: dashboard:basic
2025-10-09 19:11:52.587 [http-nio-8080-exec-2] DEBUG com.example.student.security.LoginUser - 添加权限: dashboard:charts
2025-10-09 19:11:52.587 [http-nio-8080-exec-2] DEBUG com.example.student.security.LoginUser - 添加权限: system:user:profile:query
2025-10-09 19:11:52.587 [http-nio-8080-exec-2] DEBUG com.example.student.security.LoginUser - 添加权限: system:user:profile:edit
2025-10-09 19:11:52.587 [http-nio-8080-exec-2] DEBUG com.example.student.security.LoginUser - 添加权限: system:user:profile:avatar
2025-10-09 19:11:52.587 [http-nio-8080-exec-2] DEBUG com.example.student.security.LoginUser - 添加角色: teacher
2025-10-09 19:11:52.587 [http-nio-8080-exec-2] INFO  com.example.student.security.LoginUser - 用户 teacher001 的权限列表: [education:department:list, education:student:list, education:teacher:list, course:course:list, course:offering:list, course:selection:list, course:teaching:list, attendance:record:list, attendance:stats:list, grade:input, grade:query, grade:stats, system:notice:list, system:todo:list, system:user:profile, education:department:query, course:course:query, course:selection:query, attendance:record:add, attendance:record:edit, dashboard:basic, dashboard:charts, system:user:profile:query, system:user:profile:edit, system:user:profile:avatar, teacher]
2025-10-09 19:11:52.587 [http-nio-8080-exec-2] INFO  c.example.student.filter.JwtAuthenticationFilter - 用户 teacher001 认证成功，权限: education:department:list, education:student:list, education:teacher:list, course:course:list, course:offering:list, course:selection:list, course:teaching:list, attendance:record:list, attendance:stats:list, grade:input, grade:query, grade:stats, system:notice:list, system:todo:list, system:user:profile, education:department:query, course:course:query, course:selection:query, attendance:record:add, attendance:record:edit, dashboard:basic, dashboard:charts, system:user:profile:query, system:user:profile:edit, system:user:profile:avatar, teacher
2025-10-09 19:11:52.587 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.example.student.controller.TeacherController#submitAttendanceByAdmin(Long, Map)
2025-10-09 19:11:52.588 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.example.student.controller.TeacherController#submitAttendanceByAdmin(Long, Map)
2025-10-09 19:11:52.589 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.example.student.controller.TeacherController#submitAttendanceByAdmin(Long, Map)
2025-10-09 19:11:52.589 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.example.student.controller.TeacherController#submitAttendanceByAdmin(Long, Map)
2025-10-09 19:11:52.589 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.example.student.controller.TeacherController#submitAttendanceByAdmin(Long, Map)
2025-10-09 19:11:52.590 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.example.student.controller.TeacherController#submitAttendanceByAdmin(Long, Map)
2025-10-09 19:11:52.590 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.example.student.controller.TeacherController#submitAttendanceByAdmin(Long, Map)
2025-10-09 19:11:52.591 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.example.student.controller.TeacherController#submitAttendanceByAdmin(Long, Map)
2025-10-09 19:11:52.591 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.example.student.controller.TeacherController#submitAttendanceByAdmin(Long, Map)
2025-10-09 19:11:52.591 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.example.student.controller.TeacherController#submitAttendanceByAdmin(Long, Map)
2025-10-09 19:11:52.592 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.example.student.controller.TeacherController#submitAttendanceByAdmin(Long, Map)
2025-10-09 19:11:52.592 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.example.student.controller.TeacherController#submitAttendanceByAdmin(Long, Map)
2025-10-09 19:11:52.592 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.example.student.controller.TeacherController#submitAttendanceByAdmin(Long, Map)
2025-10-09 19:11:52.593 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.example.student.controller.TeacherController#submitAttendanceByAdmin(Long, Map)
2025-10-09 19:11:52.593 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.example.student.controller.TeacherController#submitAttendanceByAdmin(Long, Map)
2025-10-09 19:11:52.593 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.example.student.controller.TeacherController#submitAttendanceByAdmin(Long, Map)
2025-10-09 19:11:52.594 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.example.student.controller.TeacherController#submitAttendanceByAdmin(Long, Map)
2025-10-09 19:11:52.594 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.example.student.controller.TeacherController#submitAttendanceByAdmin(Long, Map)
2025-10-09 19:11:52.594 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.example.student.controller.TeacherController#submitAttendanceByAdmin(Long, Map)
2025-10-09 19:11:52.594 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.example.student.controller.TeacherController#submitAttendanceByAdmin(Long, Map)
2025-10-09 19:11:52.594 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.example.student.controller.TeacherController#submitAttendanceByAdmin(Long, Map)
2025-10-09 19:11:52.596 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.example.student.controller.TeacherController#submitAttendanceByAdmin(Long, Map)
2025-10-09 19:11:52.596 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.example.student.controller.TeacherController#submitAttendanceByAdmin(Long, Map)
2025-10-09 19:11:52.597 [http-nio-8080-exec-2] DEBUG org.springframework.web.servlet.DispatcherServlet - PUT "/api/teacher/courses/attendance/1", parameters={}
2025-10-09 19:11:52.597 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.example.student.controller.TeacherController#submitAttendanceByAdmin(Long, Map)
2025-10-09 19:11:52.598 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [{date=2025-10-09, records=[{studentId=5, status=2, remark=}, {studentId=3, status=0, remark=}]}]
2025-10-09 19:11:52.599 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.example.student.common.exception.CommonGlobalExceptionHandler#handleException(Exception)
2025-10-09 19:11:52.599 [http-nio-8080-exec-2] ERROR c.e.s.c.exception.CommonGlobalExceptionHandler - 系统异常: 
org.springframework.security.access.AccessDeniedException: Access Denied
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.attemptAuthorization(AuthorizationManagerBeforeMethodInterceptor.java:257)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.invoke(AuthorizationManagerBeforeMethodInterceptor.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:751)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:751)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)
	at com.example.student.controller.TeacherController$$SpringCGLIB$$0.submitAttendanceByAdmin(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011)
	at org.springframework.web.servlet.FrameworkServlet.doPut(FrameworkServlet.java:925)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:593)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.example.student.filter.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:108)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)
2025-10-09 19:11:52.599 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-10-09 19:11:52.600 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [Result(code=500, message=系统异常，请联系管理员, data=null)]
2025-10-09 19:11:52.600 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.security.access.AccessDeniedException: Access Denied]
2025-10-09 19:11:52.600 [http-nio-8080-exec-2] DEBUG org.springframework.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-09 19:11:52.600 [http-nio-8080-exec-2] INFO  c.example.student.filter.JwtAuthenticationFilter - 请求完成: PUT /api/teacher/courses/attendance/1 状态码: 200
